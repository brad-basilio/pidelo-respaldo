var w=Object.defineProperty;var y=(i,t,n)=>t in i?w(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var v=(i,t,n)=>y(i,typeof t!="symbol"?t+"":t,n);import{j as r}from"./AboutSimple-Cf8x2fCZ.js";import{B as D}from"./Base-E7GYzR8N.js";import{r as s}from"./index-BH53Isel.js";import{c as S}from"./ReactAppend-DTVVXReZ.js";import{S as C}from"./ProductCard-erObE6pO.js";import{B as z}from"./BasicRest-C_0LADdJ.js";import{I as m}from"./InputFormGroup-D5I6zpZc.js";import{S as B}from"./SelectFormGroup-YqB1XVb8.js";import{M as E}from"./Modal-CIqmjseY.js";import{T as M}from"./Table-DitbKwtZ.js";import{D as h}from"./DxButton-DV0H-ZcL.js";import{C as F}from"./CreateReactScript-Bq8gMpEh.js";import{N as T}from"./Number2Currency-e57Tgsuk.js";import"./index-yBjzXJbu.js";import"./Global-ErywZRdd.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-7s5dsuEK.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./MenuItemContainer-BwGvRAHs.js";import"./index.esm-CveLAcri.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";class N extends z{constructor(){super(...arguments);v(this,"path","admin/delivery-zones")}}const d=new N,Z=()=>{const i=s.useRef(),t=s.useRef(),n=s.useRef(),l=s.useRef(),c=s.useRef(),a=s.useRef(),u=s.useRef(),[R,f]=s.useState(!1),x=e=>{e!=null&&e.id?f(!0):f(!1),n.current.value=(e==null?void 0:e.id)??"",l.current.value=(e==null?void 0:e.district)??"",c.current.value=(e==null?void 0:e.zone)??"",a.current.value=(e==null?void 0:e.price)??"",u.current.value=(e==null?void 0:e.delivery_days)??"",$(t.current).modal("show")},g=async e=>{e.preventDefault();const o={id:n.current.value||void 0,district:l.current.value,zone:c.current.value,price:a.current.value,delivery_days:u.current.value};await d.save(o)&&($(i.current).dxDataGrid("instance").refresh(),$(t.current).modal("hide"))},b=async e=>{const{isConfirmed:o}=await C.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!o||!await d.delete(e)||$(i.current).dxDataGrid("instance").refresh()};return r.jsxs(r.Fragment,{children:[r.jsx(M,{gridRef:i,title:"Zonas",rest:d,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>x()}})},pageSize:20,columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"district",caption:"Distrito",width:"20%"},{dataField:"zone",caption:"Zona",width:"20%"},{dataField:"price",dataType:"number",caption:"Precio",width:"15%",cellTemplate:(e,{value:o})=>{e.text(`S/. ${T(o)}`)}},{dataField:"delivery_days",caption:"Días de entrega",width:"25%",cellTemplate:(e,{value:o})=>{const p={L:"Lunes",M:"Martes",X:"Miércoles",J:"Jueves",V:"Viernes",S:"Sábado",D:"Domingo"};e.text(o.map(j=>p[j]).join(", "))}},{caption:"Acciones",width:"20%",cellTemplate:(e,{data:o})=>{e.css("text-overflow","unset"),e.append(h({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>x(o)})),e.append(h({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>b(o.id)}))},allowFiltering:!1,allowExporting:!1}]}),r.jsx(E,{modalRef:t,title:R?"Editar zona":"Agregar zona",onSubmit:g,size:"sm",children:r.jsxs("div",{className:"row",id:"zones-container",children:[r.jsx("input",{ref:n,type:"hidden"}),r.jsx(m,{eRef:l,label:"Distrito",col:"col-12",required:!0}),r.jsx(m,{eRef:c,label:"Zona",col:"col-12",required:!0}),r.jsx(m,{eRef:a,label:"Precio",type:"number",step:"0.01",col:"col-12",required:!0}),r.jsxs(B,{eRef:u,label:"Días de entrega",multiple:!0,col:"col-12",required:!0,dropdownParent:"#zones-container",children:[r.jsx("option",{value:"D",children:"Domingo"}),r.jsx("option",{value:"L",children:"Lunes"}),r.jsx("option",{value:"M",children:"Martes"}),r.jsx("option",{value:"X",children:"Miércoles"}),r.jsx("option",{value:"J",children:"Jueves"}),r.jsx("option",{value:"V",children:"Viernes"}),r.jsx("option",{value:"S",children:"Sábado"})]})]})})]})};F((i,t)=>{S.createRoot(i).render(r.jsx(D,{...t,title:"Zonas de Cobertura",children:r.jsx(Z,{...t})}))});
