var W=Object.defineProperty;var X=(l,o,i)=>o in l?W(l,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[o]=i;var F=(l,o,i)=>X(l,typeof o!="symbol"?o+"":o,i);import{j as e}from"./AboutHeader-COUW3Uy_.js";import{r as c}from"./index-CqkZ-sT_.js";import"./ProductCard-DppMoL6U.js";import{m as y}from"./main-CkMzf7wF.js";import"./BasicEditing-CqE15M_Q.js";import{N as Y}from"./NoResult-CKKmsI7-.js";import{P as ee}from"./ProductCardScraping-BBd3y3Bg.js";import{C as se,a as ae}from"./chevron-right-B4p_OAUH.js";import{F as te}from"./filter-CawzT8aa.js";import{C as _}from"./chevron-down-CxOx8ByU.js";import{S as q}from"./search-DhoFIDMi.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";import"./index.esm-uxJmvPV6.js";import"./createLucideIcon-D0vxYqnu.js";class A{}F(A,"getProducts",async o=>{console.log(o);try{const{query:i,proveedor:p,page:f,limit:d=12}=o,{status:g,result:n}=await y.Fetch("./api/scrap",{method:"POST",body:JSON.stringify({query:i,proveedor:p,page:f,limit:d})});return g?(y.Notify.add({icon:"/assets/img/icon.svg",title:"Operación correcta",body:"Se obtuvieron los productos correctamente"}),{data:n.data||[],filters:n.filters||[],hasMore:n.data.length===d}):(console.log((n==null?void 0:n.message)||"Error al obtener datos"),{data:[],hasMore:!1})}catch(i){return y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),{data:[],filters:[],hasMore:!1}}}),F(A,"getPaginatedProducts",async o=>{try{const{query:i,proveedor:p,page:f,limit:d=10}=o,{status:g,result:n}=await y.Fetch("./api/scrap",{method:"POST",body:JSON.stringify({query:i,proveedor:p,page:f,limit:d})});return g?{data:n.data||[],hasMore:n.data.length===d}:(console.log((n==null?void 0:n.message)||"Error al obtener más datos"),{data:[],hasMore:!1})}catch(i){return y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),{data:[],hasMore:!1}}});const re=()=>e.jsx("div",{className:"group font-font-general animate-pulse w-full transition-transform duration-300 hover:scale-105  sm:w-1/3 flex-shrink-0 font-font-general customtext-primary cursor-pointer",children:e.jsx("div",{className:" px-4",children:e.jsx("div",{className:"bg-white rounded-3xl",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center  bg-secondary",children:e.jsx("svg",{class:"w-10 h-10 text-gray-200 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:e.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),Ne=({items:l,data:o,filteredData:i,cart:p,setCart:f})=>{const{categories:d,brands:g,priceRanges:n}=i,[u,H]=c.useState({marca:!0,precio:!0,categoria:!0,colores:!1}),[h,M]=c.useState({category_id:[],brand_id:[],subcategory_id:[],price:null,name:null,sort_by:"created_at",order:"desc"}),[j,$]=c.useState([]),[I,E]=c.useState(!1),[ie,T]=c.useState({currentPage:1,totalPages:1}),L=async(s,a,r=1)=>{if(!s){alert("Por favor, ingresa un término de búsqueda");return}E(!0);try{const t=await A.getProducts({query:s,proveedor:a,page:r});$(r===1?t.data:m=>[...m,...t.data]),T({currentPage:t.currentPage,totalPages:t.lastPage}),console.log(t.data)}catch(t){console.error("Error:",t),alert("Hubo un error al realizar la búsqueda. Por favor, intenta nuevamente.")}finally{E(!1)}},[v,V]=c.useState(""),[P,Z]=c.useState("nike");c.useEffect(()=>{const s=new URLSearchParams(window.location.search),a=s.get("category");if(a){const r=d.find(t=>t.slug===a);r&&M(t=>({...t,category_id:[r.id]}))}V(s.get("search")),Z(s.get("provider")),v&&L(v,P)},[l]);const b=(s,a)=>{M(r=>{if(s==="price")return{...r,price:r.price&&r.price.min===a.min&&r.price.max===a.max?null:a};const t=Array.isArray(r[s])?r[s]:[],m=t.includes(a)?t.filter(w=>w!==a):[...t,a];return{...r,[s]:m}})},C=s=>{H(a=>({...a,[s]:!a[s]}))},[B,J]=c.useState(""),[O,z]=c.useState(""),D=d.filter(s=>s.name.toLowerCase().includes(B.toLowerCase())),U=g.filter(s=>s.name.toLowerCase().includes(O.toLowerCase())),[x,N]=c.useState(1),S=12,R=x*S,G=R-S,K=Array.isArray(j)?j.slice(G,R):[],k=Math.ceil(j.length/S),Q=s=>N(s);return e.jsx("section",{className:"py-12 bg-[#F7F9FB] font-font-general",children:e.jsxs("div",{className:"mx-auto px-primary",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 pb-4 border-b-2",children:[e.jsx("h2",{className:"text-4xl font-bold w-6/12",children:"Todos los productos"}),e.jsx("div",{className:"flex items-center gap-4 w-5/12",children:e.jsx("div",{className:"flex justify-end items-center mb-4 w-full",children:e.jsx("div",{className:"customtext-neutral-dark font-semibold",children:e.jsxs("nav",{class:"flex items-center gap-x-2 min-w-max",children:[e.jsx("button",{class:" p-4 inline-flex items-center",onClick:()=>{N(x-1)},disabled:x===1,children:e.jsx(se,{})}),e.jsx("ul",{className:"list-none flex gap-2",children:[...Array(k).keys()].map(s=>e.jsx("li",{className:`page-item ${x===s+1?"active":""}`,children:e.jsx("button",{onClick:()=>Q(s+1),class:`w-10 h-10  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary ${x===s+1?"bg-primary text-white":" bg-transparent"}`,"aria-current":"page",children:s+1})},s+1))}),e.jsx("button",{class:" p-4 inline-flex items-center ",onClick:()=>{const s=x+1;s<=k?N(s):(N(s),L(v,P,s)),console.log("Página solicitada:",s)},disabled:x===k&&P==="invictastores",children:e.jsx(ae,{})})]})})})})]}),e.jsxs("div",{className:"relative flex gap-4",children:[e.jsxs("div",{className:"w-3/12 bg-white p-4 rounded-lg h-max",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),e.jsx(te,{className:"h-5 w-5"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>C("marca"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Marca"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${u.marca?"":"-rotate-180"}`})]}),u.marca&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:O,onChange:s=>z(s.target.value)})]}),e.jsx("div",{className:"space-y-3",children:U.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>b("brand_id",s.id)}),e.jsx("span",{children:s.name})]},s.id))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>C("precio"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${u.precio?"":"-rotate-180"}`})]}),u.precio&&e.jsx("div",{className:"space-y-3",children:n.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300",onChange:()=>b("price",s),checked:h.price&&h.price.min===s.min&&h.price.max===s.max}),e.jsx("span",{children:`S/ ${s.min} - S/ ${s.max}`})]},`${s.min}-${s.max}`))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>C("categoria"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Categoría"}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${u.categoria?"":"-rotate-180"}`})]}),u.categoria&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:B,onChange:s=>J(s.target.value)})]}),D.map(s=>{var a,r,t;return e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>b("category_id",s.id),checked:(a=h.category_id)==null?void 0:a.includes(s.id)}),e.jsx("span",{children:s.name})]}),((r=h.category_id)==null?void 0:r.includes(s.id))&&((t=s.subcategories)==null?void 0:t.length)>0&&e.jsx("ul",{className:"ml-6 mt-2 space-y-2",children:s.subcategories.map(m=>{var w;return e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>b("subcategory_id",m.id),checked:(w=h.subcategory_id)==null?void 0:w.includes(m.id)}),e.jsx("span",{children:m.name})]},m.id)})})]},s.id)})]})]}),e.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl hover:brightness-90 transition-colors text-sm font-bold",children:"Aplicar Filtro"})]}),e.jsx("div",{className:"w-9/12",children:I?e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>e.jsx(re,{},s))}):e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(j)&&j.length>0?K.map((s,a)=>e.jsx(ee,{product:s,widthClass:"lg:w-1/3",cart:p,setCart:f},a)):e.jsx(Y,{})})})]})]})})};export{Ne as default};
