import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BH53Isel.js";import{h as E,E as T}from"./Editor-Dt0Ba3hx.js";import{T as I}from"./trash-2-DK1wnsDn.js";import"./index-yBjzXJbu.js";import"./preload-helper-DPi8upcZ.js";import"./typeof-QjJsDpFa.js";import"./createLucideIcon-Cy5Ya80P.js";const m=[{id:1,layout:"grid-cols-2 grid-rows-1",nombre:"Pág. 1"},{id:2,layout:"grid-cols-2 grid-rows-2 [&>*:first-child]:col-span-1 [&>*:first-child]:row-span-2",nombre:"Pág. 2"},{id:3,layout:"grid-cols-2 grid-rows-2 [&>*:last-child]:col-span-1 [&>*:last-child]:row-span-2",nombre:"Pág. 3"},{id:4,layout:"grid-cols-2 grid-rows-2",nombre:"Pág. 4"},{id:5,layout:"grid-cols-3 grid-rows-2",nombre:"Pág. 5"},{id:6,layout:"grid-cols-3 grid-rows-3",nombre:"Pág. 6"},{id:7,layout:"grid-cols-2 grid-rows-2 [&>*:nth-child(1)]:col-span-2",nombre:"Pág. 7"}],f=[{id:"normal",nombre:"Normal",clase:""},{id:"sepia",nombre:"Sepia",clase:"sepia"},{id:"grayscale",nombre:"B&N",clase:"grayscale"},{id:"warm",nombre:"Cálido",clase:"brightness-105 contrast-105 saturate-150 hue-rotate-15"},{id:"cool",nombre:"Frío",clase:"brightness-105 contrast-105 saturate-90 hue-rotate-180"},{id:"vintage",nombre:"Vintage",clase:"sepia brightness-90 contrast-110"}];function oe(){const[p,v]=r.useState(1),[l,c]=r.useState([]),[D,A]=r.useState(""),[q,L]=r.useState(""),[R,U]=r.useState("seleccion"),[n,g]=r.useState(null),[d,h]=r.useState("niveles"),[i,b]=r.useState({exposicion:50,contraste:50,saturacion:50,temperatura:50,tono:50,iluminaciones:50,sombras:50}),[j,x]=r.useState("normal"),[z,B]=r.useState(!1),[M,O]=r.useState("Tipografía"),[V,W]=r.useState(16),[G,_]=r.useState("#000000"),[H,N]=r.useState(24);r.useRef(null);const w=m.find(e=>e.id===p),y=e=>{v(e);const o=m.find(a=>a.id===e),t=o.layout.includes("grid-cols-3")?o.layout.includes("grid-rows-3")?9:6:o.layout.includes("[&>*:first-child]:row-span-2")||o.layout.includes("[&>*:last-child]:row-span-2")||o.layout.includes("[&>*:nth-child(1)]:col-span-2")?3:o.layout.includes("grid-rows-2")?4:2;if(l.length<t){const a=[...l];for(;a.length<t;)a.push({id:Date.now()+a.length,src:"/placeholder.svg?height=150&width=150",alt:`Foto ${a.length+1}`,filtro:"normal",ajustes:{...i}});c(a)}};r.useEffect(()=>{if(l.length===0){const e=[{id:1,src:"/assets/img/backgrounds/resources/image1.png",alt:"Foto 1",filtro:"normal",ajustes:{...i}},{id:2,src:"/assets/img/backgrounds/resources/image2.png",alt:"Foto 2",filtro:"normal",ajustes:{...i}}];c(e)}},[]);const S=e=>{if(g(e),e!==null&&l[e]){const o=l[e];x(o.filtro||"normal"),b(o.ajustes||{...i})}},F=e=>{if(n===null)return;const o=[...l];o[n]={...o[n],filtro:e},c(o),x(e)},u=(e,o)=>{if(n===null)return;const t={...i,[e]:o};b(t);const a=[...l];a[n]={...a[n],ajustes:t},c(a)},k=e=>{const o=[...l],t=o[e];t&&t.src&&t.src.startsWith("blob:")&&URL.revokeObjectURL(t.src),o.splice(e,1),c(o),n===e&&g(null),N(a=>a-1)},$=e=>e?{filter:`
        brightness(${e.exposicion/50*.5+.75})
        contrast(${e.contraste/50*.5+.75})
        saturate(${e.saturacion/50*.5+.75})
        hue-rotate(${(e.tono-50)*3.6}deg)
        sepia(${e.temperatura>50?(e.temperatura-50)/50:0})
        brightness(${e.iluminaciones>50?(e.iluminaciones-50)/50+1:1})
        brightness(${e.sombras<50?e.sombras/50:1})
      `}:"",C=e=>{const o=f.find(t=>t.id===e);return o?o.clase:""};r.useEffect(()=>()=>{l.forEach(e=>{e.src&&e.src.startsWith("blob:")&&URL.revokeObjectURL(e.src)})},[]);const P=()=>{const e=document.querySelector(".libro-container");E(e).then(o=>{const t=o.toDataURL("image/png"),a=new T({orientation:"landscape",unit:"px",format:[o.width,o.height]});a.addImage(t,"PNG",0,0,o.width,o.height),a.save("libro-personalizado.pdf")})};return s.jsxs("div",{className:"min-h-screen bg-white max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Libro Personalizado"}),s.jsx("h2",{className:"text-xl",children:"«Buenos Deseos de Matrimonio»"})]}),s.jsx("button",{onClick:P,className:"bg-primary text-white px-6 py-2 rounded-full",children:"Exportar como PDF"})]}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"w-full md:w-64 p-4 border-r",children:[s.jsxs("div",{className:"flex border-b mb-4",children:[s.jsx("button",{className:`flex-1 py-2 text-center ${d==="niveles"?"border-b-2 border-purple-500 font-medium":""}`,onClick:()=>h("niveles"),children:"Niveles"}),s.jsx("button",{className:`flex-1 py-2 text-center ${d==="filtros"?"border-b-2 border-purple-500 font-medium":""}`,onClick:()=>h("filtros"),children:"Filtros"})]}),d==="niveles"&&n!==null&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium",children:"Exposición"}),s.jsx("input",{type:"range",min:"0",max:"100",value:i.exposicion,onChange:e=>u("exposicion",Number.parseInt(e.target.value)),className:"w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium",children:"Contraste"}),s.jsx("input",{type:"range",min:"0",max:"100",value:i.contraste,onChange:e=>u("contraste",Number.parseInt(e.target.value)),className:"w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium",children:"Saturación"}),s.jsx("input",{type:"range",min:"0",max:"100",value:i.saturacion,onChange:e=>u("saturacion",Number.parseInt(e.target.value)),className:"w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer accent-purple-500"})]})]}),d==="filtros"&&n!==null&&s.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(e=>s.jsxs("button",{className:`p-2 rounded ${j===e.id?"ring-2 ring-purple-500 bg-purple-50":"bg-gray-100"}`,onClick:()=>F(e.id),children:[s.jsx("div",{className:"aspect-square overflow-hidden rounded mb-1",children:s.jsx("div",{className:`w-full h-full bg-gray-300 ${e.clase}`})}),s.jsx("span",{className:"text-xs",children:e.nombre})]},e.id))})]}),s.jsxs("div",{className:"flex-1 p-4",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-1/2 aspect-square border border-dashed border-gray-300 rounded-lg relative overflow-hidden",children:s.jsx("div",{className:`grid w-full h-full ${w.layout}`,children:l.slice(0,4).map((e,o)=>s.jsxs("div",{className:`relative overflow-hidden ${n===o?"ring-2 ring-purple-500":""}`,onClick:()=>S(o),children:[s.jsx("img",{src:e.src||"/assets/img/backgrounds/resources/default-image.png",alt:e.alt,className:`w-full h-full object-cover ${C(e.filtro||"normal")}`,style:$(e.ajustes)}),s.jsx("button",{className:"absolute bottom-2 right-2 bg-white rounded-full p-1 shadow-md hover:bg-red-100",onClick:t=>{t.stopPropagation(),k(o)},children:s.jsx(I,{className:"h-4 w-4 text-red-500"})})]},o))})}),s.jsx("div",{className:"w-1/2 aspect-square border border-dashed border-gray-300 rounded-lg overflow-hidden relative",children:s.jsx("img",{src:"/assets/img/backgrounds/resources/default-image.png",alt:"Imagen principal",className:"w-full h-full object-cover"})})]}),s.jsx("div",{className:"mt-8",children:s.jsx("div",{className:"grid grid-cols-7 gap-2",children:m.map(e=>s.jsxs("button",{className:`border border-dashed rounded p-2 aspect-square ${p===e.id?"border-purple-500 bg-purple-50":"border-gray-300"}`,onClick:()=>y(e.id),children:[s.jsx("div",{className:`grid h-full w-full ${e.layout}`,children:Array.from({length:e.layout.includes("grid-cols-3")?e.layout.includes("grid-rows-3")?9:6:e.layout.includes("[&>*:first-child]:row-span-2")||e.layout.includes("[&>*:last-child]:row-span-2")||e.layout.includes("[&>*:nth-child(1)]:col-span-2")?3:e.layout.includes("grid-rows-2")?4:2}).map((o,t)=>s.jsx("div",{className:"bg-gray-200"},t))}),s.jsx("span",{className:"text-xs mt-1 block text-center",children:e.nombre})]},e.id))})})]})]})})]})}export{oe as default};
