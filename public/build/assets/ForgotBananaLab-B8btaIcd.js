import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{A as v}from"./AuthClientRest-BrGQ816K.js";import{r as i}from"./index-BH53Isel.js";import{J as j}from"./JSEncrypt-BF8AmNNu.js";import{S as s}from"./ProductCard-C2H10lUi.js";import{m}from"./main-BSEyQEJW.js";import{G as g}from"./Global-ErywZRdd.js";import{m as t}from"./proxy-BTYtmp9V.js";import{A as N}from"./index-CFtDjG4d.js";import"./index-yBjzXJbu.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";function T(){const o=new j;o.setPublicKey(g.PUBLIC_RSA_KEY);const[n,l]=i.useState(!1),[d,u]=i.useState(!1),c=i.useRef(),p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},a={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}},x={y:-5,boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",transition:{type:"spring",stiffness:300}},h={scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},f={scale:.98};i.useEffect(()=>{m.GET.message&&s.fire({icon:"info",title:"Mensaje",text:m.GET.message,showConfirmButton:!1,timer:3e3})},[]);const y=async b=>{b.preventDefault(),l(!0);try{const r=c.current.value,w={email:o.encrypt(r)};if(!await v.forgotPassword(w))throw new Error("No se pudo procesar la solicitud");u(!0),s.fire({icon:"success",title:"Éxito",text:"Hemos enviado un enlace de recuperación a tu correo electrónico",showConfirmButton:!1,timer:3e3})}catch(r){s.fire({icon:"error",title:"Error",text:r.message||"Ocurrió un error al enviar la solicitud",showConfirmButton:!1,timer:3e3})}finally{l(!1)}};return e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full px-primary mx-auto py-16",children:e.jsx(t.div,{className:"flex items-center justify-center",variants:p,initial:"hidden",animate:"visible",children:e.jsxs(t.div,{className:"mx-auto w-full max-w-md bg-sections-color rounded-3xl p-8 space-y-6 shadow-lg",variants:a,whileHover:x,children:[e.jsxs(t.div,{className:"space-y-2",variants:a,children:[e.jsx(t.h5,{className:"customtext-primary font-medium",initial:{x:-10},animate:{x:0},children:"Restaurar contraseña"}),e.jsx(t.h1,{className:"text-3xl font-bold customtext-neutral-dark",initial:{y:10},animate:{y:0},transition:{delay:.1},children:"Ops, olvidé mi contraseña"}),e.jsx(t.p,{className:"customtext-neutral-light",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),e.jsx(N,{mode:"wait",children:d?e.jsxs(t.div,{className:"text-center py-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(t.div,{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",animate:{scale:[1,1.1,1],rotate:[0,10,-10,0]},transition:{duration:.6},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-xl font-bold customtext-neutral-dark mb-2",children:"¡Correo enviado!"}),e.jsx("p",{className:"customtext-neutral-light mb-6",children:"Revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contraseña."}),e.jsx(t.a,{href:"/iniciar-sesion",className:"inline-block customtext-primary font-medium border-b border-primary",whileHover:{scale:1.05},children:"Volver al inicio de sesión"})]}):e.jsxs(t.form,{className:"space-y-4",onSubmit:y,initial:{opacity:1},exit:{opacity:0},variants:a,children:[e.jsxs(t.div,{className:"space-y-2",variants:a,children:[e.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",htmlFor:"email",children:"Email"}),e.jsx(t.input,{id:"email",ref:c,name:"email",type:"email",placeholder:"hola@mail.com",className:"w-full px-4 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",required:!0,whileFocus:{borderColor:"#3B82F6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.2)"}})]}),e.jsx(t.button,{type:"submit",className:"w-full rounded-xl font-semibold bg-primary px-4 py-3 text-white hover:opacity-90 focus:outline-none",variants:a,whileHover:h,whileTap:f,disabled:n,children:n?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar enlace de recuperación"})]})})]})})})}export{T as default};
