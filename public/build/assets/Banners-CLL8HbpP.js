var G=Object.defineProperty;var I=(a,r,c)=>r in a?G(a,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[r]=c;var j=(a,r,c)=>I(a,typeof r!="symbol"?r+"":r,c);import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{B as N}from"./Base-B5n7l-aq.js";import{T as b}from"./TextareaFormGroup-CdwdsTk2.js";import{r as l}from"./index-BH53Isel.js";import{c as _}from"./ReactAppend-DTVVXReZ.js";import{s as M}from"./server.browser-Bf4gQIc7.js";import{S as A}from"./ProductCard-C2H10lUi.js";import{B as P}from"./BasicRest-DEv02zgs.js";import{I as k}from"./ImageFormGroup-BPR9pDAU.js";import{S as L}from"./SwitchFormGroup-DUGhyqoj.js";import{M as V}from"./Modal-CIqmjseY.js";import{T as q}from"./Table-DitbKwtZ.js";import{D as T}from"./DxButton-DV0H-ZcL.js";import{I as y}from"./InputFormGroup-D5I6zpZc.js";import{C as z}from"./CreateReactScript-B3e40jAW.js";import{R as w}from"./ReactAppend-D7S498fx.js";import"./index-yBjzXJbu.js";import"./Global-ErywZRdd.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-jUU_tfUq.js";import"./main-BSEyQEJW.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./MenuItemContainer-BkmzVQNY.js";import"./index.esm-BE8-iLxT.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";class O extends P{constructor(){super(...arguments);j(this,"path","admin/banners");j(this,"hasFiles",!0)}}const p=new O,U=({pages:a})=>{const r=l.useRef(),c=l.useRef(),f=l.useRef(),x=l.useRef(),g=l.useRef(),u=l.useRef(),d=l.useRef(),h=l.useRef(),R=l.useRef(),[B,F]=l.useState(!1),E=e=>{var t,i,o,n,v,m;e!=null&&e.id?F(!0):F(!1),f.current.value=(e==null?void 0:e.id)??"",x.current.value=((t=e==null?void 0:e.data)==null?void 0:t.name)??"",g.current.value=((i=e==null?void 0:e.data)==null?void 0:i.description)??"",u.current.value=null,u.image.src=`/storage/images/system/${(o=e==null?void 0:e.data)==null?void 0:o.background}`,d.current.value=null,d.image.src=`/storage/images/system/${(n=e==null?void 0:e.data)==null?void 0:n.image}`,h.current.value=((v=e==null?void 0:e.data)==null?void 0:v.button_text)??"",R.current.value=((m=e==null?void 0:e.data)==null?void 0:m.button_link)??"",$(c.current).modal("show")},D=async e=>{e.preventDefault();const t={id:f.current.value||void 0,name:x.current.value,description:g.current.value,button_text:h.current.value,button_link:R.current.value},i=new FormData;for(const m in t)i.append(m,t[m]);const o=u.current.files[0];o&&i.append("background",o);const n=d.current.files[0];n&&i.append("image",n),await p.save(i)&&($(r.current).dxDataGrid("instance").refresh(),$(c.current).modal("hide"))},C=async({id:e,value:t})=>{await p.boolean({id:e,field:"visible",value:t})&&$(r.current).dxDataGrid("instance").refresh()},S=async e=>{const{isConfirmed:t}=await A.fire({title:"Eliminar registro",text:"¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!t||!await p.delete(e)||$(r.current).dxDataGrid("instance").refresh()};return s.jsxs(s.Fragment,{children:[s.jsx(q,{gridRef:r,title:"Banners",rest:p,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(r.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",cellTemplate:(e,{data:t})=>{const i=a.find(o=>o.id==(t==null?void 0:t.page_id));e.html(M.renderToString(s.jsxs(s.Fragment,{children:[s.jsx("b",{className:"d-block",children:t==null?void 0:t.name}),s.jsxs("small",{className:"text-muted",children:["Pagina: ",i==null?void 0:i.name]})]})))}},{dataField:"after.name",caption:"Despues de"},{dataField:"background",caption:"Fondo",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{var i;w(e,s.jsx("img",{src:`/storage/images/system/${(i=t==null?void 0:t.data)==null?void 0:i.background}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/api/cover/thumbnail/null"}))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{var i;w(e,s.jsx("img",{src:`/storage/images/system/${(i=t==null?void 0:t.data)==null?void 0:i.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:t})=>{$(e).empty(),w(e,s.jsx(L,{checked:t.visible==1,onChange:()=>C({id:t.id,value:!t.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:t})=>{e.css("text-overflow","unset"),e.append(T({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>E(t)})),e.append(T({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>S(t.id)}))},allowFiltering:!1,allowExporting:!1}]}),s.jsxs(V,{modalRef:c,title:B?"Editar banner":"Agregar banner",onSubmit:D,size:"md",children:[s.jsx("input",{ref:f,type:"hidden"}),s.jsx(k,{eRef:u,label:"Fondo"}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-sm-6",children:s.jsx(k,{eRef:d,label:"Imagen",aspect:1})}),s.jsxs("div",{className:"col-sm-6",children:[s.jsx(b,{eRef:x,label:"Titulo",rows:2}),s.jsx(b,{eRef:g,label:"Descripción",rows:2}),s.jsx(y,{eRef:h,label:"Texto botón"})]})]}),s.jsx(y,{eRef:R,label:"URL botón"})]})]})};z((a,r)=>{_.createRoot(a).render(s.jsx(N,{...r,title:"Banners",children:s.jsx(U,{...r})}))});
