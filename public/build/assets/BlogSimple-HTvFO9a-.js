import{j as e}from"./AboutHeader-COUW3Uy_.js";import{r as n}from"./index-CqkZ-sT_.js";import{P as $}from"./PostsRest-BcNFA_fY.js";import{C as E}from"./chevron-down-CxOx8ByU.js";import{S}from"./search-DhoFIDMi.js";import{C as L}from"./check-CvqheCNB.js";import{L as F}from"./Loading-CS0Y7TJ8.js";import{N as k}from"./NoResult-CKKmsI7-.js";import"./BasicEditing-CqE15M_Q.js";import"./main-CkMzf7wF.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";import"./createLucideIcon-D0vxYqnu.js";function v({flex:l=!1,post:a,featured:o=!1}){return e.jsx("article",{className:`group relative ${o?"h-full":""}`,children:e.jsxs("a",{href:"#",className:`block ${l&&"flex gap-4 "}`,children:[e.jsx("div",{className:`relative aspect-video overflow-hidden rounded-lg ${l&&"aspect-square  w-1/2"} `,children:e.jsx("img",{src:`/api/posts/media/${a==null?void 0:a.image}`,alt:a==null?void 0:a.name,fill:!0,className:`object-cover transition-transform duration-300 group-hover:scale-105 ${l&&"h-full w-full"} `})}),e.jsxs("div",{className:`mt-4 space-y-2 ${l&&"w-1/2 mt-0 gap-6"}`,children:[e.jsx("span",{className:"customtext-primary font-medium",children:a==null?void 0:a.category.name}),e.jsx("h3",{className:"text-xl font-semibold group-hover:customtext-primary",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-gray-600 line-clamp-3",children:a==null?void 0:a.summary}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("time",{children:a==null?void 0:a.post_date}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Leído hace 5 minutos"})]})]})]})})}const B=({options:l=[],placeholder:a="Select an option",onChange:o,valueKey:m,labelKey:u,label:i,labelClass:x,className:h,disabled:f=!1})=>{const[r,g]=n.useState(!1),[d,b]=n.useState(null),[y,N]=n.useState(""),p=n.useRef(null),s=l.length>0&&typeof l[0]=="object",c=s?m||Object.keys(l[0])[0]:null,j=s?u||Object.keys(l[0])[1]:null,C=l.map(t=>s?{value:t[c],label:t[j]}:{value:t,label:t}).filter(t=>t.label.toLowerCase().includes(y.toLowerCase()));n.useEffect(()=>{const t=O=>{p.current&&!p.current.contains(O.target)&&g(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const _=t=>{b(t),o(t.value),g(!1)};return e.jsxs("div",{className:"relative w-full",ref:p,children:[i&&e.jsx("label",{className:`block text-sm mb-1 customtext-neutral-dark ${x}`,children:i}),e.jsxs("button",{className:`w-full relative text-start  px-4 py-3 border customtext-neutral-dark   rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300 ${h}`,onClick:()=>g(!r),"aria-haspopup":"listbox","aria-expanded":r,disabled:f,children:[e.jsx("span",{className:"block truncate",children:d?d.label:a}),e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center py-3 pr-2 pointer-events-none",children:e.jsx(E,{className:`w-5 h-5 customtext-neutral-dark transition-transform duration-200 ${r?"rotate-180":""}`})})]}),r&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg max-h-60 overflow-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search options...",value:y,onChange:t=>N(t.target.value)})]})}),e.jsx("ul",{className:"py-1",role:"listbox",children:C.map(t=>e.jsxs("li",{className:`px-4 py-2 cursor-pointer flex items-center justify-between 
                                    ${d&&d.value===t.value?"bg-blue-500 text-white":"hover:bg-gray-100"}`,onClick:()=>_(t),role:"option","aria-selected":d&&d.value===t.value,children:[e.jsx("span",{className:"block truncate",children:t.label}),d&&d.value===t.value&&e.jsx(L,{className:"w-5 h-5"})]},t.value))})]})]})},A=new $;function R({posts:l,setPosts:a,headerPosts:o,filteredData:m,loading:u,setLoading:i,isFilter:x,setIsFilter:h}){const{categories:f}=m,[r,g]=n.useState({category_id:"",post_date:"",name:""}),[d,b]=n.useState(!0),y=s=>{const c=[];return s.category_id&&c.push(["category_id","=",s.category_id]),s.post_date&&(console.log("Fecha seleccionada:",s.post_date),c.push(["post_date","=",s.post_date])),s.name&&(console.log("Nombre seleccionado:",s.name),c.push(["name","contains",s.name])),c},N=async()=>{i(!0);try{const s=y(r),c=r.category_id||r.post_date||r.name,j={with:"category",filter:s};console.log(j);const w=await A.paginate(j);console.log(w),a(w.data),h(!!c)}catch(s){console.error("Error fetching posts:",s)}finally{i(!1)}};n.useEffect(()=>{d?b(!1):N()},[r]);const p=(s,c)=>{g(j=>({...j,[s]:c}))};return n.useEffect(()=>{console.log("BlogHeader - posts actualizados:",l)},[l]),e.jsx("main",{className:"bg-white font-font-general",children:e.jsxs("section",{className:`px-primary mx-auto ${x?"pt-8":"py-8"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("span",{className:"customtext-neutral-light  font-bold ",children:"Blog"}),e.jsxs("h1",{className:" customtext-neutral-dark md:text-5xl font-bold tracking-tight",children:["Descubre lo mejor:",e.jsx("br",{}),"Publicaciones sobre el mundo de la decoración"]}),e.jsx("p",{className:"customtext-neutral-dark opacity-80",children:"Nuestros juguetes están diseñados para inspirar, educar y divertir, desarrollando habilidades esenciales desde temprana edad."})]}),e.jsxs("div",{className:"mt-8 flex flex-col md:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative md:w-6/12 flex items-center",children:[e.jsx("input",{type:"search",placeholder:"Buscar publicación",className:"w-full px-4 relative py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:s=>p("name",s.target.value)}),e.jsx("div",{className:"absolute right-3 p-2 rounded-xl bg-primary",children:e.jsx(S,{className:" h-5 w-5 text-white"})})]}),e.jsxs("div",{className:"flex w-full gap-2 md:gap-4 md:w-5/12",children:[e.jsx("div",{className:"w-1/2 md:w-full",children:e.jsx(B,{options:f,placeholder:"Todas las categorías",onChange:s=>{g(c=>({...c,category_id:s}))},labelKey:"name",valueKey:"id"})}),e.jsx("input",{type:"date",className:"w-1/2 md:w-full px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:s=>{p("post_date",s.target.value)}})]})]}),!x&&e.jsxs("div",{className:"mt-12 flex gap-8",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(v,{featured:!0,post:o[0]})}),e.jsx("div",{className:"hidden md:flex space-y-4  flex-col w-1/2",children:o.slice(1,3).map(s=>e.jsx(v,{flex:!0,post:s},s.id))})]})]})})}function z({posts:l,postsLatest:a,loading:o,isFilter:m}){return console.log("isFilter:",m),console.log("posts:",l),n.useEffect(()=>{},[l]),e.jsx("section",{className:`font-font-general ${m?"pb-16":"py-16"}`,children:e.jsx("div",{className:"px-primary mx-auto",children:m?e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-8 mt-8",children:o?e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(F,{})}):Array.isArray(l)&&l.length>0?l.map((u,i)=>e.jsx(v,{post:u},i)):e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(k,{})})}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Últimas publicaciones"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Nam tempor diam quis urna maximus, ac laoreet arcu convallis. Aenean dignissim nec sem quis consequat."}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-8",children:Array.isArray(a)&&a.length>0?a.map((u,i)=>e.jsx(v,{post:u},i)):e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(k,{})})})]})})})}const U=({data:l,headerPosts:a,filteredData:o,postsLatest:m})=>{const[u,i]=n.useState([]),[x,h]=n.useState(!1),[f,r]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(R,{data:l,headerPosts:a,loading:x,setLoading:h,posts:u,setPosts:i,filteredData:o,isFilter:f,setIsFilter:r}),e.jsx(z,{data:l,postsLatest:m,posts:u,loading:x,setLoading:h,isFilter:f,setIsFilter:r})]})};export{U as default};
