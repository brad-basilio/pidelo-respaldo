var ne=Object.defineProperty;var re=(s,r,n)=>r in s?ne(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;var B=(s,r,n)=>(re(s,typeof r!="symbol"?r+"":r,n),n);import{j as e}from"./AboutHeader-Bdo2C3ON.js";import{r as u}from"./index-DFv2mRv-.js";import{c as ie}from"./ReactAppend-CwiwA4iz.js";import{C as le}from"./CreateReactScript-D-eDfVKV.js";import{i as J}from"./tippy-react.esm-BVvHiWwH.js";import{m as S}from"./main-BBbUrZUL.js";import{B as ae}from"./BasicEditing-Ce9hwHaI.js";import{S as X}from"./SwitchFormGroup-CHRdLToT.js";import{G as q}from"./Global-mC9lKANG.js";import{S as Y}from"./SortByAfterField-BaS5rBg8.js";import{I as L}from"./InputFormGroup-Di7UVG_e.js";import{M as ee}from"./Modal-C9s5p_Ex.js";import{S as z}from"./SelectFormGroup-BrarcXCi.js";import{S as ce}from"./SetSelectValue-UxyCmHse.js";import{a as oe,M as K}from"./MenuItemContainer-xrd2f-pb.js";import{M as me}from"./Modal-41duzYEO.js";import"./index-DgyC5pTR.js";import"./index.esm-B502ZfUP.js";import"./___vite-browser-external_commonjs-proxy-BQdpDcDf.js";/* empty css               *//* empty css              */class T extends ae{constructor(){super(...arguments);B(this,"path","admin/system");B(this,"savePage",async(n={})=>{try{const{status:i,result:l}=await S.Fetch(`/api/${this.path}/page`,{method:"POST",body:JSON.stringify(n)});if(!i)throw new Error((l==null?void 0:l.message)||"Ocurrio un error inesperado");return l.data??[]}catch(i){return S.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),null}});B(this,"updateOrder",async n=>{try{const{status:i,result:l}=await S.Fetch(`/api/${this.path}/order`,{method:"PATCH",body:JSON.stringify(n)});if(!i)throw new Error((l==null?void 0:l.message)??"Ocurrio un error inesperado");return!0}catch(i){S.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"})}});B(this,"deletePage",async n=>{try{const{status:i,result:l}=await S.Fetch(`/api/${this.path}/page/${n}`,{method:"DELETE"});if(!i)throw new Error((l==null?void 0:l.message)||"Ocurrio un error inesperado");return l.data??!0}catch(i){return S.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),!1}});B(this,"exportBK",async()=>{try{const{status:n,result:i}=await S.Fetch(`/api/${this.path}/backup`);if(!n)throw new Error((i==null?void 0:i.message)||"Ocurrio un error inesperado");return i}catch(n){return S.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:n.message,type:"danger"}),null}});B(this,"importBK",async n=>{try{const i=await fetch(`/api/${this.path}/backup`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(S.Cookies.get("XSRF-TOKEN"))},body:n}),l=JSON.parseable(await i.text());if(!i.ok)throw new Error((l==null?void 0:l.message)||"Ocurrio un error inesperado");return l??!0}catch(i){return S.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),null}})}}const G=(s="")=>{s=s.replace(/[^a-zA-Z0-9_{}]/g,"");const r=/{([^}]+)}/g,n=[];let i;for(;(i=r.exec(s))!==null;)n.push(i[1]);return n},ue=(s,r)=>{const n=new RegExp(`[${r}]+$`,"g");return s.replace(n,"")},V=new T,de=s=>{const{id:r,name:n,path:i,extends_base:l=!1,menuable:h=!1,setPages:a,onSEOClicked:f,onParamsClicked:p}=s,[c,v]=u.useState(!1),[g,N]=u.useState(!1),[C,w]=u.useState(!1),[R,x]=u.useState(!1),j=async d=>{if(n===d.target.value)return v(!1);V.savePage({id:r,name:d.target.value})&&(v(!1),a(o=>o.map(m=>m.id===r?{...m,name:d.target.value}:m)))},y=async d=>{if(i===d.target.value)return N(!1);const t=d.target.value;let o=structuredClone(t);const m=s.using??{model:null,field:null,with:[]};for(const E in G(t))o=o.replace(`{${E}}`,"").replace(`{${E}?}`,""),m[E]=m[E]??{};const b=ue(o,"/");V.savePage({id:r,path:t,pseudo_path:b,using:Object.keys(m).length>0?m:void 0})&&(N(!1),a(E=>E.map(M=>M.id===r?{...M,path:d.target.value}:M)))},P=async d=>{w(!0);const t=d.target.checked,o=V.savePage({id:r,extends_base:t});w(!1),o&&a(m=>m.map(b=>b.id===r?{...b,extends_base:t}:b))},_=async d=>{x(!0);const t=d.target.checked,o=V.savePage({id:r,menuable:t});x(!1),o&&a(m=>m.map(b=>b.id===r?{...b,menuable:t}:b))},D=async d=>{await V.deletePage(d.id)&&(a(o=>o.filter(m=>m.id!=d.id)),$('[data-bs-toggle="tab"]').removeClass("active"),$(".tab-pane").removeClass("active"),$("#base-template-link").addClass("active"),$("#base-template").addClass("active"))},A=G(i);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dropdown float-end",children:[e.jsx("a",{href:"#",className:"dropdown-toggle arrow-none card-drop","data-bs-toggle":"dropdown","aria-expanded":"false",children:e.jsx("i",{className:"mdi mdi-dots-vertical"})}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[e.jsxs("button",{className:"dropdown-item",onClick:()=>f(s),children:[e.jsx("i",{className:"mdi mdi-cloud-search-outline me-1"}),"Editar SEO"]}),A.length>0&&e.jsxs("button",{className:"dropdown-item",onClick:()=>p(s),children:[e.jsx("i",{className:"mdi mdi-code-braces me-1"}),"Parámetros"]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("button",{className:"dropdown-item",onClick:()=>D(s),children:[e.jsx("i",{className:"mdi mdi-trash-can-outline me-1"}),"Eliminar página"]})]})]}),e.jsxs("div",{children:[c?e.jsx("input",{className:"form-control form-control-sm mb-1",defaultValue:n,onBlur:j,autoFocus:!0}):e.jsx(J,{content:"Editar nombre",placement:"left",children:e.jsx("h4",{className:"header-title mb-1 d-block",onClick:()=>v(!0),style:{minWidth:"200px",cursor:"pointer"},children:n||"Sin nombre"})}),g?e.jsx("input",{className:"form-control form-control-sm mb-1",defaultValue:i,style:{minHeight:27,fieldSizing:"content"},onBlur:y,autoFocus:!0}):e.jsx(J,{content:"Editar ruta",placement:"left",children:e.jsx("small",{className:"text-muted d-block mb-1",onClick:()=>N(!0),style:{minWidth:"200px",cursor:"pointer"},children:i||"Sin ruta"})})]}),e.jsxs("div",{className:"row",children:[e.jsx(X,{label:"Extiende de base",col:"col-lg-6 col-md-12 col-sm-6",checked:l,onChange:P,disabled:C}),e.jsx(X,{label:"Mostrar en menu",col:"col-lg-6 col-md-12 col-sm-6",checked:h,onChange:_,disabled:R})]})]})},se=({col:s,label:r,eRef:n,placeholder:i,required:l=!1,rows:h=3,value:a,onChange:f,style:p={}})=>e.jsxs("div",{className:`form-group ${s} mb-2`,children:[e.jsxs("label",{htmlFor:"",children:[r," ",l&&e.jsx("b",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{ref:n,className:"form-control",placeholder:i,required:l,rows:h,defaultValue:a,style:{...p,minHeight:h*27,fieldSizing:"content"},onChange:f})]}),he=new T,fe=({dataLoaded:s,setDataLoaded:r,modalRef:n})=>{const i=u.useRef(null),l=u.useRef(null),h=u.useRef(null),a=async f=>{f.preventDefault(),await he.savePage({id:s.id,description:l.current.value,keywords:$(h.current).val()})&&(r(null),$(n.current).modal("hide"))};return u.useEffect(()=>{i.current.value=`${s==null?void 0:s.name} | ${q.APP_NAME}`,l.current.value=(s==null?void 0:s.description)??"",ce(h.current,(s==null?void 0:s.keywords)??[])},[s]),e.jsx(ee,{modalRef:n,title:`Editar SEO - ${s==null?void 0:s.name}`,size:"sm",onSubmit:a,children:e.jsxs("div",{id:"seo-container",children:[e.jsx(L,{eRef:i,label:"Título",disabled:!0}),e.jsx(se,{eRef:l,label:"Descripción",rows:2}),e.jsx(z,{eRef:h,label:"Palabras clave",tags:!0,multiple:!0,dropdownParent:"#seo-container"})]})})},Z=({className:s,system:r,component:n,onComponentClicked:i,onDeleteClicked:l,onEditDataClicked:h})=>{var p;const a=(n==null?void 0:n.options)??[],f=a.find(c=>c.id==r.value);return e.jsxs("div",{className:`dropdown ${s}`,"data-id":r.id,children:[e.jsxs("div",{className:"btn btn-light dropdown-toggle text-truncate w-100 text-start",type:"button",id:`dd-${r.id}`,"data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",children:[e.jsx("i",{className:"mdi mdi-chevron-down ms-1 float-end"}),e.jsxs("span",{className:"handle-sortable",style:{cursor:"move"},children:[e.jsx("i",{className:"fa fa-ellipsis-v"}),e.jsx("i",{className:"fa fa-ellipsis-v"})]}),e.jsx("span",{className:"ms-1",children:r.name})]}),e.jsxs("div",{className:"dropdown-menu","aria-labelledby":`dd-${r.id}`,"data-popper-placement":"bottom-start",children:[a.length>1&&e.jsxs(e.Fragment,{children:[a.filter(c=>c.id!=r.value).map(c=>e.jsxs("button",{className:"dropdown-item",onClick:()=>i({...r,name:`${n.name} - ${c.name}`,value:c.id}),children:[n.name," - ",c.name]})),e.jsx("div",{className:"dropdown-divider"})]}),(((p=f==null?void 0:f.using)==null?void 0:p.filters)||(f==null?void 0:f.data))&&e.jsxs("button",{className:"dropdown-item",onClick:()=>h(r,f),children:[e.jsx("i",{className:"mdi mdi-pencil me-1"}),"Configurar datos"]}),e.jsxs("button",{className:"dropdown-item",onClick:()=>l(r),children:[e.jsx("i",{className:"mdi mdi-trash-can-outline me-1"}),"Eliminar"]})]})]})},pe=({col:s,label:r,eRef:n,placeholder:i,required:l=!1,rows:h=3,value:a,onChange:f=()=>{}})=>{const[p,c]=u.useState(a),v=u.useRef(),g=u.useRef(null),N=n||v;return u.useEffect(()=>(g.current&&(g.current.toTextArea(),g.current=null),g.current=CodeMirror.fromTextArea(N.current,{mode:"htmlmixed",theme:"sode",indentUnit:2,tabSize:2}),g.current.setValue(a),setTimeout(()=>{g.current.refresh()},125),g.current.on("change",C=>{const w=C.getValue();c(w),f({target:{value:w}})}),()=>{g.current&&(g.current.toTextArea(),g.current=null)}),[N]),u.useEffect(()=>{p!==a&&(c(a),g.current&&(g.current.setValue(a),setTimeout(()=>{g.current.refresh()},125)))},[a]),e.jsxs("div",{className:`form-group ${s} mb-2`,children:[e.jsxs("label",{htmlFor:"",className:"mb-1",children:[r," ",l&&e.jsx("b",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{ref:N,className:"form-control",placeholder:i,required:l,rows:h,defaultValue:a,onChange:C=>c(C.target.value)})]})},xe=new T,be=({dataLoaded:s,setDataLoaded:r,setSystems:n,modalRef:i})=>{var p,c,v,g,N,C,w,R,x,j,y,P,_,D,A;const[l,h]=u.useState((s==null?void 0:s.data)||{}),a={};a.model=u.useRef(null),a.filters=u.useRef(null);const f=async d=>{d.preventDefault();const t=await xe.save({id:s.id,data:l,filters:$(a.filters.current).val()});t&&(r(null),$(i.current).modal("hide"),n(o=>o.map(m=>m.id==s.id?t.data:m)))};return u.useEffect(()=>{var t,o,m;const d={};(t=s==null?void 0:s.component)==null||t.data.forEach(b=>{var k;d[b]=((k=s==null?void 0:s.data)==null?void 0:k[b])??""}),h(d),a.model.current.value=((m=(o=s==null?void 0:s.component)==null?void 0:o.using)==null?void 0:m.model)??"",$(a.filters.current).val((s==null?void 0:s.filters)??[]).trigger("change")},[s]),e.jsxs(ee,{modalRef:i,title:s==null?void 0:s.name,onSubmit:f,size:(c=(p=s==null?void 0:s.component)==null?void 0:p.data)!=null&&c.some(d=>d.startsWith("code:"))?"lg":"md",children:[e.jsxs("ul",{className:"nav nav-tabs nav-bordered",children:[e.jsx("li",{className:"nav-item",hidden:!((g=(v=s==null?void 0:s.component)==null?void 0:v.data)!=null&&g.length),children:e.jsx("a",{href:"#tab-info","data-bs-toggle":"tab","aria-expanded":"true",className:"nav-link active",children:"Información"})}),e.jsx("li",{className:"nav-item",hidden:!((C=(N=s==null?void 0:s.component)==null?void 0:N.using)!=null&&C.filters),children:e.jsx("a",{href:"#tab-db","data-bs-toggle":"tab","aria-expanded":"true",className:"nav-link",children:"Base de datos"})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane active",id:"tab-info",hidden:!((R=(w=s==null?void 0:s.component)==null?void 0:w.data)!=null&&R.length),children:(j=(x=s==null?void 0:s.component)==null?void 0:x.data)==null?void 0:j.map((d,t)=>d.startsWith("code:")?e.jsx(pe,{label:d.replace("code:",""),value:l[d]??"",rows:1,onChange:o=>h({...l,[d]:o.target.value})},t):e.jsx(se,{label:d,value:l[d]??"",rows:1,onChange:o=>h({...l,[d]:o.target.value})},t))}),e.jsxs("div",{className:"tab-pane show",id:"tab-db",children:[e.jsx(L,{eRef:a.model,label:"Modelo",disabled:!0}),e.jsx(z,{eRef:a.filters,label:"Filtros",multiple:!0,dropdownParent:"#tab-db",hidden:!((P=(y=s==null?void 0:s.component)==null?void 0:y.using)!=null&&P.filters),children:(A=(D=(_=s==null?void 0:s.component)==null?void 0:_.using)==null?void 0:D.filters)==null?void 0:A.map((d,t)=>e.jsx("option",{value:d,children:d},t))})]})]})]})},Q=new T,ge=({components:s,onClick:r})=>e.jsx("div",{className:"left-side-menu top-0 pt-2",children:e.jsxs("div",{"data-simplebar":!0,className:"h-100",children:[e.jsx("div",{id:"sidebar-menu",className:"show",children:e.jsxs("ul",{id:"side-menu",children:[e.jsx("li",{className:"menu-title",children:"Lista de componentes"}),s.filter(n=>n.options.length>0).map((n,i)=>e.jsx(oe,{title:n.name,children:n.options.map((l,h)=>e.jsx(K,{name:l.name,icon:l.image,onClick:()=>{const a=$(".tab-pane:visible .components-container > div").last().data("id");r({name:`${n.name} - ${l.name}`,component:n.id,value:l.id,after_component:a})},children:l.name},h))},i)),e.jsx("li",{className:"menu-title",children:"Sistema de respaldo"}),e.jsx(K,{icon:"mdi mdi-cloud-download",onClick:async()=>{const n=await Q.exportBK(),i=new Blob([JSON.stringify(n)],{type:"application/json"}),l=URL.createObjectURL(i),h=document.createElement("a");h.href=l,h.download="backup.json",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(l)},children:"Exportar Backup"}),e.jsx("input",{type:"file",id:"file-input",accept:"application/json",style:{display:"none"},onChange:async n=>{const i=n.target.files[0];if(n.target.value=null,i){const l=new FormData;if(l.append("backup",i),!await Q.importBK(l))return;location.reload()}}}),e.jsx(K,{icon:"mdi mdi-backup-restore",onClick:()=>{document.getElementById("file-input").click()},children:"Importar Backup"})]})}),e.jsx("div",{className:"clearfix"})]})}),je=({page:s,param:r,models:n,setUsing:i,setPages:l})=>{var C,w,R;const h=u.useRef(),a=u.useRef(),f=u.useRef(),p=s==null?void 0:s.using,[c,v]=u.useState(null),g=x=>{const j=h.current.value,y=n.find(P=>P.name==j)??null;v(y)};u.useEffect(()=>{var x;$(h.current).val((x=p==null?void 0:p[r])==null?void 0:x.model).trigger("change")},[r]),u.useEffect(()=>{var x,j;i(y=>({...y,[r]:{...y[r],model:(c==null?void 0:c.name)??null}})),$(a.current).val(((x=p==null?void 0:p[r])==null?void 0:x.field)??null).trigger("change"),$(f.current).val(((j=p==null?void 0:p[r])==null?void 0:j.relations)??[]).trigger("change")},[c]);const N=`${r}-container`;return e.jsxs("div",{id:N,className:"row",children:[e.jsxs("label",{className:"form-label",children:["Parámetro ",e.jsx("code",{children:r})]}),e.jsx(z,{eRef:h,label:"Modelo",col:"col-md-6",dropdownParent:`#${N}`,onChange:g,children:n.map((x,j)=>e.jsx("option",{value:x.name,children:x.name},j))}),e.jsx(z,{eRef:a,label:"Campo",col:"col-md-6",dropdownParent:`#${N}`,onChange:x=>{i(j=>({...j,[r]:{...j[r],field:x.target.value}}))},children:(C=c==null?void 0:c.fields)==null?void 0:C.map((x,j)=>e.jsx("option",{children:x},j))}),e.jsx("div",{hidden:(((w=c==null?void 0:c.relations)==null?void 0:w.length)??0)==0,children:e.jsx(z,{eRef:f,label:"Relaciones",multiple:!0,dropdownParent:`#${N}`,onChange:x=>{const j=$(x.target).val();i(y=>({...y,[r]:{...y[r],relations:j}}))},children:(R=c==null?void 0:c.relations)==null?void 0:R.map((x,j)=>e.jsx("option",{children:x},j))})})]})},ve=new T,Ne=({dataLoaded:s,setDataLoaded:r,setPages:n,modalRef:i,models:l})=>{const h=G((s==null?void 0:s.path)??""),[a,f]=u.useState({}),p=async c=>{c.preventDefault();const v=await ve.savePage({id:s.id,using:a});v&&(r(null),n(v),$(i.current).modal("hide"))};return u.useEffect(()=>{f((s==null?void 0:s.using)??{})},[s]),e.jsx(me,{modalRef:i,title:`Editar parámetros de URL - ${s==null?void 0:s.name}`,onSubmit:p,onClose:()=>r(null),children:h.map((c,v)=>e.jsx(je,{page:s,param:c,models:l,using:a,setUsing:f,setPages:n},v))})},W=new T,we=({systems:s,pages:r,components:n,models:i})=>{const l=u.useRef(null),h=u.useRef(null),a=u.useRef(null),[f,p]=u.useState(s),[c,v]=u.useState(r),[g,N]=u.useState(!1),[C,w]=u.useState(null),[R,x]=u.useState(null),j=async()=>{N(!0);const t=await W.savePage();t&&(N(!1),v(t))},y=async t=>{const m=$(".tab-pane:visible").data("id")??null;t.page_id=m;const b=await W.save(t);if(!b)return;const k=b.data;p(E=>E.some(O=>O.id===k.id)?E.map(O=>O.id===k.id?k:O):[...E,k])},P=async t=>{await W.delete(t.id)&&p(m=>m.filter(b=>b.id!=t.id))};u.useEffect(()=>{document.title=`Sistema | ${q.APP_NAME}`},[null]),u.useEffect(()=>{const t=$("iframe:visible");t&&($(t).removeAttr("src"),$(t).attr("src",t.data("path")))},[f,c]);const _=t=>{const o=$(t.target).data("page-id"),m=$(t.target).data("page-path"),b=$(t.target).val();$(`#iframe-${o}`).removeAttr("src"),$(`#iframe-${o}`).attr("src",`${m}/${b}`)},D=async t=>{w(t),$(l.current).modal("show")},A=async t=>{w(t),$(h.current).modal("show")},d=async(t,o)=>{x({...t,component:o}),$(a.current).modal("show")};return u.useEffect(()=>{[...$(".components-container")].forEach(o=>{$(o).sortable({connectWith:".components-container",handle:".handle-sortable",forcePlaceholderSize:!0,update:async function(m,b){const k=[...$(o).children()],E={};if(k.forEach(M=>{const O=$(M).data("id"),F=$(M).prev().data("id")??null,I=f.find(U=>U.id==O);(I==null?void 0:I.after_component)!==F&&(E[O]=F)}),Object.keys(E).length>0){if(!await W.updateOrder(E))return;p(O=>{const F=[...O];return Object.entries(E).forEach(([I,U])=>{const H=F.findIndex(te=>te.id==I);H!==-1&&(F[H]={...F[H],after_component:U})}),F})}}}).disableSelection()})},[c,f]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"wrapper",children:[e.jsx(ge,{components:n,onClick:y}),e.jsx("div",{className:"content-page mt-2 pb-3",style:{height:"max-content"},children:e.jsx("div",{className:"content mt-2",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("button",{className:"button-menu-mobile d-lg-none d-md-block position-absolute ",style:{zIndex:1,border:"none",borderRadius:"0 50% 50% 0",backgroundColor:"#fff",color:"#343a40",top:"50%",left:"0",transform:"translateY(-50%)",padding:"24px 0px 20px 6px ",fontWeight:"bold"},children:"〉"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card mb-0",children:e.jsxs("div",{className:"card-body",style:{height:"calc(100vh - 48px)"},children:[e.jsxs("ul",{className:"nav nav-tabs nav-bordered flex-nowrap",style:{overflowX:"auto",overflowY:"hidden"},children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{id:"base-template-link",href:"#base-template","data-bs-toggle":"tab","aria-expanded":"false",className:"nav-link active h-100",children:"Base"})}),c.map((t,o)=>e.jsx("li",{className:"nav-item",children:e.jsxs("a",{href:`#page-${t.id}`,"data-bs-toggle":"tab","aria-expanded":"false",className:"nav-link h-100",style:{whiteSpace:"nowrap"},children:[t.name,e.jsx("small",{className:"d-block text-muted",style:{fontWeight:"normal"},children:t.path})]})},o)),e.jsx("li",{className:"nav-item d-flex justify-content-center align-items-center px-2",children:e.jsx(J,{content:"Agregar página",children:e.jsx("button",{className:"nav-link btn btn-xs btn-white rounded-pill",onClick:j,disabled:g,children:g?e.jsx("i",{className:"mdi mdi-loading mdi-spin"}):e.jsx("i",{className:"mdi mdi-plus"})})})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane active",id:"base-template",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"d-flex flex-column gap-2 components-container","data-page-id":null,children:Y(f).filter(t=>t.page_id==null).map(t=>{const o=n.find(m=>m.id==t.component);if(o==null||o.options,t.component=="content")return e.jsxs("button",{"data-id":t.id,className:"btn btn-light text-truncate w-100 text-start",type:"button",children:[e.jsx("i",{className:"fa fa-ellipsis-v"}),e.jsx("i",{className:"fa fa-ellipsis-v"}),e.jsx("span",{className:"ms-1",children:t.name})]});{const m=n.find(b=>b.id==t.component);return e.jsx(Z,{className:"",system:t,component:m,onComponentClicked:y,onDeleteClicked:P,onEditDataClicked:d},t.id)}})})}),e.jsx("div",{className:"col-md-8",children:e.jsx("iframe",{src:"/base-template","data-path":"/base-template",className:"w-100 h-100 border",style:{minHeight:"calc(100vh - 185px)",borderRadius:"4px"}})})]})}),c.map((t,o)=>e.jsx("div",{className:"tab-pane",id:`page-${t.id}`,"data-id":t.id,children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx(de,{...t,models:i,setPages:v,onSEOClicked:D,onParamsClicked:A}),e.jsx("hr",{className:"my-2"}),e.jsx("div",{className:"d-flex flex-column gap-2 components-container","data-page-id":t.id,children:Y(f).filter(m=>m.page_id==t.id).map(m=>{const b=n.find(k=>k.id==m.component);return e.jsx(Z,{className:"",system:m,component:b,onComponentClicked:y,onDeleteClicked:P,onEditDataClicked:d},m.id)})})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"input-group mb-2",children:[e.jsxs("span",{className:"input-group-text",children:[(t==null?void 0:t.pseudo_path)||t.path,G(t==null?void 0:t.path).length>0&&"/"]}),G(t==null?void 0:t.path).length>0&&e.jsx("input",{type:"text",className:"form-control",placeholder:"Parametros","data-page-path":t.pseudo_path,"data-page-id":t.id,onChange:_})]}),e.jsx("iframe",{id:`iframe-${t.id}`,src:(t==null?void 0:t.pseudo_path)||t.path,"data-path":(t==null?void 0:t.pseudo_path)||t.path,className:"w-100 h-100 border",style:{minHeight:"calc(100vh - 185px)",borderRadius:"4px"}})]})]})},o))]})]})})})})]})})})]}),e.jsx(fe,{dataLoaded:C,setDataLoaded:w,modalRef:l}),e.jsx(Ne,{dataLoaded:C,setDataLoaded:w,setPages:v,modalRef:h,models:i}),e.jsx(be,{dataLoaded:R,setDataLoaded:x,setSystems:p,modalRef:a})]})};le((s,r)=>{ie(s).render(e.jsx(we,{...r}))});
