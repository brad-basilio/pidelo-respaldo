import{j as e}from"./AboutHeader-COUW3Uy_.js";import{r as c}from"./index-CqkZ-sT_.js";import{C as K}from"./CardHoverBtn-Cj0wlK4s.js";import{I as O}from"./ItemsRest-pOcl9MCH.js";import{N as q}from"./NoResult-CKKmsI7-.js";import{S as D}from"./SelectForm-B3_ZzKEz.js";import{F as U}from"./filter-CawzT8aa.js";import{C as g}from"./chevron-down-CxOx8ByU.js";import{S as N}from"./search-DhoFIDMi.js";import"./ProductCard-DppMoL6U.js";import"./main-MmatxeHN.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";import"./ModalImportItem-DkUpH6sg.js";import"./HeaderSearch-BHrRgLch.js";import"./index-BdiKzPHY.js";import"./index-VLFqsz8m.js";import"./index-D7Vukm9p.js";import"./CartItemRow-DWjf7t3V.js";import"./tippy-react.esm-HYwDmlWP.js";import"./Number2Currency-e57Tgsuk.js";import"./check-CvqheCNB.js";import"./createLucideIcon-D0vxYqnu.js";const z=new O,G=()=>e.jsx("div",{className:"group  animate-pulse  transition-transform duration-300 hover:scale-105 w-1/2 lg:w-1/4 flex-shrink-0 font-font-general customtext-primary cursor-pointer",children:e.jsx("div",{className:" px-4",children:e.jsx("div",{className:"bg-white rounded-3xl",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center  bg-secondary",children:e.jsx("svg",{class:"w-10 h-10 text-gray-200 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:e.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),ge=({items:v,data:p,filteredData:C,cart:_,setCart:S})=>{const{categories:h,brands:k,priceRanges:P}=C,[o,F]=c.useState({marca:!0,precio:!0,categoria:!0,colores:!1}),[l,m]=c.useState({category_id:[],brand_id:[],subcategory_id:[],price:null,name:null,sort_by:"created_at",order:"desc"}),[d,A]=c.useState([]),[B,b]=c.useState(!1),[J,M]=c.useState({currentPage:1,totalPages:1}),$=s=>{const a=[];if(s.category_id.length>0){const r=s.category_id.map(t=>["category_id","=",t]);a.push(["or",...r])}if(s.subcategory_id.length>0){const r=s.subcategory_id.map(t=>["subcategory_id","=",t]);a.push(["and",...r])}if(s.brand_id.length>0){const r=s.brand_id.map(t=>["brand_id","=",t]);a.push(["or",...r])}return s.price&&a.push(["and",[["final_price",">=",s.price.min],"and",["final_price","<=",s.price.max]]]),s.name&&a.push(["name","contains",s.name]),a},E=async(s=1)=>{b(!0);try{const r={filter:$(l),sort:l.sort,take:1e3},t=await z.paginate(r);A(t.data),M({currentPage:t.currentPage,totalPages:t.lastPage})}catch(a){console.error("Error fetching products:",a)}finally{b(!1)}};c.useEffect(()=>{E()},[l]),c.useEffect(()=>{const s=new URLSearchParams(window.location.search),a=s.get("category"),r=s.get("subcategory");if(a){const i=h.find(n=>n.slug===a);i&&m(n=>({...n,category_id:[i.id]}))}if(r){let i=null,n=null;h.forEach(x=>{const w=x.subcategories.find(I=>I.slug===r);w&&(i=w,n=x)}),i&&n&&m(x=>({...x,category_id:[n.id],subcategory_id:[i.id]}))}const t=s.get("search");t&&m(i=>({...i,name:t}))},[v]);const u=(s,a)=>{m(r=>{if(s==="price")return{...r,price:r.price&&r.price.min===a.min&&r.price.max===a.max?null:a};const t=Array.isArray(r[s])?r[s]:[],i=t.includes(a)?t.filter(n=>n!==a):[...t,a];return{...r,[s]:i}})},f=s=>{F(a=>({...a,[s]:!a[s]}))},L=[{value:"created_at:desc",label:"Más reciente"},{value:"created_at:asc",label:"Mas antiguo"},{value:"final_price:asc",label:"Precio: Menor a Mayor"},{value:"final_price:desc",label:"Precio: Mayor a Menor"},{value:"name:asc",label:"Nombre: A-Z"},{value:"name:desc",label:"Nombre: Z-A"}],[j,R]=c.useState(""),[y,Z]=c.useState(""),H=h.filter(s=>s.name.toLowerCase().includes(j.toLowerCase())),V=k.filter(s=>s.name.toLowerCase().includes(y.toLowerCase()));return e.jsx("section",{className:"py-12 bg-[#F7F9FB]",children:e.jsxs("div",{className:"mx-auto px-primary 2xl:px-0 2xl:max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center mb-8 pb-4 border-b-2",children:[e.jsx("h2",{className:"text-[32px] md:text-4xl font-bold md:w-6/12",children:p==null?void 0:p.title}),e.jsxs("div",{className:"flex items-center gap-4 md:w-5/12",children:[e.jsxs("span",{className:"block w-6/12",children:["Productos seleccionados:"," ",e.jsx("strong",{children:d==null?void 0:d.length})]}),e.jsx("div",{className:"w-6/12",children:e.jsx(D,{options:L,placeholder:"Ordenar por",onChange:s=>{const[a,r]=s.split(":"),t=[{selector:a,desc:r==="desc"}];m(i=>({...i,sort:t}))},labelKey:"label",valueKey:"value"})})]})]}),e.jsxs("div",{className:"relative flex gap-4",children:[e.jsxs("div",{className:"hidden md:block md:w-3/12 bg-white p-4 rounded-lg h-max",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),e.jsx(U,{className:"h-5 w-5"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>f("marca"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Marca"}),e.jsx(g,{className:`h-5 w-5 transform transition-transform ${o.marca?"":"-rotate-180"}`})]}),o.marca&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:y,onChange:s=>Z(s.target.value)})]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:V.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>u("brand_id",s.id)}),e.jsx("span",{children:s.name})]},s.id))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>f("precio"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(g,{className:`h-5 w-5 transform transition-transform ${o.precio?"":"-rotate-180"}`})]}),o.precio&&e.jsx("div",{className:"space-y-3",children:P.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300",onChange:()=>u("price",s),checked:l.price&&l.price.min===s.min&&l.price.max===s.max}),e.jsx("span",{children:`S/ ${s.min} - S/ ${s.max}`})]},`${s.min}-${s.max}`))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>f("categoria"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Categoría"}),e.jsx(g,{className:`h-5 w-5 transform transition-transform ${o.categoria?"":"-rotate-180"}`})]}),o.categoria&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:j,onChange:s=>R(s.target.value)})]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:H.map(s=>{var a,r,t;return e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>u("category_id",s.id),checked:(a=l.category_id)==null?void 0:a.includes(s.id)}),e.jsx("span",{children:s.name})]}),((r=l.category_id)==null?void 0:r.includes(s.id))&&((t=s.subcategories)==null?void 0:t.length)>0&&e.jsx("ul",{className:"ml-6 mt-2 space-y-2",children:s.subcategories.map(i=>{var n;return e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>u("subcategory_id",i.id),checked:(n=l.subcategory_id)==null?void 0:n.includes(i.id)}),e.jsx("span",{children:i.name})]},i.id)})})]},s.id)})})]})]}),e.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl hover:brightness-90 transition-colors text-sm font-bold",children:"Aplicar Filtro"})]}),e.jsx("div",{className:"w-full md:w-9/12 py-4",children:B?e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>e.jsx(G,{},s))}):e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(d)&&d.length>0?d.map(s=>e.jsx("div",{className:"   w-1/2 lg:w-1/3 xl:w-1/4",children:e.jsx(K,{product:s,widthClass:"w-full sm:w-full lg:w-full",cart:_,setCart:S})},s.id)):e.jsx(q,{})})})]})]})})};export{ge as default};
