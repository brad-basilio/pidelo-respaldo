var I=Object.defineProperty;var N=(a,i,c)=>i in a?I(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c;var j=(a,i,c)=>(N(a,typeof i!="symbol"?i+"":i,c),c);import{j as t}from"./AboutHeader-Bdo2C3ON.js";import{r as l}from"./index-DFv2mRv-.js";import{c as y}from"./ReactAppend-CwiwA4iz.js";import{B as G}from"./Base-DW8RBcaH.js";import{C as S}from"./CreateReactScript-D-eDfVKV.js";import{T as _}from"./Table-CuWBkF0z.js";import{M as C}from"./Modal-C9s5p_Ex.js";import{I as F}from"./InputFormGroup-Di7UVG_e.js";import{R as w,D as M}from"./ReactAppend-CASuQb7V.js";import{T as k}from"./TextareaFormGroup-Bau8EUyr.js";import{I as T}from"./ImageFormGroup-CE4HITZ8.js";import{B as A}from"./BasicEditing-Ce9hwHaI.js";import{r as P}from"./DxBox-PA__dqjs.js";import"./index-DgyC5pTR.js";import"./Global-mC9lKANG.js";import"./tippy-react.esm-BVvHiWwH.js";/* empty css              */import"./main-BBbUrZUL.js";import"./___vite-browser-external_commonjs-proxy-BQdpDcDf.js";import"./MenuItemContainer-xrd2f-pb.js";import"./index.esm-B502ZfUP.js";/* empty css               */class L extends A{constructor(){super(...arguments);j(this,"path","admin/banners");j(this,"hasFiles",!0)}}const B=new L,q=({pages:a})=>{const i=l.useRef(),c=l.useRef(),p=l.useRef(),f=l.useRef(),x=l.useRef(),d=l.useRef(),u=l.useRef(),g=l.useRef(),R=l.useRef(),[D,v]=l.useState(!1),E=e=>{var s,o,r,n,h,m;e!=null&&e.id?v(!0):v(!1),p.current.value=(e==null?void 0:e.id)??"",f.current.value=((s=e==null?void 0:e.data)==null?void 0:s.name)??"",x.current.value=((o=e==null?void 0:e.data)==null?void 0:o.description)??"",d.current.value=null,d.image.src=`/api/banners/media/${(r=e==null?void 0:e.data)==null?void 0:r.background}`,u.current.value=null,u.image.src=`/api/banners/media/${(n=e==null?void 0:e.data)==null?void 0:n.image}`,g.current.value=((h=e==null?void 0:e.data)==null?void 0:h.button_text)??"",R.current.value=((m=e==null?void 0:e.data)==null?void 0:m.button_link)??"",$(c.current).modal("show")},b=async e=>{e.preventDefault();const s={id:p.current.value||void 0,name:f.current.value,description:x.current.value,button_text:g.current.value,button_link:R.current.value},o=new FormData;for(const m in s)o.append(m,s[m]);const r=d.current.files[0];r&&o.append("background",r);const n=u.current.files[0];n&&o.append("image",n),await B.save(o)&&($(i.current).dxDataGrid("instance").refresh(),$(c.current).modal("hide"))};return t.jsxs(t.Fragment,{children:[t.jsx(_,{gridRef:i,title:"Banners",rest:B,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",cellTemplate:(e,{data:s})=>{const o=a.find(r=>r.id==s.page_id);e.html(P(t.jsxs(t.Fragment,{children:[t.jsx("b",{className:"d-block",children:s.name}),t.jsxs("small",{className:"text-muted",children:["Pagina: ",o.name]})]})))}},{dataField:"after.name",caption:"Despues de"},{dataField:"background",caption:"Fondo",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:s})=>{var o;w(e,t.jsx("img",{src:`/api/banners/media/${(o=s==null?void 0:s.data)==null?void 0:o.background}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:r=>r.target.src="/api/cover/thumbnail/null"}))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(e,{data:s})=>{var o;w(e,t.jsx("img",{src:`/api/banners/media/${(o=s==null?void 0:s.data)==null?void 0:o.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:r=>r.target.src="/api/cover/thumbnail/null"}))}},{caption:"Acciones",cellTemplate:(e,{data:s})=>{e.css("text-overflow","unset"),e.append(M({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>E(s)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsxs(C,{modalRef:c,title:D?"Editar banner":"Agregar banner",onSubmit:b,size:"md",children:[t.jsx("input",{ref:p,type:"hidden"}),t.jsx(T,{eRef:d,label:"Fondo"}),t.jsxs("div",{className:"row",children:[t.jsx("div",{className:"col-sm-6",children:t.jsx(T,{eRef:u,label:"Imagen",aspect:1})}),t.jsxs("div",{className:"col-sm-6",children:[t.jsx(k,{eRef:f,label:"Titulo",rows:2}),t.jsx(k,{eRef:x,label:"Descripción",rows:2}),t.jsx(F,{eRef:g,label:"Texto botón"})]})]}),t.jsx(F,{eRef:R,label:"URL botón"})]})]})};S((a,i)=>{y(a).render(t.jsx(G,{...i,title:"Banners",children:t.jsx(q,{...i})}))});
