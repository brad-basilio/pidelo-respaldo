import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as v}from"./index-BH53Isel.js";import{D as Ze,H as Ke,E as Ue,a as Qe,I as pe,T as he,F as Ye,b as _e,U as es,R as ss,S as A,C as Le,c as ts,d as as,e as is,f as Te,g as Oe,Z as Xe,h as rs,i as ls,u as ns,j as We,k as os,l as cs,m as qe,n as Je}from"./index-DaTkk6Oy.js";import{h as ds,F as us}from"./EditorLayout-BnWGqD7B.js";import{C as gs}from"./chevron-left-B2s3ZsB7.js";import{T as re}from"./trash-2-DK1wnsDn.js";import{P as ms}from"./plus-Bot15Khs.js";import{H as xs}from"./heart-ChuvJi-4.js";import{U as fs}from"./upload-qgEr5bIl.js";import"./index-yBjzXJbu.js";import"./createLucideIcon-Cy5Ya80P.js";import"./index-BSWw-p5k.js";const xe=[{id:"layout-1",name:"Cuatro fotos",template:"grid-cols-2 grid-rows-2 gap-4",cells:4,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square","rounded-sm","rounded-lg","rounded-full","rounded-rect"]},{name:"Formas",masks:["heart","star","hexagon","triangle","diamond","badge","speech","burst"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave","diagonal","bevel","poster","inner-frame"]},{name:"Creativas",masks:["leaf","cloud","flower","ornate","blob1","blob2","blob3"]}]},{id:"layout-2",name:"Dos fotos horizontales",template:"grid-rows-2",cells:2,maskCategories:[{name:"Básicas",masks:["none","circle","rounded","square"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-3",name:"Tres fotos mixtas",template:"grid-cols-3 [grid-template-columns:1fr_2fr]",cells:3,maskCategories:[{name:"Formas",masks:["heart","star","hexagon","triangle"]},{name:"Fotográficos",masks:["polaroid","vintage","frame","wave"]}]},{id:"layout-4",name:"Collage 2x2",template:"grid-cols-2 grid-rows-2",cells:4,maskCategories:[{name:"Básicas",masks:["none","circle","rounded"]},{name:"Formas",masks:["heart","star","hexagon"]}]},{id:"layout-5",name:"Mosaico",template:"grid-cols-3 grid-rows-2",cells:6,maskCategories:[{name:"Básicas",masks:["none","circle","square"]},{name:"Creativas",masks:["leaf","cloud","flower"]}]}],fe=[{id:"none",name:"Sin máscara",class:"",category:"Básicas",icon:e.jsx(A,{className:"h-4 w-4"})},{id:"circle",name:"Círculo",class:"rounded-full",category:"Básicas",icon:e.jsx(Le,{className:"h-4 w-4"})},{id:"rounded",name:"Redondeado",class:"rounded-xl",category:"Básicas",icon:e.jsx(A,{className:"h-4 w-4 rounded-md"})},{id:"square",name:"Cuadrado",class:"",category:"Básicas",icon:e.jsx(A,{className:"h-4 w-4"})},{id:"heart",name:"Corazón",class:"mask-heart",category:"Formas",icon:e.jsx(xs,{className:"h-4 w-4"})},{id:"star",name:"Estrella",class:"mask-star-2",category:"Formas",icon:e.jsx(ts,{className:"h-4 w-4"})},{id:"hexagon",name:"Hexágono",class:"mask-hexagon",category:"Formas",icon:e.jsx(as,{className:"h-4 w-4"})},{id:"triangle",name:"Triángulo",class:"mask-triangle",category:"Formas",icon:e.jsx("div",{className:"w-4 h-4 bg-current clip-triangle"})},{id:"diamond",name:"Diamante",class:"mask-diamond",category:"Formas",icon:e.jsx(is,{className:"h-4 w-4"})},{id:"polaroid",name:"Polaroid",class:"mask-polaroid",category:"Fotográficos",icon:e.jsx(Te,{className:"h-4 w-4"})},{id:"vintage",name:"Vintage",class:"mask-vintage",category:"Fotográficos",icon:e.jsx(Oe,{className:"h-4 w-4"})},{id:"wave",name:"Onda",class:"mask-wave",category:"Fotográficos",icon:e.jsx(Xe,{className:"h-4 w-4"})},{id:"diagonal",name:"Diagonal",class:"mask-diagonal",category:"Fotográficos",icon:e.jsx("div",{className:"w-4 h-4 bg-current clip-diagonal"})},{id:"frame",name:"Marco",class:"mask-frame",category:"Fotográficos",icon:e.jsx(A,{className:"h-4 w-4"})},{id:"leaf",name:"Hoja",class:"mask-leaf",category:"Creativas",icon:e.jsx(Oe,{className:"h-4 w-4"})},{id:"cloud",name:"Nube",class:"mask-cloud",category:"Creativas",icon:e.jsx(rs,{className:"h-4 w-4"})},{id:"flower",name:"Flor",class:"mask-flower",category:"Creativas",icon:e.jsx(ls,{className:"h-4 w-4"})},{id:"ornate",name:"Ornamento",class:"mask-ornate",category:"Creativas",icon:e.jsx("div",{className:"w-4 h-4 bg-current clip-ornate"})},{id:"blob1",name:"Mancha 1",class:"mask-blob1",category:"Creativas",icon:e.jsx("div",{className:"w-4 h-4 bg-current rounded-full"})},{id:"blob2",name:"Mancha 2",class:"mask-blob2",category:"Creativas",icon:e.jsx("div",{className:"w-4 h-4 bg-current rounded-full"})},{id:"blob3",name:"Mancha 3",class:"mask-blob3",category:"Creativas",icon:e.jsx("div",{className:"w-4 h-4 bg-current rounded-full"})},{id:"rounded-sm",name:"Redondeado pequeño",class:"rounded-md",category:"Básicas",icon:e.jsx(A,{className:"h-4 w-4 rounded-sm"})},{id:"rounded-lg",name:"Redondeado grande",class:"rounded-2xl",category:"Básicas",icon:e.jsx(A,{className:"h-4 w-4 rounded-lg"})},{id:"rounded-full",name:"Círculo perfecto",class:"rounded-full",category:"Básicas",icon:e.jsx(Le,{className:"h-4 w-4"})},{id:"bevel",name:"Biselado",class:"mask-bevel",category:"Fotográficos",icon:e.jsx(A,{className:"h-4 w-4"})},{id:"poster",name:"Poster",class:"mask-poster",category:"Fotográficos",icon:e.jsx(Te,{className:"h-4 w-4"})},{id:"badge",name:"Insignia",class:"mask-badge",category:"Formas",icon:e.jsx("div",{className:"w-4 h-4 bg-current clip-badge"})},{id:"speech",name:"Globo de texto",class:"mask-speech",category:"Formas",icon:e.jsx("div",{className:"w-4 h-4 bg-current clip-speech"})},{id:"burst",name:"Estallido",class:"mask-burst",category:"Formas",icon:e.jsx(Xe,{className:"h-4 w-4"})},{id:"rounded-rect",name:"Rectángulo redondeado",class:"mask-rounded-rect",category:"Básicas",icon:e.jsx(A,{className:"h-4 w-4 rounded-md"})},{id:"inner-frame",name:"Marco interno",class:"mask-inner-frame",category:"Fotográficos",icon:e.jsx(A,{className:"h-4 w-4"})}],ps=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],hs=[{name:"Normal",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:90,contrast:110,saturation:80,tint:20,hue:10,blur:1}},{name:"Blanco y negro",filters:{brightness:100,contrast:120,saturation:0,tint:0,hue:0,blur:0}},{name:"Brillante",filters:{brightness:120,contrast:90,saturation:120,tint:0,hue:0,blur:0}},{name:"Oscuro",filters:{brightness:80,contrast:120,saturation:90,tint:10,hue:0,blur:1}},{name:"Sepia",filters:{brightness:90,contrast:100,saturation:50,tint:80,hue:0,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:100,saturation:110,tint:15,hue:20,blur:0}},{name:"Frío",filters:{brightness:100,contrast:100,saturation:110,tint:0,hue:200,blur:0}}],k=({children:t,onClick:h,className:r="",variant:x="default",size:c="default",disabled:b=!1,icon:i=null})=>{const u="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",w={default:"bg-purple-600 text-white hover:bg-purple-700",outline:"border border-input hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},M={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return e.jsxs("button",{className:`${u} ${w[x]} ${M[c]} ${r} gap-2`,onClick:h,disabled:b,children:[i&&e.jsx("span",{className:"w-4 h-4",children:i}),t]})},L=({value:t=[50],min:h=0,max:r=100,step:x=1,onValueChange:c,label:b,unit:i="%"})=>{const[u,w]=v.useState(t[0]),M=$=>{const m=Number.parseInt($.target.value);w(m),c&&c([m])};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:b}),e.jsxs("span",{className:"text-sm text-gray-500",children:[u,i]})]}),e.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:e.jsx("input",{type:"range",min:h,max:r,step:x,value:u,onChange:M,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"})})]})},ys=({id:t,elements:h=[],selectedElement:r,onSelectElement:x,onAddElement:c,onUpdateElement:b,onDeleteElement:i,availableMasks:u=[]})=>{const[{isOver:w},M]=ns(()=>({accept:["IMAGE_FILE","TEXT_ELEMENT","IMAGE_ELEMENT"],drop:m=>{if(m.files){const N=new FileReader;N.onload=D=>{var j;if((j=D.target)!=null&&j.result){const F={id:`img-${Date.now()}`,type:"image",content:D.target.result,position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};c(F)}},N.readAsDataURL(m.files[0])}},collect:m=>({isOver:!!m.isOver({shallow:!0})})})),$=()=>{const m=document.createElement("input");m.type="file",m.accept="image/*",m.onchange=N=>{if(N.target.files&&N.target.files[0]){const D=new FileReader;D.onload=j=>{var F;if((F=j.target)!=null&&F.result){const R={id:`img-${Date.now()}`,type:"image",content:j.target.result,position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"};c(R)}},D.readAsDataURL(N.target.files[0])}},m.click()};return e.jsx("div",{ref:M,className:`relative aspect-square bg-gray-50 rounded-lg overflow-hidden ${w?"ring-2 ring-purple-500 bg-purple-50":""}`,onClick:()=>x(null),children:h.length===0?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 cursor-pointer hover:bg-gray-100 transition-colors",onClick:$,children:[e.jsx(fs,{className:"h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Haz clic o arrastra una imagen"})]}):h.map(m=>e.jsx("div",{className:"absolute inset-0",children:m.type==="image"?e.jsx(bs,{element:m,isSelected:r===m.id,onSelect:()=>x(m.id),onUpdate:N=>b(m.id,N),onDelete:()=>i(m.id),availableMasks:u}):e.jsx(vs,{element:m,isSelected:r===m.id,onSelect:()=>x(m.id),onUpdate:N=>b(m.id,N),onDelete:()=>i(m.id)})},m.id))})},bs=({element:t,isSelected:h,onSelect:r,onUpdate:x,onDelete:c,availableMasks:b=[]})=>{var C,se,te,ae,ie,W,T,q,O,X,Y,_;const[{isDragging:i},u]=We(()=>({type:"IMAGE_ELEMENT",item:{id:t.id},collect:d=>({isDragging:!!d.isDragging()})})),w=v.useRef(null),[M,$]=v.useState(!1),[m,N]=v.useState({x:0,y:0}),[D,j]=v.useState(!1),[F,R]=v.useState({x:0,y:0}),U={filter:`
      brightness(${(((C=t.filters)==null?void 0:C.brightness)||100)/100})
      contrast(${(((se=t.filters)==null?void 0:se.contrast)||100)/100})
      saturate(${(((te=t.filters)==null?void 0:te.saturation)||100)/100})
      sepia(${(((ae=t.filters)==null?void 0:ae.tint)||0)/100})
      hue-rotate(${(((ie=t.filters)==null?void 0:ie.hue)||0)*3.6}deg)
      blur(${((W=t.filters)==null?void 0:W.blur)||0}px)
    `,transform:`scale(${((T=t.filters)==null?void 0:T.scale)||1}) rotate(${((q=t.filters)==null?void 0:q.rotate)||0}deg) ${(O=t.filters)!=null&&O.flipHorizontal?"scaleX(-1)":""} ${(X=t.filters)!=null&&X.flipVertical?"scaleY(-1)":""}`,mixBlendMode:((Y=t.filters)==null?void 0:Y.blendMode)||"normal",opacity:(((_=t.filters)==null?void 0:_.opacity)||100)/100},I=fe.find(d=>d.id===t.mask)||fe[0],y=d=>{h&&(d.stopPropagation(),$(!0),N({x:d.clientX-t.position.x,y:d.clientY-t.position.y}))},E=d=>{if(M&&w.current){const S=w.current.parentElement.getBoundingClientRect(),V=d.clientX-m.x,H=d.clientY-m.y,B=S.width-w.current.offsetWidth,J=S.height-w.current.offsetHeight,G=Math.max(0,Math.min(V,B)),Z=Math.max(0,Math.min(H,J));x({position:{x:G,y:Z}})}},Q=()=>{$(!1)};v.useEffect(()=>(M&&(window.addEventListener("mousemove",E),window.addEventListener("mouseup",Q)),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",Q)}),[M,m]);const le=v.useCallback(d=>{w.current=d,u(d)},[u]),ne=d=>{d.preventDefault(),d.stopPropagation(),R({x:d.clientX,y:d.clientY}),j(!0)},ee=()=>{const d=document.createElement("input");d.type="file",d.accept="image/*",d.onchange=S=>{if(S.target.files&&S.target.files[0]){const V=new FileReader;V.onload=H=>{var B;(B=H.target)!=null&&B.result&&x({content:H.target.result})},V.readAsDataURL(S.target.files[0])}},d.click(),j(!1)},z=()=>{const d={...JSON.parse(JSON.stringify(t)),id:`img-${Date.now()}`,position:{x:t.position.x+20,y:t.position.y+20}};x(d,!0),j(!1)};return e.jsxs("div",{ref:le,className:`absolute ${I.class} ${h?"ring-2 ring-purple-500":""} ${i?"opacity-50":"opacity-100"}`,style:{left:`${t.position.x}px`,top:`${t.position.y}px`,width:"100%",height:"100%",cursor:h?"move":"pointer"},onClick:d=>{d.stopPropagation(),r()},onMouseDown:y,onContextMenu:ne,children:[e.jsx("div",{className:"w-full h-full overflow-hidden",children:e.jsx("img",{src:t.content,alt:"Imagen cargada",className:"w-full h-full object-cover",style:U})}),h&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:d=>{var S;d.stopPropagation(),x({filters:{...t.filters,rotate:(((S=t.filters)==null?void 0:S.rotate)||0)+90}})},children:e.jsx(os,{className:"h-4 w-4 text-gray-700"})}),e.jsx("button",{className:"bg-white rounded-full p-1 shadow-md hover:bg-gray-100",onClick:d=>{d.stopPropagation(),c()},children:e.jsx(re,{className:"h-4 w-4 text-gray-700"})})]}),D&&e.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${F.x}px`,top:`${F.y}px`},onClick:d=>d.stopPropagation(),children:[e.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:ee,children:[e.jsx(cs,{className:"h-4 w-4"}),"Reemplazar imagen"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:z,children:[e.jsx(qe,{className:"h-4 w-4"}),"Duplicar"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var d;x({filters:{...t.filters,opacity:Math.max(0,(((d=t.filters)==null?void 0:d.opacity)||100)-10)}}),j(!1)},children:[e.jsx(Je,{className:"h-4 w-4"}),"Reducir opacidad"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{c(),j(!1)},children:[e.jsx(re,{className:"h-4 w-4"}),"Eliminar"]})]})]})},vs=({element:t,isSelected:h,onSelect:r,onUpdate:x,onDelete:c})=>{var W,T,q,O,X,Y,_,d,S,V,H,B,J,G,Z;const[b,i]=v.useState(!1),u=v.useRef(null),w=v.useRef(null),[{isDragging:M},$]=We(()=>({type:"TEXT_ELEMENT",item:{id:t.id},collect:g=>({isDragging:!!g.isDragging()})})),[m,N]=v.useState(!1),[D,j]=v.useState({x:0,y:0}),[F,R]=v.useState(!1),[U,I]=v.useState({x:0,y:0}),y=()=>{i(!0),setTimeout(()=>{u.current&&(u.current.focus(),u.current.select())},0)},E=()=>{i(!1)},Q=g=>{x({content:g.target.value})},le=g=>{g.key==="Enter"&&i(!1)},ne=g=>{h&&!b&&(g.stopPropagation(),N(!0),j({x:g.clientX-t.position.x,y:g.clientY-t.position.y}))},ee=g=>{if(m&&w.current){const P=w.current.parentElement.getBoundingClientRect(),oe=g.clientX-D.x,ce=g.clientY-D.y,de=P.width-w.current.offsetWidth,ue=P.height-w.current.offsetHeight,ge=Math.max(0,Math.min(oe,de)),me=Math.max(0,Math.min(ce,ue));x({position:{x:ge,y:me}})}},z=()=>{N(!1)},C=g=>{g.preventDefault(),g.stopPropagation(),I({x:g.clientX,y:g.clientY}),R(!0)},se=()=>{const g={...JSON.parse(JSON.stringify(t)),id:`text-${Date.now()}`,position:{x:t.position.x+10,y:t.position.y+10}};x(g,!0),R(!1)};v.useEffect(()=>(m&&(window.addEventListener("mousemove",ee),window.addEventListener("mouseup",z)),()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",z)}),[m,D]);const te=v.useCallback(g=>{w.current=g,$(g)},[$]),ae=(W=t.style)!=null&&W.textShadow?`${t.style.textShadowX||0}px ${t.style.textShadowY||0}px ${t.style.textShadowBlur||0}px ${t.style.textShadowColor||"rgba(0,0,0,0.5)"}`:"none",ie={...t.style,position:"absolute",left:`${t.position.x}px`,top:`${t.position.y}px`,cursor:h&&!b?"move":"pointer",textShadow:ae,zIndex:10};return e.jsxs("div",{ref:te,className:`${h?"ring-2 ring-purple-500":""} ${M?"opacity-50":"opacity-100"}`,style:ie,onClick:g=>{g.stopPropagation(),r()},onDoubleClick:y,onMouseDown:ne,onContextMenu:C,children:[b?e.jsx("input",{ref:u,type:"text",value:t.content,onChange:Q,onBlur:E,onKeyDown:le,className:"w-full p-1 border border-gray-300 rounded bg-white",style:{fontFamily:(T=t.style)==null?void 0:T.fontFamily,fontSize:(q=t.style)==null?void 0:q.fontSize,fontWeight:(O=t.style)==null?void 0:O.fontWeight,fontStyle:(X=t.style)==null?void 0:X.fontStyle,textDecoration:(Y=t.style)==null?void 0:Y.textDecoration,color:(_=t.style)==null?void 0:_.color,textAlign:(d=t.style)==null?void 0:d.textAlign,minWidth:"100px"},autoFocus:!0}):e.jsx("div",{className:"p-2 rounded",style:{backgroundColor:((S=t.style)==null?void 0:S.backgroundColor)||"transparent",padding:((V=t.style)==null?void 0:V.padding)||"8px",borderRadius:((H=t.style)==null?void 0:H.borderRadius)||"0px",border:((B=t.style)==null?void 0:B.border)||"none"},children:t.content||"Editar texto"}),h&&e.jsxs("div",{className:"absolute top-0 right-0 transform translate-y-[-100%] flex gap-1 bg-white rounded-t-md p-1 shadow-sm",children:[e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:g=>{var P;g.stopPropagation(),x({style:{...t.style,fontWeight:((P=t.style)==null?void 0:P.fontWeight)==="bold"?"normal":"bold"}})},children:e.jsx("span",{className:`text-xs ${((J=t.style)==null?void 0:J.fontWeight)==="bold"?"font-bold":""}`,children:"B"})}),e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:g=>{var P;g.stopPropagation(),x({style:{...t.style,fontStyle:((P=t.style)==null?void 0:P.fontStyle)==="italic"?"normal":"italic"}})},children:e.jsx("span",{className:`text-xs ${((G=t.style)==null?void 0:G.fontStyle)==="italic"?"italic":""}`,children:"I"})}),e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:g=>{var P;g.stopPropagation(),x({style:{...t.style,textDecoration:((P=t.style)==null?void 0:P.textDecoration)==="underline"?"none":"underline"}})},children:e.jsx("span",{className:`text-xs ${((Z=t.style)==null?void 0:Z.textDecoration)==="underline"?"underline":""}`,children:"U"})}),e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:g=>{g.stopPropagation(),c()},children:e.jsx(re,{className:"h-3 w-3 text-gray-700"})})]}),F&&e.jsxs("div",{className:"fixed bg-white shadow-lg rounded-md z-50 py-1 w-48",style:{left:`${U.x}px`,top:`${U.y}px`},onClick:g=>g.stopPropagation(),children:[e.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{i(!0),R(!1)},children:[e.jsx(he,{className:"h-4 w-4"}),"Editar texto"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:se,children:[e.jsx(qe,{className:"h-4 w-4"}),"Duplicar"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{var g;x({style:{...t.style,opacity:Math.max(0,(((g=t.style)==null?void 0:g.opacity)||1)-.1)}}),R(!1)},children:[e.jsx(Je,{className:"h-4 w-4"}),"Reducir opacidad"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2",onClick:()=>{c(),R(!1)},children:[e.jsx(re,{className:"h-4 w-4"}),"Eliminar"]})]})]})},js=({selectedMask:t,onSelect:h,availableMasks:r=[]})=>{var i;const[x,c]=v.useState("Básicas"),b={};return fe.forEach(u=>{b[u.category]||(b[u.category]=[]),(r.includes(u.id)||u.id==="none")&&b[u.category].push(u)}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Máscaras de imagen"}),e.jsx("div",{className:"flex overflow-x-auto pb-2",children:Object.keys(b).map(u=>b[u].length>0&&e.jsx("button",{className:`px-3 py-1 text-sm whitespace-nowrap ${x===u?"border-b-2 border-purple-500 font-medium text-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>c(u),children:u},u))}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:(i=b[x])==null?void 0:i.map(u=>e.jsxs("div",{className:`border rounded-md p-2 cursor-pointer hover:border-purple-500 transition-colors ${t===u.id?"border-purple-500 ring-2 ring-purple-200":""}`,onClick:()=>h(u.id),children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-md flex items-center justify-center mb-2",children:e.jsx("div",{className:`w-16 h-16 bg-purple-300 ${u.class}`})}),e.jsx("p",{className:"text-center text-sm",children:u.name})]},u.id))})]})},ws=({element:t,onUpdate:h})=>{var r,x,c,b;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modo de mezcla"}),e.jsx("select",{className:"w-full border rounded-md p-2 text-sm",value:((r=t.filters)==null?void 0:r.blendMode)||"normal",onChange:i=>h({filters:{...t.filters,blendMode:i.target.value}}),children:ps.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsx(L,{label:"Opacidad",value:[((x=t.filters)==null?void 0:x.opacity)||100],min:0,max:100,onValueChange:i=>h({filters:{...t.filters,opacity:i[0]}})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(k,{variant:(c=t.filters)!=null&&c.flipHorizontal?"secondary":"outline",size:"sm",onClick:()=>{var i;return h({filters:{...t.filters,flipHorizontal:!((i=t.filters)!=null&&i.flipHorizontal)}})},children:[e.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Voltear H"]}),e.jsxs(k,{variant:(b=t.filters)!=null&&b.flipVertical?"secondary":"outline",size:"sm",onClick:()=>{var i;return h({filters:{...t.filters,flipVertical:!((i=t.filters)!=null&&i.flipVertical)}})},children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Voltear V"]})]})]})},Ns=({onSelectPreset:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Filtros predefinidos"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:hs.map(h=>e.jsx(k,{variant:"outline",size:"sm",onClick:()=>t(h.filters),children:h.name},h.name))})]});function Vs(){var O,X,Y,_,d,S,V,H,B,J,G,Z,g,P,oe,ce,de,ue,ge,me,ye,be,ve;const[t,h]=v.useState([{id:"page-1",layout:"layout-1",cells:Array.from({length:4}).map((a,s)=>({id:`cell-1-${s+1}`,elements:[]}))}]),[r,x]=v.useState(0),[c,b]=v.useState(null),[i,u]=v.useState(null),[w,M]=v.useState("elements"),[$,m]=v.useState("basic"),[N,D]=v.useState([JSON.stringify(t)]),[j,F]=v.useState(0),[R,U]=v.useState(!1),I=()=>xe.find(a=>a.id===t[r].layout)||xe[0],y=()=>{if(!c||!i)return null;const a=t[r].cells.find(s=>s.id===i);return a?a.elements.find(s=>s.id===c):null},E=a=>{h(a);const s=[...N.slice(0,j+1),JSON.stringify(a)];D(s),F(s.length-1)},Q=a=>{const s=xe.find(f=>f.id===a);if(!s)return;const l=[...t],o=l[r],n=Array.from({length:s.cells}).map((f,p)=>o.cells[p]||{id:`cell-${o.id}-${p+1}`,elements:[]});l[r]={...o,layout:a,cells:n},E(l),b(null),u(null)},le=()=>{const a=`page-${t.length+1}`,s=I(),l={id:a,layout:s.id,cells:Array.from({length:s.cells}).map((n,f)=>({id:`cell-${a}-${f+1}`,elements:[]}))},o=[...t,l];E(o),x(o.length-1)},ne=()=>{if(t.length<=1)return;const a=t.filter((s,l)=>l!==r);E(a),x(Math.min(r,a.length-1))},ee=()=>{const a=t[r],s={...JSON.parse(JSON.stringify(a)),id:`page-${t.length+1}-copy`},l=[...t,s];E(l),x(l.length-1)},z=(a,s)=>{const l=[...t],o=l[r].cells.findIndex(n=>n.id===a);o!==-1&&(l[r].cells[o].elements.push(s),E(l),b(s.id),u(a))},C=(a,s,l,o=!1)=>{const n=[...t],f=n[r].cells.findIndex(p=>p.id===a);if(f!==-1){if(o)n[r].cells[f].elements.push({...n[r].cells[f].elements.find(p=>p.id===s),...l});else{const p=n[r].cells[f].elements.findIndex(K=>K.id===s);p!==-1&&(n[r].cells[f].elements[p]={...n[r].cells[f].elements[p],...l})}E(n)}},se=(a,s)=>{const l=[...t],o=l[r].cells.findIndex(n=>n.id===a);o!==-1&&(l[r].cells[o].elements=l[r].cells[o].elements.filter(n=>n.id!==s),E(l),c===s&&b(null))},te=()=>{j>0&&(F(j-1),h(JSON.parse(N[j-1])),b(null),u(null))},ae=()=>{j<N.length-1&&(F(j+1),h(JSON.parse(N[j+1])),b(null),u(null))},ie=()=>{const a=document.createElement("canvas"),s=document.querySelector(".page-preview");if(!s)return;const l=s.offsetWidth,o=s.offsetHeight;a.width=l*2,a.height=o*2;const n=a.getContext("2d");n.scale(2,2),n.fillStyle="white",n.fillRect(0,0,l,o),ds(s,{scale:2,backgroundColor:null,canvas:a,logging:!1,useCORS:!0}).then(f=>{f.toBlob(p=>{us.saveAs(p,`diseño-pagina-${r+1}.png`)})})},W=()=>{U(!R)},T=()=>{const s={id:`text-${Date.now()}`,type:"text",content:"Haz clic para editar",position:{x:20,y:20},style:{fontSize:"16px",fontFamily:"Arial",color:"#000000",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",backgroundColor:"transparent",padding:"8px",borderRadius:"0px",border:"none",opacity:1}};z(i||t[r].cells[0].id,s)},q=a=>{var s;!c||!i||C(i,c,{filters:{...(s=y())==null?void 0:s.filters,...a}})};return e.jsx(Ze,{backend:Ke,children:e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 mx-auto max-w-7xl",children:[e.jsxs("header",{className:"border-b bg-white p-4 flex items-center justify-between shadow-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(k,{variant:"ghost",size:"sm",children:[e.jsx(gs,{className:"h-5 w-5 mr-1"}),"Regresar"]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Editor"}),e.jsx("h2",{className:"text-lg text-gray-600",children:"Crea collages y diseños impresionantes"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"secondary",onClick:W,icon:e.jsx(Ue,{className:"h-4 w-4"}),children:R?"Editar":"Vista previa"}),e.jsx(k,{className:"bg-purple-600 hover:bg-purple-700",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:ie,children:"Exportar"})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("aside",{className:"w-64 border-r bg-white p-4 overflow-y-auto shadow-sm",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex border-b pb-4",children:[e.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${w==="elements"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>M("elements"),children:"Elementos"}),e.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${w==="filters"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>M("filters"),children:"Filtros"})]}),w==="elements"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Layouts"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:xe.map(a=>e.jsxs("div",{className:`border rounded-md p-1 cursor-pointer hover:border-purple-500 ${t[r].layout===a.id?"border-purple-500 ring-1 ring-purple-200":""}`,onClick:()=>Q(a.id),children:[e.jsx("div",{className:`grid ${a.template} gap-1 h-20`,children:Array.from({length:a.cells}).map((s,l)=>e.jsx("div",{className:"bg-gray-100 rounded-sm flex items-center justify-center",children:e.jsx(pe,{className:"h-3 w-3 text-gray-400"})},l))}),e.jsx("p",{className:"text-xs text-center mt-1 truncate",children:a.name})]},a.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Añadir"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(k,{variant:"outline",size:"sm",icon:e.jsx(pe,{className:"h-4 w-4"}),onClick:()=>{const a=document.createElement("input");a.type="file",a.accept="image/*",a.onchange=s=>{if(s.target.files&&s.target.files[0]){const o={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},n=new FileReader;n.onload=f=>{var p;(p=f.target)!=null&&p.result&&(o.content=f.target.result,z(i||t[r].cells[0].id,o))},n.readAsDataURL(s.target.files[0])}},a.click()},children:"Imagen"}),e.jsx(k,{variant:"outline",size:"sm",icon:e.jsx(he,{className:"h-4 w-4"}),onClick:T,children:"Texto"})]})]})]}),w==="filters"&&c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex border-b",children:[e.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${$==="basic"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>m("basic"),children:"Básicos"}),e.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${$==="transform"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>m("transform"),children:"Transformar"}),e.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${$==="advanced"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>m("advanced"),children:"Avanzados"})]}),$==="basic"&&e.jsxs(e.Fragment,{children:[((O=y())==null?void 0:O.type)==="image"&&e.jsx(Ns,{onSelectPreset:q}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Ajustes básicos"}),e.jsx(L,{label:"Brillo",value:[((Y=(X=y())==null?void 0:X.filters)==null?void 0:Y.brightness)||100],min:0,max:200,onValueChange:a=>{var s;return C(i,c,{filters:{...(s=y())==null?void 0:s.filters,brightness:a[0]}})}}),e.jsx(L,{label:"Contraste",value:[((d=(_=y())==null?void 0:_.filters)==null?void 0:d.contrast)||100],min:0,max:200,onValueChange:a=>{var s;return C(i,c,{filters:{...(s=y())==null?void 0:s.filters,contrast:a[0]}})}}),e.jsx(L,{label:"Saturación",value:[((V=(S=y())==null?void 0:S.filters)==null?void 0:V.saturation)||100],min:0,max:200,onValueChange:a=>{var s;return C(i,c,{filters:{...(s=y())==null?void 0:s.filters,saturation:a[0]}})}}),e.jsx(L,{label:"Tono",value:[((B=(H=y())==null?void 0:H.filters)==null?void 0:B.hue)||0],min:0,max:360,unit:"°",onValueChange:a=>{var s;return C(i,c,{filters:{...(s=y())==null?void 0:s.filters,hue:a[0]}})}}),e.jsx(L,{label:"Sepia",value:[((G=(J=y())==null?void 0:J.filters)==null?void 0:G.tint)||0],min:0,max:100,onValueChange:a=>{var s;return C(i,c,{filters:{...(s=y())==null?void 0:s.filters,tint:a[0]}})}}),e.jsx(L,{label:"Desenfoque",value:[((g=(Z=y())==null?void 0:Z.filters)==null?void 0:g.blur)||0],min:0,max:20,unit:"px",onValueChange:a=>{var s;return C(i,c,{filters:{...(s=y())==null?void 0:s.filters,blur:a[0]}})}})]})]}),$==="transform"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Transformación"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(k,{variant:(oe=(P=y())==null?void 0:P.filters)!=null&&oe.flipHorizontal?"secondary":"outline",size:"sm",icon:e.jsx(Ye,{className:"h-4 w-4"}),onClick:()=>{var a,s,l;return C(i,c,{filters:{...(a=y())==null?void 0:a.filters,flipHorizontal:!((l=(s=y())==null?void 0:s.filters)!=null&&l.flipHorizontal)}})},children:"Voltear H"}),e.jsx(k,{variant:(de=(ce=y())==null?void 0:ce.filters)!=null&&de.flipVertical?"secondary":"outline",size:"sm",icon:e.jsx(_e,{className:"h-4 w-4"}),onClick:()=>{var a,s,l;return C(i,c,{filters:{...(a=y())==null?void 0:a.filters,flipVertical:!((l=(s=y())==null?void 0:s.filters)!=null&&l.flipVertical)}})},children:"Voltear V"})]}),e.jsx(L,{label:"Rotación",value:[((ge=(ue=y())==null?void 0:ue.filters)==null?void 0:ge.rotate)||0],min:0,max:360,unit:"°",onValueChange:a=>{var s;return C(i,c,{filters:{...(s=y())==null?void 0:s.filters,rotate:a[0]}})}}),e.jsx(L,{label:"Escala",value:[(((ye=(me=y())==null?void 0:me.filters)==null?void 0:ye.scale)||1)*100],min:10,max:200,onValueChange:a=>{var s;return C(i,c,{filters:{...(s=y())==null?void 0:s.filters,scale:a[0]/100}})}})]}),$==="advanced"&&e.jsx(ws,{element:y(),onUpdate:a=>C(i,c,a)}),((be=y())==null?void 0:be.type)==="image"&&e.jsx(js,{onSelect:a=>C(i,c,{mask:a}),selectedMask:((ve=y())==null?void 0:ve.mask)||"none",availableMasks:I().maskCategories.flatMap(a=>a.masks)})]})]})}),e.jsx("main",{className:"flex-1 overflow-auto bg-gray-100 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:R?e.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg page-preview",children:e.jsx("div",{className:`grid ${I().template} gap-6 aspect-[4/3]`,children:t[r].cells.map(a=>e.jsx("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden",children:a.elements.map(s=>{var l,o,n,f,p,K,je,we,Ne,Ce,ke,$e,Ee,Se,Me,Pe,De,Fe,Re,ze,Ie,Ve,He,Be,Ae;return s.type==="image"?e.jsx("div",{className:`absolute ${((l=fe.find(Ge=>Ge.id===s.mask))==null?void 0:l.class)||""}`,style:{left:`${s.position.x}px`,top:`${s.position.y}px`,width:"100%",height:"100%"},children:e.jsx("img",{src:s.content,alt:"",className:"w-full h-full object-cover",style:{filter:`
                                    brightness(${(((o=s.filters)==null?void 0:o.brightness)||100)/100})
                                    contrast(${(((n=s.filters)==null?void 0:n.contrast)||100)/100})
                                    saturate(${(((f=s.filters)==null?void 0:f.saturation)||100)/100})
                                    sepia(${(((p=s.filters)==null?void 0:p.tint)||0)/100})
                                    hue-rotate(${(((K=s.filters)==null?void 0:K.hue)||0)*3.6}deg)
                                    blur(${((je=s.filters)==null?void 0:je.blur)||0}px)
                                  `,transform:`scale(${((we=s.filters)==null?void 0:we.scale)||1}) rotate(${((Ne=s.filters)==null?void 0:Ne.rotate)||0}deg) ${(Ce=s.filters)!=null&&Ce.flipHorizontal?"scaleX(-1)":""} ${(ke=s.filters)!=null&&ke.flipVertical?"scaleY(-1)":""}`,mixBlendMode:(($e=s.filters)==null?void 0:$e.blendMode)||"normal",opacity:(((Ee=s.filters)==null?void 0:Ee.opacity)||100)/100}})},s.id):e.jsx("div",{className:"absolute",style:{left:`${s.position.x}px`,top:`${s.position.y}px`,fontFamily:(Se=s.style)==null?void 0:Se.fontFamily,fontSize:(Me=s.style)==null?void 0:Me.fontSize,fontWeight:(Pe=s.style)==null?void 0:Pe.fontWeight,fontStyle:(De=s.style)==null?void 0:De.fontStyle,textDecoration:(Fe=s.style)==null?void 0:Fe.textDecoration,color:(Re=s.style)==null?void 0:Re.color,textAlign:(ze=s.style)==null?void 0:ze.textAlign,backgroundColor:((Ie=s.style)==null?void 0:Ie.backgroundColor)||"transparent",padding:((Ve=s.style)==null?void 0:Ve.padding)||"8px",borderRadius:((He=s.style)==null?void 0:He.borderRadius)||"0px",border:((Be=s.style)==null?void 0:Be.border)||"none",opacity:((Ae=s.style)==null?void 0:Ae.opacity)||1},children:s.content},s.id)})},a.id))})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center gap-4",children:[e.jsx(k,{variant:"ghost",size:"icon",onClick:te,disabled:j<=0,children:e.jsx(es,{className:"h-5 w-5"})}),e.jsx(k,{variant:"ghost",size:"icon",onClick:ae,disabled:j>=N.length-1,children:e.jsx(ss,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-6 border-l"}),e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>{const a=document.createElement("input");a.type="file",a.accept="image/*",a.onchange=s=>{if(s.target.files&&s.target.files[0]){const o={id:`img-${Date.now()}`,type:"image",content:"",position:{x:10,y:10},filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal"},mask:"none"},n=new FileReader;n.onload=f=>{var p;(p=f.target)!=null&&p.result&&(o.content=f.target.result,z(i||t[r].cells[0].id,o))},n.readAsDataURL(s.target.files[0])}},a.click()},children:e.jsx(pe,{className:"h-5 w-5"})}),e.jsx(k,{variant:"ghost",size:"icon",onClick:T,children:e.jsx(he,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-6 border-l"}),e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>{c&&i&&se(i,c)},disabled:!c,children:e.jsx(re,{className:"h-5 w-5"})})]}),e.jsx("div",{className:`bg-white rounded-lg shadow-lg overflow-hidden page-preview ${I().cells<=4?"aspect-[4/3]":""}`,children:e.jsx("div",{className:`grid ${I().template} gap-4 h-full p-4`,children:t[r].cells.map(a=>e.jsx(ys,{id:a.id,elements:a.elements,selectedElement:i===a.id?c:null,onSelectElement:s=>{b(s),u(a.id)},onAddElement:s=>{const l=[...t],o=l[r].cells.findIndex(n=>n.id===a.id);o!==-1&&(l[r].cells[o].elements.push(s),E(l),b(s.id),u(a.id))},onUpdateElement:(s,l,o)=>{const n=[...t],f=n[r].cells.findIndex(p=>p.id===a.id);if(f!==-1){if(o)n[r].cells[f].elements.push({...n[r].cells[f].elements.find(p=>p.id===s),...l});else{const p=n[r].cells[f].elements.findIndex(K=>K.id===s);p!==-1&&(n[r].cells[f].elements[p]={...n[r].cells[f].elements[p],...l})}E(n)}},onDeleteElement:s=>{const l=[...t],o=l[r].cells.findIndex(n=>n.id===a.id);o!==-1&&(l[r].cells[o].elements=l[r].cells[o].elements.filter(n=>n.id!==s),E(l),c===s&&b(null))},availableMasks:I().maskCategories.flatMap(s=>s.masks)},a.id))})})]})})}),e.jsx("aside",{className:"w-56 border-l bg-white p-4 overflow-y-auto shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Páginas"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{variant:"ghost",size:"icon-sm",onClick:ee,children:e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",children:e.jsx("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}),e.jsx(k,{variant:"ghost",size:"icon-sm",onClick:ne,disabled:t.length<=1,children:e.jsx(re,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-3",children:[t.map((a,s)=>e.jsx("div",{className:`border rounded-md p-2 cursor-pointer hover:border-purple-500 transition-colors ${r===s?"border-purple-500 ring-2 ring-purple-200":""}`,onClick:()=>x(s),children:e.jsxs("div",{className:"bg-gray-100 aspect-[4/3] rounded-sm flex items-center justify-center text-xs text-gray-500 relative",children:["Pág. ",s+1,a.cells.some(l=>l.elements.some(o=>o.type==="image"&&o.content))&&e.jsx("div",{className:"absolute inset-0 grid grid-cols-2 grid-rows-2 gap-1 p-1",children:Array.from({length:4}).map((l,o)=>{const n=a.cells[o],f=n==null?void 0:n.elements.find(p=>p.type==="image"&&p.content);return e.jsx("div",{className:"bg-gray-200 rounded-sm overflow-hidden",children:f&&e.jsx("img",{src:f.content,alt:"",className:"w-full h-full object-cover"})},o)})})]})},a.id)),e.jsx(k,{variant:"outline",size:"sm",icon:e.jsx(ms,{className:"h-4 w-4"}),onClick:le,children:"Añadir página"})]})]})})]})]})})}export{Vs as default};
