import{j as e}from"./AboutHeader-COUW3Uy_.js";import{r as c}from"./index-CqkZ-sT_.js";import{P as O}from"./PostsRest-BcNFA_fY.js";import{C as E}from"./chevron-down-CxOx8ByU.js";import{S}from"./search-DhoFIDMi.js";import{C as L}from"./check-CvqheCNB.js";import{N as k,L as F}from"./NoResult-CROInX6p.js";import"./BasicEditing-CqE15M_Q.js";import"./main-CkMzf7wF.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";import"./createLucideIcon-D0vxYqnu.js";function v({flex:t=!1,post:a,featured:i=!1}){return e.jsx("article",{className:`group relative ${i?"h-full":""}`,children:e.jsxs("a",{href:"#",className:`block ${t&&"flex gap-4  "}`,children:[e.jsx("div",{className:`relative aspect-video overflow-hidden rounded-2xl ${t?"aspect-square  h-[250px] w-[250px]":"h-[300px] w-full object-cover"} `,children:e.jsx("img",{src:`/api/posts/media/${a==null?void 0:a.image}`,alt:a==null?void 0:a.name,fill:!0,className:`object-cover transition-transform duration-300 group-hover:scale-105 ${t?"h-[250px] w-[250px] object-cover":"h-[300px] w-full object-cover"} `})}),e.jsxs("div",{className:`mt-4 space-y-3 ${t&&"w-1/2 mt-0 flex flex-col justify-between h-full"}`,children:[e.jsx("span",{className:"customtext-neutral-light font-bold ",children:a==null?void 0:a.category.name}),e.jsx("h3",{className:`text-2xl font-bold customtext-neutral-dark group-hover:customtext-primary ${t?"line-clamp-2":"line-clamp-1"} `,children:a==null?void 0:a.name}),e.jsx("p",{p:!0,className:"customtext-neutral-dark opacity-80 line-clamp-2 ",children:a==null?void 0:a.summary}),e.jsxs("div",{className:"flex items-center font-medium gap-2 text-sm customtext-neutral-light pt-6",children:[e.jsx("time",{children:a==null?void 0:a.post_date}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Leído hace 5 minutos"})]})]})]})})}const B=({options:t=[],placeholder:a="Select an option",onChange:i,valueKey:u,labelKey:m,label:o,labelClass:x,className:h,disabled:p=!1})=>{const[r,f]=c.useState(!1),[d,y]=c.useState(null),[b,N]=c.useState(""),g=c.useRef(null),s=t.length>0&&typeof t[0]=="object",n=s?u||Object.keys(t[0])[0]:null,j=s?m||Object.keys(t[0])[1]:null,C=t.map(l=>s?{value:l[n],label:l[j]}:{value:l,label:l}).filter(l=>l.label.toLowerCase().includes(b.toLowerCase()));c.useEffect(()=>{const l=$=>{g.current&&!g.current.contains($.target)&&f(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const _=l=>{y(l),i(l.value),f(!1)};return e.jsxs("div",{className:"relative w-full",ref:g,children:[o&&e.jsx("label",{className:`block text-sm mb-1 customtext-neutral-dark ${x}`,children:o}),e.jsxs("button",{className:`w-full relative text-start  px-4 py-3 border customtext-neutral-dark   rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300 ${h}`,onClick:()=>f(!r),"aria-haspopup":"listbox","aria-expanded":r,disabled:p,children:[e.jsx("span",{className:"block truncate",children:d?d.label:a}),e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center py-3 pr-2 pointer-events-none",children:e.jsx(E,{className:`w-5 h-5 customtext-neutral-dark transition-transform duration-200 ${r?"rotate-180":""}`})})]}),r&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg max-h-60 overflow-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search options...",value:b,onChange:l=>N(l.target.value)})]})}),e.jsx("ul",{className:"py-1",role:"listbox",children:C.map(l=>e.jsxs("li",{className:`px-4 py-2 cursor-pointer flex items-center justify-between 
                                    ${d&&d.value===l.value?"bg-blue-500 text-white":"hover:bg-gray-100"}`,onClick:()=>_(l),role:"option","aria-selected":d&&d.value===l.value,children:[e.jsx("span",{className:"block truncate",children:l.label}),d&&d.value===l.value&&e.jsx(L,{className:"w-5 h-5"})]},l.value))})]})]})},A=new O;function R({posts:t,setPosts:a,headerPosts:i,filteredData:u,loading:m,setLoading:o,isFilter:x,setIsFilter:h}){const{categories:p}=u,[r,f]=c.useState({category_id:"",post_date:"",name:""}),[d,y]=c.useState(!0),b=s=>{const n=[];return s.category_id&&n.push(["category_id","=",s.category_id]),s.post_date&&(console.log("Fecha seleccionada:",s.post_date),n.push(["post_date","=",s.post_date])),s.name&&(console.log("Nombre seleccionado:",s.name),n.push(["name","contains",s.name])),n},N=async()=>{o(!0);try{const s=b(r),n=r.category_id||r.post_date||r.name,j={with:"category",filter:s};console.log(j);const w=await A.paginate(j);console.log(w),a(w.data),h(!!n)}catch(s){console.error("Error fetching posts:",s)}finally{o(!1)}};c.useEffect(()=>{d?y(!1):N()},[r]);const g=(s,n)=>{f(j=>({...j,[s]:n}))};return c.useEffect(()=>{console.log("BlogHeader - posts actualizados:",t)},[t]),e.jsx("main",{className:"bg-white font-font-general",children:e.jsxs("section",{className:`px-primary mx-auto ${x?"pt-8":"py-8"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("span",{className:"customtext-neutral-light  font-bold ",children:"Blog"}),e.jsxs("h1",{className:" customtext-neutral-dark md:text-5xl font-bold tracking-tight",children:["Descubre lo mejor:",e.jsx("br",{}),"Publicaciones sobre el mundo de la decoración"]}),e.jsx("p",{className:"customtext-neutral-dark opacity-80",children:"Nuestros juguetes están diseñados para inspirar, educar y divertir, desarrollando habilidades esenciales desde temprana edad."})]}),e.jsxs("div",{className:"mt-8 flex gap-4 justify-between",children:[e.jsxs("div",{className:"relative w-6/12 flex items-center",children:[e.jsx("input",{type:"search",placeholder:"Buscar publicación",className:"w-full px-4 relative py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:s=>g("name",s.target.value)}),e.jsx("div",{className:"absolute right-3 p-2 rounded-xl bg-primary",children:e.jsx(S,{className:" h-5 w-5 text-white"})})]}),e.jsxs("div",{className:"flex gap-4 w-5/12",children:[e.jsx(B,{options:p,placeholder:"Todas las categorías",onChange:s=>{f(n=>({...n,category_id:s}))},labelKey:"name",valueKey:"id"}),e.jsx("input",{type:"date",className:"w-full px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:s=>{g("post_date",s.target.value)}})]})]}),!x&&e.jsxs("div",{className:"mt-12 flex gap-8",children:[e.jsx("div",{className:"w-1/2",children:e.jsx(v,{featured:!0,post:i[0]})}),e.jsx("div",{className:"space-y-4 flex flex-col w-1/2",children:i.slice(1,3).map(s=>e.jsx(v,{flex:!0,post:s},s.id))})]})]})})}function z({posts:t,postsLatest:a,loading:i,isFilter:u}){return console.log("isFilter:",u),console.log("posts:",t),c.useEffect(()=>{},[t]),e.jsx("section",{className:`font-font-general ${u?"pb-16":"py-16"}`,children:e.jsx("div",{className:"px-primary mx-auto",children:u?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8",children:i?e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(F,{})}):Array.isArray(t)&&t.length>0?t.map((m,o)=>e.jsx(v,{post:m},o)):e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(k,{})})}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-5xl customtext-neutral-dark font-semibold mb-4",children:"Últimas publicaciones"}),e.jsx("p",{className:"customtext-neutral-dark opacity-80 mb-8",children:"Nam tempor diam quis urna maximus, ac laoreet arcu convallis. Aenean dignissim nec sem quis consequat."}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:Array.isArray(a)&&a.length>0?a.map((m,o)=>e.jsx(v,{post:m},o)):e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(k,{})})})]})})})}const Q=({data:t,headerPosts:a,filteredData:i,postsLatest:u})=>{const[m,o]=c.useState([]),[x,h]=c.useState(!1),[p,r]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(R,{data:t,headerPosts:a,loading:x,setLoading:h,posts:m,setPosts:o,filteredData:i,isFilter:p,setIsFilter:r}),e.jsx(z,{data:t,postsLatest:u,posts:m,loading:x,setLoading:h,isFilter:p,setIsFilter:r})]})};export{Q as default};
