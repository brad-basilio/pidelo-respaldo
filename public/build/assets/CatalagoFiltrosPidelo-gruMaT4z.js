var q=Object.defineProperty;var G=(o,r,i)=>r in o?q(o,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[r]=i;var _=(o,r,i)=>G(o,typeof r!="symbol"?r+"":r,i);import{j as e}from"./AboutHeader-COUW3Uy_.js";import{r as c}from"./index-CqkZ-sT_.js";import"./ProductCard-DppMoL6U.js";import{m as y}from"./main-CkMzf7wF.js";import"./BasicEditing-CqE15M_Q.js";import{L as K,N as Q}from"./NoResult-CROInX6p.js";import{P as W}from"./ProductCardScraping-CVJALr5M.js";import{C as X,a as Y}from"./chevron-right-B4p_OAUH.js";import{F as Z}from"./filter-CawzT8aa.js";import{C as N}from"./chevron-down-CxOx8ByU.js";import{S as L}from"./search-DhoFIDMi.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";import"./index.esm-DfKMpHf8.js";import"./createLucideIcon-D0vxYqnu.js";class ${}_($,"getProducts",async r=>{console.log(r);try{const{status:i,result:x}=await y.Fetch("./api/scrap-nike",{method:"POST",body:JSON.stringify(r)});return i||console.log((x==null?void 0:x.message)||"Error al obtener datos"),y.Notify.add({icon:"/assets/img/icon.svg",title:"Operacion correcta",body:"Se obtuvo correctamente el precio de envio"}),x}catch(i){return y.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),!1}});const ge=({items:o,data:r,filteredData:i,cart:x,setCart:A})=>{const{categories:w,brands:B,priceRanges:E}=i,[u,O]=c.useState({marca:!0,precio:!0,categoria:!0,colores:!1}),[h,v]=c.useState({category_id:[],brand_id:[],subcategory_id:[],price:null,name:null,sort_by:"created_at",order:"desc"}),[p,R]=c.useState([]),[I,C]=c.useState(!1),[ee,se]=c.useState({currentPage:1,totalPages:1}),M=async(s,t)=>{if(!s){alert("Por favor, ingresa un término de búsqueda");return}C(!0);try{const a=await $.getProducts({query:s,proveedor:t});R(a.data),console.log(a.data)}catch(a){console.error("Error:",a),alert("Hubo un error al realizar la búsqueda. Por favor, intenta nuevamente.")}finally{C(!1)}};c.useEffect(()=>{const s=new URLSearchParams(window.location.search),t=s.get("category");if(t){const n=w.find(d=>d.slug===t);n&&v(d=>({...d,category_id:[n.id]}))}const a=s.get("search"),l=s.get("provider");a&&M(a,l)},[o]);const f=(s,t)=>{v(a=>{if(s==="price")return{...a,price:a.price&&a.price.min===t.min&&a.price.max===t.max?null:t};const l=Array.isArray(a[s])?a[s]:[],n=l.includes(t)?l.filter(d=>d!==t):[...l,t];return{...a,[s]:n}})},g=s=>{O(t=>({...t,[s]:!t[s]}))},[P,T]=c.useState(""),[S,V]=c.useState(""),z=w.filter(s=>s.name.toLowerCase().includes(P.toLowerCase())),D=B.filter(s=>s.name.toLowerCase().includes(S.toLowerCase())),[m,j]=c.useState(1),b=12,k=m*b,H=k-b,J=p.slice(H,k),F=Math.ceil(p.length/b),U=s=>j(s);return e.jsx("section",{className:"py-12 bg-[#F7F9FB] font-font-general",children:e.jsxs("div",{className:"mx-auto px-primary",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 pb-4 border-b-2",children:[e.jsx("h2",{className:"text-4xl font-bold w-6/12",children:"Todos los productos"}),e.jsx("div",{className:"flex items-center gap-4 w-5/12",children:e.jsx("div",{className:"flex justify-end items-center mb-4 w-full",children:e.jsx("div",{className:"customtext-neutral-dark font-semibold",children:e.jsxs("nav",{class:"flex items-center gap-x-2 min-w-max",children:[e.jsx("button",{class:" p-4 inline-flex items-center",onClick:()=>j(m-1),disabled:m===1,children:e.jsx(X,{})}),e.jsx("ul",{className:"list-none flex gap-2",children:[...Array(F).keys()].map(s=>e.jsx("li",{className:`page-item ${m===s+1?"active":""}`,children:e.jsx("button",{onClick:()=>U(s+1),class:`w-10 h-10  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary ${m===s+1?"bg-primary text-white":" bg-transparent"}`,"aria-current":"page",children:s+1})},s+1))}),e.jsx("button",{class:" p-4 inline-flex items-center ",onClick:()=>j(m+1),disabled:m===F,children:e.jsx(Y,{})})]})})})})]}),e.jsxs("div",{className:"relative flex gap-4",children:[e.jsxs("div",{className:"w-3/12 bg-white p-4 rounded-lg h-max",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),e.jsx(Z,{className:"h-5 w-5"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>g("marca"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Marca"}),e.jsx(N,{className:`h-5 w-5 transform transition-transform ${u.marca?"":"-rotate-180"}`})]}),u.marca&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:S,onChange:s=>V(s.target.value)})]}),e.jsx("div",{className:"space-y-3",children:D.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>f("brand_id",s.id)}),e.jsx("span",{children:s.name})]},s.id))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>g("precio"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(N,{className:`h-5 w-5 transform transition-transform ${u.precio?"":"-rotate-180"}`})]}),u.precio&&e.jsx("div",{className:"space-y-3",children:E.map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300",onChange:()=>f("price",s),checked:h.price&&h.price.min===s.min&&h.price.max===s.max}),e.jsx("span",{children:`S/ ${s.min} - S/ ${s.max}`})]},`${s.min}-${s.max}`))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>g("categoria"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Categoría"}),e.jsx(N,{className:`h-5 w-5 transform transition-transform ${u.categoria?"":"-rotate-180"}`})]}),u.categoria&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:P,onChange:s=>T(s.target.value)})]}),z.map(s=>{var t,a,l;return e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>f("category_id",s.id),checked:(t=h.category_id)==null?void 0:t.includes(s.id)}),e.jsx("span",{children:s.name})]}),((a=h.category_id)==null?void 0:a.includes(s.id))&&((l=s.subcategories)==null?void 0:l.length)>0&&e.jsx("ul",{className:"ml-6 mt-2 space-y-2",children:s.subcategories.map(n=>{var d;return e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>f("subcategory_id",n.id),checked:(d=h.subcategory_id)==null?void 0:d.includes(n.id)}),e.jsx("span",{children:n.name})]},n.id)})})]},s.id)})]})]}),e.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl hover:brightness-90 transition-colors text-sm font-bold",children:"Aplicar Filtro"})]}),e.jsx("div",{className:"w-9/12",children:I?e.jsx(K,{}):e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(p)&&p.length>0?J.map(s=>e.jsx(W,{product:s,widthClass:"lg:w-1/3",cart:x,setCart:A},s.id)):e.jsx(Q,{})})})]})]})})};export{ge as default};
