import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BH53Isel.js";import{N as h}from"./Number2Currency-e57Tgsuk.js";import{B as Z,a as fe,D as je}from"./DeliveryPricesRest-n5FkKXRt.js";import{M as ye}from"./minus-jyhodMPN.js";import{P as ve}from"./plus-Bot15Khs.js";import{T as be}from"./trash-2-DK1wnsDn.js";import{G as f}from"./General-BmbBKdsB.js";import{i as re}from"./tippy-react.esm-BWiGTO87.js";import{m as k}from"./main-BvVILmTO.js";import{G as U}from"./Global-CQLDm_nT.js";import{I as B}from"./InputForm-BF3tk65A.js";import{l as ne}from"./CheckoutSteps-DfQUmsqy.js";import{a as Ne,b as I,h as we,c as W,d as Se,u as Ce,S as _e,_ as ke}from"./Select-aab027f3.esm-kGkkFbxE.js";import"./index-rimy3MAc.js";import"./index-yBjzXJbu.js";import"./createLucideIcon-Cy5Ya80P.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-fNjTmf9T.js";const Oe=({setCart:t,...a})=>{const n=()=>{t(o=>o.filter(i=>i.id!==a.id))},u=()=>{t(o=>o.map(i=>i.id===a.id?{...i,quantity:(i.quantity||1)+1}:i))},c=()=>{t(o=>o.map(i=>{if(i.id===a.id){const p=(i.quantity||1)-1;return p<=0?(n(a.id),null):{...i,quantity:p}}return i}).filter(Boolean))};return console.log(a),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${a.image}`,alt:a.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:a.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:a.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[a.stock>=a.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:a.sku})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"w-36 text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(a.price*a.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg mt-2",children:["S/ ",Number(a.final_price*a.quantity).toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:c,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(ye,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:a.quantity||1})}),e.jsx("button",{type:"button",onClick:u,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(ve,{size:16})})]}),e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(be,{size:18})})]})]})})]})},a.id)};function Pe({cart:t,setCart:a,onContinue:n,subTotal:u,envio:c,igv:o,fleteTotal:i,seguroImportacionTotal:p,derechoArancelarioTotal:j,totalFinal:m}){return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"space-y-6",children:t.map((x,N)=>e.jsx(Oe,{...x,setCart:a},N))})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen de compra"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(u)]})]}),Number(f.get("igv_checkout"))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(o)]})]}),Number(f.get("importation_flete"))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Flete (S/ 7.00/Kg)"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(i)]})]}),Number(f.get("importation_seguro"))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"customtext-neutral-dark",children:["Seguro (",Number(f.get("importation_seguro")).toFixed(2),"%)"]}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(p)]})]}),Number(f.get("importation_derecho_arancelario"))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"customtext-neutral-dark",children:["Derecho arancelario",f.get("importation_derecho_arancelario_descripcion")&&e.jsx(re,{content:e.jsx("p",{className:"whitespace-pre-line",children:f.get("importation_derecho_arancelario_descripcion")}),allowHTML:!0,children:e.jsx("i",{className:"mdi mdi-information ms-1"})})]}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(j)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(c)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",h(m)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(Z,{onClick:n,children:"Continuar Compra"}),e.jsx(fe,{href:"/",children:"Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas losÂ ",e.jsx("a",{className:"customtext-primary font-bold",children:"TÃ©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestraÂ ",e.jsx("a",{className:"customtext-primary font-bold",children:"PolÃ­tica de Privacidad"}),"."]})})]})]})]})}function Fe(){let t="";for(let a=0;a<12;a++){const n=Math.floor(Math.random()*10);t+=n}return t}const qe=t=>new Promise((a,n)=>{try{console.log(t);const u=Fe(t.email);console.log(u),window.Culqi.publicKey=U.CULQI_PUBLIC_KEY,window.Culqi.settings({title:U.APP_NAME,email:t.email,currency:"PEN",amount:t.amount*100,order:`${u}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:U.APP_URL+"/assets/resources/logo.png",bannerColor:U.APP_COLOR_PRIMARY,buttonBackground:U.APP_COLOR_PRIMARY}}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){n("No se obtuvo un token de Culqi");return}const c=window.Culqi.token.id;console.log("âœ… Token generado:",c),t={...t,token:c,orderNumber:u},console.log("_request actualizado",t);const{status:o,result:i}=await k.Fetch("./api/pago",{method:"POST",body:JSON.stringify(t)});o||console.log((i==null?void 0:i.message)||"Error en el pago"),window.Culqi.close(),k.Notify.add({icon:"/assets/img/icon.svg",title:"Pago Exitoso",body:"El pago se procesÃ³ correctamente.",type:"success"}),a(i)}catch(c){k.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:c.message,type:"danger"}),n(c.message||"Error en el pago")}},document.addEventListener("culqi.error",function(c){var o,i;k.Notify.add({icon:"/assets/img/icon.svg",title:"Error en Culqi",body:((o=c.detail)==null?void 0:o.message)||"Error desconocido",type:"danger"}),n(((i=c.detail)==null?void 0:i.message)||"Error desconocido")})}catch(u){k.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:u.message,type:"danger"}),n("Error en la integraciÃ³n con Culqi")}}),Ee=({title:t,description:a,selected:n,onSelect:u,disabled:c})=>e.jsxs("div",{className:`flex w-full items-center gap-3 p-4 border rounded-xl cursor-pointer transition-all duration-300 customtext-neutral-dark 
                }`,onClick:u,children:[e.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center ${n?"border-primary":""}`,children:n&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light",children:[e.jsx("h4",{className:"text-sm ",children:t}),e.jsx("p",{className:"text-xs",children:a})]})]}),Ie=()=>{const[t,a]=l.useState([]),[n,u]=l.useState(!1),c=l.useCallback(ne.debounce(async o=>{if(!(o.length<3)){u(!0);try{const j=(await(await fetch(`/api/ubigeo/search?q=${encodeURIComponent(o)}`)).json()).map(m=>({value:m.reniec,label:`${m.distrito}, ${m.provincia}, ${m.departamento}`,inei:m.inei,data:m}));a(j)}catch(i){console.error("Error searching ubigeo:",i)}u(!1)}},300),[]);return{ubigeoOptions:t,loadingUbigeo:n,searchUbigeo:c}};var Te=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function $e(t){var a=t.defaultOptions,n=a===void 0?!1:a,u=t.cacheOptions,c=u===void 0?!1:u,o=t.loadOptions;t.options;var i=t.isLoading,p=i===void 0?!1:i,j=t.onInputChange,m=t.filterOption,x=m===void 0?null:m,N=Ne(t,Te),M=N.inputValue,F=l.useRef(void 0),_=l.useRef(!1),L=l.useState(Array.isArray(n)?n:void 0),R=I(L,2),y=R[0],S=R[1],G=l.useState(typeof M<"u"?M:""),q=I(G,2),C=q[0],T=q[1],E=l.useState(n===!0),$=I(E,2),Y=$[0],A=$[1],V=l.useState(void 0),b=I(V,2),O=b[0],P=b[1],H=l.useState([]),s=I(H,2),d=s[0],r=s[1],v=l.useState(!1),g=I(v,2),ie=g[0],Q=g[1],oe=l.useState({}),ee=I(oe,2),z=ee[0],se=ee[1],le=l.useState(void 0),te=I(le,2),ce=te[0],de=te[1],ue=l.useState(void 0),ae=I(ue,2),me=ae[0],pe=ae[1];c!==me&&(se({}),pe(c)),n!==ce&&(S(Array.isArray(n)?n:void 0),de(n)),l.useEffect(function(){return _.current=!0,function(){_.current=!1}},[]);var J=l.useCallback(function(K,D){if(!o)return D();var w=o(K,D);w&&typeof w.then=="function"&&w.then(D,function(){return D()})},[o]);l.useEffect(function(){n===!0&&J(C,function(K){_.current&&(S(K||[]),A(!!F.current))})},[]);var xe=l.useCallback(function(K,D){var w=we(K,D,j);if(!w){F.current=void 0,T(""),P(""),r([]),A(!1),Q(!1);return}if(c&&z[w])T(w),P(w),r(z[w]),A(!1),Q(!1);else{var ge=F.current={};T(w),A(!0),Q(!O),J(w,function(X){_&&ge===F.current&&(F.current=void 0,A(!1),P(w),r(X||[]),Q(!1),se(X?W(W({},z),{},Se({},w,X)):z))})}},[c,J,O,z,j]),he=ie?[]:C&&O?d:y||[];return W(W({},N),{},{options:he,isLoading:Y||p,onInputChange:xe,filterOption:x})}var Ae=l.forwardRef(function(t,a){var n=$e(t),u=Ce(n);return l.createElement(_e,ke({ref:a},u))}),Le=Ae;function Me({cart:t,setSale:a,setCode:n,setDelivery:u,setCart:c,onContinue:o,noContinue:i,subTotal:p,igv:j,totalFinal:m,user:x,setEnvio:N,fleteTotal:M,seguroImportacionTotal:F,derechoArancelarioTotal:_,envio:L,ubigeos:R=[]}){var P,H;const[y,S]=l.useState({name:(x==null?void 0:x.name)||"",lastname:(x==null?void 0:x.lastname)||"",email:(x==null?void 0:x.email)||"",department:"",province:"",district:"",address:"",number:"",comment:"",reference:"",ubigeo:null}),[G,q]=l.useState(!1),[C,T]=l.useState([]),[E,$]=l.useState(null),[Y,A]=l.useState(null);console.log(R);const V=async s=>{if(!s)return;console.log("selected",s);const{data:d}=s;S(r=>({...r,department:d.departamento,province:d.provincia,district:d.distrito,ubigeo:d.reniec})),q(!0);try{const r=await je.getShippingCost({ubigeo:d.reniec}),v=[];r.data.is_free?(v.push({type:"free",price:0,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),r.data.express.price>0&&v.push({type:"express",price:r.data.express.price,description:r.data.express.description,deliveryType:r.data.express.type,characteristics:r.data.express.characteristics})):r.data.is_agency?v.push({type:"agency",price:r.data.agency.price,description:r.data.agency.description,deliveryType:r.data.agency.type,characteristics:r.data.agency.characteristics}):v.push({type:"standard",price:r.data.standard.price,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),T(v),$(v[0].type),N(v[0].price)}catch(r){console.error("Error al obtener precios de envÃ­o:",r),k.Notify.add({icon:"/assets/img/icon.svg",title:"Sin cobertura",body:"No realizamos envÃ­os a esta ubicaciÃ³n",type:"danger"}),T([]),$(null),N(0)}q(!1)},b=async s=>{if(s.preventDefault(),!x){k.Notify.add({icon:"/assets/img/icon.svg",title:"Acceso requerido",body:"Debe iniciar sesiÃ³n para continuar",type:"danger"});return}const r=["name","lastname","email","ubigeo","address","reference"].filter(v=>!y[v]);if(console.log(r),r.length>0){k.Notify.add({icon:"/assets/img/icon.svg",title:"Campos incompletos",body:"Complete todos los campos obligatorios",type:"danger"});return}if(!E){k.Notify.add({icon:"/assets/img/icon.svg",title:"Seleccione envÃ­o",body:"Debe elegir un mÃ©todo de envÃ­o",type:"danger"});return}try{const v={user_id:x.id,...y,fullname:`${y.name} ${y.lastname}`,country:"PerÃº",amount:m,delivery:L,cart:t},g=await qe(v);g.status?(a(g.sale),u(g.delivery),n(g.code),c([]),o()):k.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el pago",body:g.message||"Pago rechazado",type:"danger"})}catch{k.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:"OcurriÃ³ un error al procesar el pedido",type:"danger"})}};Ie();const O=l.useCallback(ne.debounce((s,d)=>{if(s.length<3){d([]);return}console.log("inputValue",s),fetch(`/api/ubigeo/search?q=${encodeURIComponent(s)}`).then(r=>{if(!r.ok)throw new Error("Error en la respuesta");return r.json()}).then(r=>{const v=r.map(g=>({value:g.reniec,label:`${g.distrito}, ${g.provincia}, ${g.departamento}`,data:{inei:g.inei,reniec:g.reniec,departamento:g.departamento,provincia:g.provincia,distrito:g.distrito}}));d(v)}).catch(r=>{console.error("Error:",r),d([])})},300),[]);return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-6",onSubmit:s=>s.preventDefault(),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(B,{label:"Nombres",value:y.name,onChange:s=>S(d=>({...d,name:s.target.value})),required:!0}),e.jsx(B,{label:"Apellidos",value:y.lastname,onChange:s=>S(d=>({...d,lastname:s.target.value})),required:!0})]}),e.jsx(B,{label:"Correo electrÃ³nico",type:"email",value:y.email,onChange:s=>S(d=>({...d,email:s.target.value})),required:!0}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm 2xl:text-base mb-1 customtext-neutral-dark ",children:"UbicaciÃ³n de entrega"}),e.jsx(Le,{cacheOptions:!0,defaultOptions:!0,loadOptions:O,onChange:V,placeholder:"Buscar distrito, provincia o departamento...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:s})=>s.length<3?"Buscar distrito, provincia o departamento...":"No se encontraron resultados",isLoading:G,styles:{control:s=>({...s,border:"1px solid transparent",boxShadow:"none",minHeight:"50px","&:hover":{borderColor:"transparent"},borderRadius:"0.75rem"}),menu:s=>({...s,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:s=>({...s,color:"inherit","&:hover":{color:"white"},backgroundColor:"inherit","&:hover":{backgroundColor:"#f4f4f5"}})},formatOptionLabel:({data:s})=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.distrito}),e.jsxs("div",{className:"text-gray-500",children:[s.provincia,", ",s.departamento]})]}),className:"w-full border focus:bg-primary focus:text-white border-gray-300 rounded-xl  transition-all duration-300",menuPortalTarget:document.body,menuPosition:"fixed"})]}),e.jsx(B,{label:"DirecciÃ³n",value:y.address,onChange:s=>S(d=>({...d,address:s.target.value})),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(B,{label:"NÃºmero",value:y.number,onChange:s=>S(d=>({...d,number:s.target.value}))}),e.jsx(B,{label:"Referencia",value:y.reference,onChange:s=>S(d=>({...d,reference:s.target.value})),required:!0})]}),C.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"MÃ©todo de envÃ­o"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:C.map(s=>e.jsx(Ee,{title:(s.type==="free"||s.type==="express"||s.type==="agency",s.deliveryType),price:s.price,description:s.description,selected:E===s.type,onSelect:()=>{$(s.type),N(s.price)}},s.type))}),console.log(C.find(s=>s.type===E)),E&&C.length>0&&e.jsx("div",{className:"space-y-4 mt-4",children:(H=(P=C.find(s=>s.type===E))==null?void 0:P.characteristics)==null?void 0:H.map((s,d)=>e.jsxs("div",{className:"flex items-start gap-4 bg-[#F7F9FB] p-4 rounded-xl",children:[e.jsx("div",{className:"w-5 flex-shrink-0",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-info customtext-primary",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 16v-4"}),e.jsx("path",{d:"M12 8h.01"})]})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:s})})]},`char-${d}`))})]})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen"}),e.jsx("div",{className:"space-y-4 border-b-2 pb-6",children:t.map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad: ",s.quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["S/ ",h(s.price)]})]})]},s.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["S/ ",h(p)]})]}),Number(f.get("igv_checkout"))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(j)]})]}),Number(f.get("importation_flete"))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Flete (S/ 7.00/Kg)"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(M)]})]}),Number(f.get("importation_seguro"))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"customtext-neutral-dark",children:["Seguro (",Number(f.get("importation_seguro")).toFixed(2),"%)"]}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(F)]})]}),Number(f.get("importation_derecho_arancelario"))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"customtext-neutral-dark",children:["Derecho arancelario",f.get("importation_derecho_arancelario_descripcion")&&e.jsx(re,{content:e.jsx("p",{className:"whitespace-pre-line",children:f.get("importation_derecho_arancelario_descripcion")}),allowHTML:!0,children:e.jsx("i",{className:"mdi mdi-information ms-1"})})]}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(_)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"EnvÃ­o:"}),e.jsxs("span",{children:["S/ ",h(L)]})]}),e.jsx("div",{className:"pt-4 border-t-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",h(m)]})]})}),e.jsx(Z,{onClick:b,className:"w-full mt-6",children:"Ir a Pagar"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-4 text-center",children:["Al completar tu compra aceptas nuestros"," ",e.jsx("a",{href:"/terminos",className:"text-blue-600 hover:underline",children:"TÃ©rminos y Condiciones"})]})]})]})]})}function Re({cart:t,code:a,delivery:n}){const c=(t.reduce((p,j)=>{const m=j.final_price;return p+m*j.quantity},0)/1.18).toFixed(2),o=(c*.18).toFixed(2),i=parseFloat(c)+parseFloat(o)+parseFloat(n);return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-[20px] customtext-neutral-light",children:"Gracias por tu compra ðŸŽ‰"}),e.jsx("p",{className:"customtext-neutral-dark text-5xl font-semibold",children:"Tu orden ha sido recibida"}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:" customtext-neutral-light",children:"CÃ³digo de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-lg font-semibold",children:`#${a}`})]}),e.jsxs("div",{className:"space-y-4 max-w-lg bg-[#F7F9FB] mx-auto p-8 rounded-xl",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:t.map((p,j)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex   gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-xl w-max",children:e.jsx("img",{src:`/storage/images/item/${p.image}`,alt:p.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:" text-start",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:p.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:p.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[p.quantity," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:p.sku})]})]})]})},j))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(c)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(o)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",h(n)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",h(i)]})]})})]}),e.jsx("div",{className:"pt-3",children:e.jsx(Z,{href:"/catalogo",children:"  Seguir Comprando"})})]})]})})})}function is({cart:t,setCart:a,user:n,ubigeos:u=[],items:c}){const[o,i]=l.useState(1),p=t.reduce((b,O)=>{const P=O.final_price;return b+P*O.quantity},0),j=(Number(f.get("igv_checkout"))||0)/100,m=(p/(1+j)).toFixed(2),x=(m*j).toFixed(2),[N,M]=l.useState(0),F=t.reduce((b,O)=>{const P=Number(O.weight)||0;return b+P},0);let _=0;const L=Number(f.get("importation_flete"))||0;L>0&&(_=F*L);const R=(Number(f.get("importation_seguro"))||0)/100,y=m*R,S=parseFloat(m)+parseFloat(_)+parseFloat(y),G=(Number(f.get("importation_derecho_arancelario"))||0)/100,q=S*G,C=parseFloat(m)+parseFloat(x)+parseFloat(q)+parseFloat(N),[T,E]=l.useState([]),[$,Y]=l.useState([]),[A,V]=l.useState([]);return l.useEffect(()=>{const b=document.createElement("script");return b.src=U.CULQI_API,b.async=!0,b.onload=()=>{window.culqi=function(){window.Culqi.token?console.log("âœ… Token recibido:",window.Culqi.token.id):window.Culqi.order?console.log("âœ… Orden recibida:",window.Culqi.order):console.error("âŒ Error en Culqi:",window.Culqi.error)}},document.body.appendChild(b),()=>{document.body.removeChild(b)}},[]),e.jsx("div",{className:"min-h-screen bg-[#F7F9FB] py-12 px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white   p-8 rounded-xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[e.jsx("div",{className:`text-sm ${o===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"1. Carrito de compra"}),e.jsx("div",{className:`text-sm ${o===2?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"2. Detalles de envÃ­o"}),e.jsx("div",{className:`text-sm ${o===3?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"3. Orden confirmada"})]}),e.jsx("div",{className:"mt-4 h-1 max-w-3xl mx-auto bg-gray-200",children:e.jsx("div",{className:"h-1 bg-primary transition-all duration-500",style:{width:`${(o-1)/2*100}%`}})})]}),o===1&&e.jsx(Pe,{cart:t,setCart:a,onContinue:()=>i(2),subTotal:m,envio:N,igv:x,fleteTotal:_,seguroImportacionTotal:y,derechoArancelarioTotal:q,totalFinal:C}),o===2&&e.jsx(Me,{items:c,setCode:Y,setDelivery:V,cart:t,setSale:E,setCart:a,onContinue:()=>i(3),noContinue:()=>i(1),subTotal:m,envio:N,setEnvio:M,igv:x,fleteTotal:_,seguroImportacionTotal:y,derechoArancelarioTotal:q,totalFinal:C,user:n,ubigeos:u}),o===3&&e.jsx(Re,{code:$,delivery:A,cart:T,subTotal:m,envio:N,igv:x,totalFinal:C})]})})}export{is as default};
