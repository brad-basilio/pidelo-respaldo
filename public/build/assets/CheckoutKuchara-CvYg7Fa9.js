import{j as e}from"./AboutHeader-ClKiNAEV.js";import{r as p}from"./index-DFv2mRv-.js";import{N as x}from"./Number2Currency-e57Tgsuk.js";import{r as M}from"./server.browser-D9g_Vj5o.js";import{L as o}from"./LaravelSession-Dz9cpV3l.js";import{c as v}from"./createLucideIcon-CC2OGGjd.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=v("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=v("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),R=({data:P,cart:u,setCart:D,items:h,prefixes:f})=>{const[l,b]=p.useState("pickup"),[c,N]=p.useState({name:o.name,lastname:o.lastname,dni:o.dni,email:o.email,phone_prefix:o.phone_prefix||"51",phone:o.phone}),[n,y]=p.useState({departamento:"",provincia:"",distrito:"",calle:"",numero:"",referencia:""}),g=u.reduce((s,r)=>{const a=r.discount>0?Math.min(r.price,r.discount):r.price;return s+a*r.quantity},0),d=s=>{const{name:r,value:a}=s.target;N(m=>({...m,[r]:a}))},[t,k]=p.useState(0),w=s=>{if(l==="pickup")return 0;const r=j.find(a=>a.id==s);return r?(console.log(r),r.price===null?"destination":r.price===0?0:r.price):null},i=s=>{const{name:r,value:a}=s.target;y(m=>({...m,[r]:a})),r==="distrito"&&(console.log(a),k(w(a)))};p.useEffect(()=>{const s=r=>{const a=r.element.dataset.code,m=r.element.dataset.flag;return M(e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-8 font-emoji text-center",children:m}),e.jsx("b",{className:"me-1",children:r.text}),e.jsx("span",{className:"text-sm text-opacity-20",children:a})]}))};$(".select2-prefix-selector").select2({dropdownCssClass:"py-1",containerCssClass:"!border !border-gray-300 !rounded p-2 !h-[42px]",arrowCssClass:'!text-primary top-1/2 -translate-y-1/2"',templateResult:function(r){if(!r.id)return r.text;var a=$(s(r));return a},templateSelection:function(r){if(!r.id)return r.text;var a=$(s(r));return a}})},[null]);const C=[...new Set(h.map(s=>{var r;return(r=s.data)==null?void 0:r.region}))],S=[...new Set(h.filter(s=>{var r;return((r=s.data)==null?void 0:r.region)==n.departamento}).map(s=>{var r;return(r=s.data)==null?void 0:r.provincia}))],j=[...new Set(h.filter(s=>{var r,a;return((r=s.data)==null?void 0:r.region)==n.departamento&&((a=s.data)==null?void 0:a.provincia)==n.provincia}).map(s=>{var r,a;return{id:(r=s.data)==null?void 0:r.reniec,name:(a=s.data)==null?void 0:a.distrito,price:s.price===null?null:Number(s.price)}}))];return e.jsx("section",{className:"bg-white",children:e.jsx("div",{className:"container mx-auto px-[5%] py-[2.5%]",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Información del contacto"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm mb-1",children:"Nombre"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",value:c.nombre,onChange:d,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apellido",className:"block text-sm mb-1",children:"Apellido"}),e.jsx("input",{type:"text",id:"apellido",name:"apellido",value:c.apellido,onChange:d,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Apellido"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"dni",className:"block text-sm mb-1",children:"DNI"}),e.jsx("input",{type:"text",id:"dni",name:"dni",value:c.dni,onChange:d,className:"w-full p-2 border border-gray-300 rounded",placeholder:"00000000",maxLength:8})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm mb-1",children:"E-mail"}),e.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:d,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Correo electrónico"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"celular",className:"block text-sm mb-1",children:"Celular"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"select2-prefix-selector w-[200px] p-2 border border-gray-300 rounded",onChange:s=>setSelectedPrefix(s.target.value),children:[e.jsx("option",{value:"",children:"Selecciona un país"}),f.sort((s,r)=>s.country.localeCompare(r.country)).map((s,r)=>e.jsx("option",{value:s.realCode,"data-code":s.beautyCode,"data-flag":s.flag,children:s.country},r))]}),e.jsx("input",{type:"text",id:"celular",name:"celular",value:c.celular,onChange:d,className:"flex-1 p-2 border border-gray-300 rounded",placeholder:"000 000 000"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Dirección de envío"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`flex flex-col p-6 rounded-lg border-2 cursor-pointer ${l==="pickup"?"border-primary bg-gray-100":"border-gray-200"}`,onClick:()=>b("pickup"),children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-2 flex items-center justify-center ${l==="pickup"?"border-primary":"border-gray-400"}`,children:l==="pickup"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),e.jsx(L,{className:"w-5 h-5 mr-2 text-gray-700"}),e.jsx("span",{className:"font-medium",children:"Recojo en tienda"})]}),e.jsx("p",{className:"text-sm text-gray-500 ml-9",children:"Envío gratis"})]}),e.jsxs("div",{className:`flex flex-col p-6 rounded-lg border-2 cursor-pointer ${l==="express"?"border-primary bg-gray-100":"border-gray-200"}`,onClick:()=>b("express"),children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-2 flex items-center justify-center ${l==="express"?"border-primary":"border-gray-400"}`,children:l==="express"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),e.jsx(F,{className:"w-5 h-5 mr-2 text-gray-700"}),e.jsx("span",{className:"font-medium",children:"Envío express"})]}),e.jsx("p",{className:"text-sm text-gray-500 ml-9",children:"Sujeto a evaluación"})]})]}),l==="express"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"departamento",className:"block text-sm mb-1",children:"Departamento"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"departamento",name:"departamento",value:n.departamento,onChange:i,className:"w-full p-2 border border-gray-300 rounded appearance-none pr-8",children:[e.jsx("option",{value:"",children:"Selecciona un Departamento"}),C.sort((s,r)=>s.localeCompare(r)).map((s,r)=>e.jsx("option",{value:s,children:s},r))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"provincia",className:"block text-sm mb-1",children:"Provincia"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"provincia",name:"provincia",value:n.provincia,onChange:i,className:"w-full p-2 border border-gray-300 rounded appearance-none pr-8",children:[e.jsx("option",{value:"",children:"Selecciona un Provincia"}),S.sort((s,r)=>s.localeCompare(r)).map((s,r)=>e.jsx("option",{value:s,children:s},r))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"distrito",className:"block text-sm mb-1",children:"Distrito"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"distrito",name:"distrito",value:n.distrito,onChange:i,className:"w-full p-2 border border-gray-300 rounded appearance-none pr-8",children:[e.jsx("option",{value:"",children:"Selecciona un distrito"}),j.sort((s,r)=>s.name.localeCompare(r)).map((s,r)=>e.jsx("option",{value:s.id,"data-price":s.price,children:s.name},r))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"calle",className:"block text-sm mb-1",children:"Avenida / Calle / Jirón"}),e.jsx("input",{type:"text",id:"calle",name:"calle",value:n.calle,onChange:i,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Ingresa el nombre de la calle"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"numero",className:"block text-sm mb-1",children:"Número"}),e.jsx("input",{type:"text",id:"numero",name:"numero",value:n.numero,onChange:i,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Ingresa el número de la calle"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"referencia",className:"block text-sm mb-1",children:"Dpto./ Interior/ Piso/ Lote/ Bloque (opcional)"}),e.jsx("input",{type:"text",id:"referencia",name:"referencia",value:n.referencia,onChange:i,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Ejem. Casa 3, Dpto 101"})]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Resumen del pedido"}),e.jsx("div",{className:"space-y-6 mb-6",children:u.map((s,r)=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16",children:e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-16 object-cover object-center aspect-[4/3] rounded"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium line-clamp-2 leading-none mb-2",children:s.name||`Producto ${r+1}`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",s.sku||"0908824"]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("div",{className:"border border-gray-300 rounded w-12 text-center py-0.5 text-sm bg-white",children:s.quantity.toString().padStart(2,"0")}),e.jsxs("span",{className:"font-medium",children:["S/ ",x(s.price)]})]})]})]},r))}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:"Envío"}),e.jsxs("span",{className:"text-primary font-medium",children:[l==="pickup"&&"Gratis",l==="express"&&(t===0?"Gratis":t===null?"No disponible":t==="destination"?"Pago en destino":`S/ ${x(t)}`)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:"Subtotal"}),e.jsxs("span",{children:["S/ ",x(g)]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold text-lg pt-2 border-t border-gray-200",children:[e.jsx("p",{children:"Total"}),e.jsxs("span",{children:["S/ ",x(g+(typeof t=="number"?t:0))]})]}),e.jsx("button",{className:`text-white w-full px-4 py-3 rounded-full cursor-pointer inline-block text-center font-medium mt-4 ${l==="express"&&(t===null||t==="destination")?"bg-gray-400 cursor-not-allowed":"bg-primary"}`,children:"Siguiente"})]})]})})]})})})};export{R as default};
