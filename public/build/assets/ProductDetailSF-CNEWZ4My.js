import{j as s}from"./AboutHeader-ClKiNAEV.js";import{r as n}from"./index-DFv2mRv-.js";import{I as A}from"./ItemsRest-DK8CnWHO.js";import{S as R}from"./ProductCard-NsyC22vv.js";import"./main-rZoj-gSW.js";import{C as O}from"./HeaderSearch-fmi4lDBf.js";import{i as y}from"./tippy-react.esm-CGYKl-Jd.js";/* empty css              */import P from"./ProductNavigation-CX6vjgP-.js";import{C as U}from"./circle-check-BhyqUf7L.js";import{C as B}from"./chevron-up-CzB__C-t.js";import{C as z}from"./chevron-down-Bgb5hLdB.js";import"./ModalImportItem-DaJ_kNWW.js";import"./___vite-browser-external_commonjs-proxy-BQdpDcDf.js";import"./index-BOPJobjj.js";import"./index-Sd7so-oN.js";import"./index-Cevqm-zP.js";import"./CartItemRow-CWsNppc-.js";import"./Number2Currency-e57Tgsuk.js";import"./adjustTextColor-FzLvY4Q1.js";import"./ProductCardSimple-8FCO5l_y.js";import"./createLucideIcon-CC2OGGjd.js";import"./arrow-right-D11cOEFs.js";function fs({item:e,data:H,setCart:x,cart:o}){var m,j,b,N,v;console.log("VENIMOS DESDE ITEM DE PRODUCTDETAIL SF:",e);const d=new A,[u,p]=n.useState(!1),[c,h]=n.useState({url:e==null?void 0:e.image,type:"main"}),[f,w]=n.useState(1),k=a=>{let l=parseInt(a.target.value,10);(isNaN(l)||l<1)&&(l=1),l>10&&(l=10),w(l)},[C,L]=n.useState(!1),S=a=>{const l=structuredClone(o),r=l.findIndex(t=>t.id==a.id);r==-1?l.push({...a,quantity:f}):l[r].quantity++,x(l),R.fire({title:"Producto agregado",text:`Se agregó ${a.name} al carrito`,icon:"success",timer:1500})},[E,I]=n.useState([]),[F,$]=n.useState([]),[g,M]=n.useState([]);o==null||o.find(a=>a.id==(e==null?void 0:e.id)),n.useEffect(()=>{e!=null&&e.id&&(V(e),T(e),D(e),_(e))},[e]);const D=async a=>{try{const l={id:a==null?void 0:a.id};if(console.log(l),!await d.updateViews(l))return}catch{return}},T=async a=>{try{const l={id:a==null?void 0:a.id},r=await d.verifyCombo(l);if(!r)return;const t=r[0].associated_items;I(Object.values(t))}catch{return}},V=async a=>{try{const l={id:a==null?void 0:a.id},r=await d.productsRelations(l);if(!r)return;const t=r;$(Object.values(t)),console.log(t)}catch{return}},_=async a=>{try{const l={slug:a==null?void 0:a.slug},r=await d.getVariations(l);if(!r)return;const t=r;M(t.variants),console.log(t)}catch{return}};E.reduce((a,l)=>a+parseFloat(l.final_price),0);const[i,q]=n.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-primary mx-auto py-12 bg-white",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 md:p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("button",{onClick:()=>h({url:e==null?void 0:e.image,type:"main"}),className:`w-16 h-16  rounded-lg p-2 border-2 ${c.url===(e==null?void 0:e.image)?"border-primary ":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${e==null?void 0:e.image}`,alt:"Main Thumbnail",className:"w-full h-full object-contain",onError:a=>a.target.src="/api/cover/thumbnail/null"})}),e==null?void 0:e.images.map((a,l)=>s.jsx("button",{onClick:()=>h({url:a.url,type:"gallery"}),className:`w-16 h-16 border-2 rounded-lg p-2 ${c.url===a.url?"border-primary":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${a.url}`,alt:`Thumbnail ${l+1}`,className:"w-full h-full object-contain",onError:r=>r.target.src="/api/cover/thumbnail/null"})},l))]}),s.jsx("div",{className:"flex-1",children:s.jsx("img",{src:c.type==="main"?`/storage/images/item/${c.url}`:`/storage/images/item/${c.url}`,onError:a=>a.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full h-auto object-contain"})})]})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"font-font-general",children:[s.jsxs("p",{className:"customtext-neutral-light text-sm 2xl:text-lg",children:["Marca:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:e==null?void 0:e.brand.name})]}),s.jsx("h1",{className:"customtext-neutral-dark text-3xl lg:text-4xl 2xl:text-5xl font-bold mt-2",children:e==null?void 0:e.name})]}),s.jsxs("div",{className:"flex flex-wrap customtext-neutral-light items-center gap-y-2  gap-x-8 text-sm font-font-general",children:[s.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["SKU:"," ",s.jsx("span",{className:"customtext-neutral-dark font-bold",children:e==null?void 0:e.sku})]}),s.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["Disponibilidad:"," ",s.jsx("span",{className:"customtext-neutral-dark font-bold",children:(e==null?void 0:e.stock)>0?"En stock":"Agotado"})]})]}),s.jsxs("div",{className:"flex flex-col w-full xl:w-1/2 !font-font-general max-w-xl mt-5",children:[s.jsxs("p",{className:"text-sm 2xl:text-base customtext-neutral-light",children:["Precio:"," ",s.jsxs("span",{className:"line-through",children:["S/ ",e==null?void 0:e.price]})]}),s.jsxs("div",{className:"flex flex-row items-center gap-4 relative",children:[s.jsxs("span",{className:"text-[40px] font-bold customtext-neutral-dark",children:["S/ ",e==null?void 0:e.final_price]}),s.jsxs("span",{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl text-base",children:["-",Number(e==null?void 0:e.discount_percent).toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"variants-selector flex flex-col gap-3",children:[s.jsx("h3",{className:"w-full block opacity-85 customtext-neutral-dark text-sm 2xl:text-base",children:"Colores"}),s.jsxs("div",{className:"flex gap-3 items-center justify-start w-full flex-wrap",children:[s.jsx(y,{content:e.color,children:s.jsx("a",{className:`variant-option rounded-full object-fit-cover  ${g.some(a=>a.slug===e.slug)?"":"active p-[2px] border-[1.5px] border-neutral-dark"}`,children:s.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover ",src:`/storage/images/item/${e.texture}`})})}),g.map(a=>s.jsx(y,{content:a.color,children:s.jsx("a",{href:`/product/${a.slug}`,className:"variant-option  rounded-full object-fit-cover ",children:s.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover ",src:`/storage/images/item/${a.texture}`})},a.slug)}))]})]}),s.jsx("div",{className:"flex flex-col mt-8",children:s.jsx("div",{className:"flex items-center gap-4 mb-2",children:s.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm 2xl:text-base",children:[s.jsx("span",{className:"opacity-85",children:"Cantidad"}),s.jsx("div",{className:"relative flex items-center border rounded-md px-2 py-1",children:s.jsx("input",{type:"number",value:f,onChange:k,min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})}),s.jsx("span",{className:"opacity-85",children:"Máximo 10 unidades."})]})})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("button",{onClick:()=>{S(e),p(!u)},className:"w-full font-font-general text-base 2xl:text-lg bg-primary text-white py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-3",children:"Agregar al carrito"}),s.jsx("button",{className:"w-full font-font-general text-base 2xl:text-lg customtext-neutral-dark border border-neutral-dark py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-4",children:"Comprar"})]}),((m=e==null?void 0:e.specifications)==null?void 0:m.length)>0&&s.jsx("div",{className:"flex-1 w-full",children:s.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl p-6",children:[s.jsx("h3",{className:"font-semibold text-lg xl:text-xl 2xl:text-2xl mb-4 customtext-neutral-dark font-font-general",children:"Especificaciones principales"}),s.jsx("ul",{className:`space-y-1  customtext-neutral-light  mb-4 list-disc transition-all duration-300 ${i?"max-h-full":"max-h-20 overflow-hidden"}`,style:{listStyleType:"disc"},children:e==null?void 0:e.specifications.map((a,l)=>a.type==="principal"&&s.jsxs("li",{className:"gap-2 customtext-primary opacity-85 flex flex-row items-center",children:[s.jsx(U,{className:"customtext-primary w-4 h-4"}),a.description]},l))}),s.jsxs("button",{className:"font-semibold flex flex-row gap-2 items-center text-base xl:text-[17px] 2xl:text-xl mb-4 customtext-neutral-dark font-font-general pb-2 border-b border-neutral-dark",onClick:()=>q(!i),children:[i?"Ver menos":"Ver más especificaciones",i?s.jsx(B,{className:"w-4 h-4"}):s.jsx(z,{className:"w-4 h-4"})]})]})}),s.jsx("div",{className:"w-full mt-5",children:s.jsxs("div",{className:"bg-[#F7F9FB] flex flex-row rounded-xl p-5 gap-3",children:[s.jsx("img",{src:"/assets/img/salafabulosa/whatsapp.png",onError:a=>a.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-12 h-12 object-contain",loading:"lazy"}),s.jsx("div",{className:"customtext-neutral-dark font-font-general text-base  2xl:text-xl font-semibold",children:s.jsxs("p",{children:["¿Tienes dudas sobre este producto? Haz"," ",s.jsx("span",{className:"underline",children:"clic aquí"})," ","y chatea con nosotros por WhatsApp"]})})]})})]})]})}),s.jsxs("div",{className:"grid gap-10 lg:gap-20 md:grid-cols-2 bg-white rounded-xl p-8 font-font-general",children:[((j=e==null?void 0:e.specifications)==null?void 0:j.length)>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Especificaciones"}),s.jsx("div",{className:"space-y-1",children:e.specifications.map((a,l)=>a.type==="general"&&s.jsxs("div",{className:`grid grid-cols-2 gap-4 p-3 ${l%2===0?"bg-[#F7F9FB]":"bg-white"}`,children:[s.jsx("div",{className:"customtext-neutral-light opacity-85",children:a.title}),s.jsx("div",{className:"customtext-neutral-dark",children:a.description})]},l))})]}),s.jsxs("div",{className:"font-font-general",children:[((b=e==null?void 0:e.description)==null?void 0:b.replace(/<[^>]+>/g,""))&&s.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Información adicional"}),s.jsxs("div",{className:`space-y-2 ${C?"":"max-h-[400px] overflow-hidden"}`,children:[((N=e==null?void 0:e.description)==null?void 0:N.replace(/<[^>]+>/g,""))&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),s.jsx("div",{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:e==null?void 0:e.description}})]}),((v=e==null?void 0:e.features)==null?void 0:v.length)>0&&s.jsx("div",{className:"pl-10",children:s.jsx("ul",{className:"list-disc pl-5 space-y-2",children:e==null?void 0:e.features.map((a,l)=>s.jsx("li",{className:"customtext-neutral-dark",children:a.feature},l))})})]})]})]})]}),s.jsx(P,{items:F,cart:o,setCart:x}),s.jsx(O,{cart:o,setCart:x,modalOpen:u,setModalOpen:p})]})}export{fs as default};
