var d=Object.defineProperty;var y=(n,e,o)=>e in n?d(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o;var i=(n,e,o)=>y(n,typeof e!="symbol"?e+"":e,o);import"./AboutHeader-ClKiNAEV.js";import"./index-DFv2mRv-.js";import{m as r}from"./main-rZoj-gSW.js";import"./___vite-browser-external_commonjs-proxy-BQdpDcDf.js";let c=new AbortController;class m{constructor(){i(this,"path",null);i(this,"hasFiles",!1);i(this,"simpleGet",async(e,o)=>{try{const{status:t,result:s}=await r.Fetch(e,o);if(!t)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return s.data??!0}catch(t){r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"})}});i(this,"paginate",async e=>{c.abort("Nothing"),c=new AbortController;const o=c.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(e),signal:o})).json()});i(this,"save",async(e,o=()=>{})=>{try{let t=!1,s={};if(this.hasFiles){const a=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))},body:e});t=a.ok,s=JSON.parseable(await a.text())}else{const a=await r.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(e)});t=a.status,s=a.result}if(!t)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),o==null||o(),s}catch(t){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),null}});i(this,"status",async({id:e,status:o})=>{try{const{status:t,result:s}=await r.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:e,status:o})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(t){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),!1}});i(this,"boolean",async({id:e,field:o,value:t})=>{try{const{status:s,result:a}=await r.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:e,field:o,value:t})});if(!s)throw new Error((a==null?void 0:a.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:a.message,type:"success"}),!0}catch(s){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),!1}});i(this,"delete",async e=>{try{const{status:o,result:t}=await r.Fetch(`/api/${this.path}/${e}`,{method:"DELETE"});if(!o)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(o){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:o.message,type:"danger"}),!1}});i(this,"get",async(e={},o=[])=>{try{let t=`/api/${this.path}`;if(typeof e=="string"||typeof e=="number")t+=`/${e}`;else if(typeof e=="object"&&Object.keys(e).length>0){const a=new URLSearchParams(e).toString();t+=`?${a}`}if(o.length>0){const a=o.join(",");t+=`${t.includes("?")?"&":"?"}with=${a}`}const s=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))}});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);return await s.json()}catch(t){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),null}})}}export{m as B};
