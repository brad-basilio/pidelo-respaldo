import{j as s}from"./AboutHeader-ClKiNAEV.js";import{r as o}from"./index-DFv2mRv-.js";import{I as T}from"./ItemsRest-DK8CnWHO.js";import{S as V}from"./ProductCard-NsyC22vv.js";import{m as D}from"./main-rZoj-gSW.js";import U from"./ProductInfinite-DFiqmauo.js";import{C as O}from"./HeaderSearch-C6xLnU5a.js";import{C as k}from"./circle-check-BhyqUf7L.js";import{C as F}from"./chevron-up-CzB__C-t.js";import{C as g}from"./chevron-down-Bgb5hLdB.js";import{S as C}from"./shopping-cart-DH8mvArW.js";import{P as S}from"./plus-DqVREqgL.js";import{S as E,H,C as K}from"./square-check-big-BW2MRcTP.js";import{S as L}from"./store-BUZzR8ZV.js";import{P as Q}from"./phone-WjXaoKsg.js";import"./ModalImportItem-DaJ_kNWW.js";import"./___vite-browser-external_commonjs-proxy-BQdpDcDf.js";import"./CardHoverBtn-QWQ9q_gA.js";import"./adjustTextColor-FzLvY4Q1.js";import"./tag-DhWNze6X.js";import"./createLucideIcon-CC2OGGjd.js";import"./chevron-right--XtiYjfH.js";import"./index-BOPJobjj.js";import"./index-Sd7so-oN.js";import"./index-Cevqm-zP.js";import"./CartItemRow-BRRZMnl0.js";import"./tippy-react.esm-CGYKl-Jd.js";import"./Number2Currency-e57Tgsuk.js";import"./minus-C_LiTw_8.js";function ws({item:e,data:z,setCart:x,cart:d}){const p=new T,[u,h]=o.useState(!1),[i,f]=o.useState({url:e==null?void 0:e.image,type:"main"}),[m,I]=o.useState(1),N=a=>{let l=parseInt(a.target.value,10);(isNaN(l)||l<1)&&(l=1),l>10&&(l=10),I(l)},[j,$]=o.useState(!1),b=a=>{const l=structuredClone(d),t=l.findIndex(n=>n.id==a.id);t==-1?l.push({...a,quantity:m}):l[t].quantity++,x(l),V.fire({title:"Producto agregado",text:`Se agregó ${a.name} al carrito`,icon:"success",timer:1500})},[r,P]=o.useState([]),[A,B]=o.useState([]);d==null||d.find(a=>a.id==(e==null?void 0:e.id)),o.useEffect(()=>{e!=null&&e.id&&(M(e),q(e),_(e))},[e]);const _=async a=>{try{const l={id:a==null?void 0:a.id};if(console.log(l),!await p.updateViews(l))return}catch{return}},q=async a=>{try{const l={id:a==null?void 0:a.id},t=await p.verifyCombo(l);if(!t)return;const n=t[0].associated_items;P(Object.values(n))}catch{return}},M=async a=>{try{const l={id:a==null?void 0:a.id},t=await p.productsRelations(l);if(!t)return;const n=t;B(Object.values(n)),console.log(n)}catch{return}},v=r.reduce((a,l)=>a+parseFloat(l.final_price),0),[c,y]=o.useState(!1),w=()=>{x(a=>{const l=structuredClone(a);return[...r,e].forEach(t=>{const n=l.findIndex(R=>R.id===t.id);n===-1?l.push({...t,quantity:m}):l[n].quantity++}),l}),D.Notify.add({icon:"/assets/img/icon.svg",title:"Carrito de Compras",body:"Se agregaron con éxito los productos"})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-primary mx-auto py-12 bg-[#F7F9FB] ",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 md:p-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"mb-6 md:hidden",children:[s.jsxs("p",{className:"customtext-neutral-light text-sm",children:["Marca:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:e==null?void 0:e.brand.name})]}),s.jsx("h1",{className:"customtext-neutral-dark text-[28px] md:text-[40px] font-bold mt-2",children:e==null?void 0:e.name})]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("button",{onClick:()=>f({url:e==null?void 0:e.image,type:"main"}),className:`w-16 h-16  rounded-lg p-2 border-2 ${i.url===(e==null?void 0:e.image)?"border-primary ":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${e==null?void 0:e.image}`,alt:"Main Thumbnail",className:"w-full h-full object-contain",onError:a=>a.target.src="/api/cover/thumbnail/null"})}),e==null?void 0:e.images.map((a,l)=>s.jsx("button",{onClick:()=>f({url:a.url,type:"gallery"}),className:`w-16 h-16 border-2 rounded-lg p-2 ${i.url===a.url?"border-primary":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${a.url}`,alt:`Thumbnail ${l+1}`,className:"w-full h-full object-contain",onError:t=>t.target.src="/api/cover/thumbnail/null"})},l))]}),s.jsx("div",{className:"flex-1",children:s.jsx("img",{src:i.type==="main"?`/storage/images/item/${i.url}`:`/storage/images/item/${i.url}`,onError:a=>a.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full h-auto object-contain"})})]}),s.jsxs("div",{className:"flex lg:hidden flex-col customtext-neutral-light justify-start items-start gap-2 text-sm mb-6",children:[s.jsxs("span",{className:"customtext-neutral-light text-sm",children:["SKU:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:e==null?void 0:e.sku})]}),s.jsxs("span",{className:"ustomtext-neutral-light text-sm",children:["Disponibilidad:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:(e==null?void 0:e.stock)>0?"En stock":"Agotado"})]})]}),s.jsx("div",{className:"flex lg:hidden gap-8 border-b-2 pb-8",children:s.jsxs("div",{className:" w-full ",children:[s.jsxs("p",{className:"text-sm customtext-neutral-light mb-1",children:["Precio:"," ",s.jsxs("span",{className:"line-through line-clamp-1",children:["S/ ",e==null?void 0:e.price]})]}),s.jsxs("div",{className:"flex items-center gap-4 ",children:[s.jsxs("span",{className:"text-[40px] font-bold line-clamp-1",children:["S/ ",e==null?void 0:e.final_price]}),s.jsxs("span",{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl",children:["-",Number(e==null?void 0:e.discount_percent).toFixed(1),"%"]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"flex items-center gap-4 mb-2",children:s.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm",children:[s.jsx("span",{className:"",children:"Cantidad"}),s.jsx("div",{className:"relative flex items-center border rounded-md px-2 py-1",children:s.jsx("input",{type:"number",value:m,onChange:N,min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})}),s.jsx("span",{className:"",children:"Máximo 10 unidades."})]})})}),s.jsx("button",{onClick:()=>{b(e),h(!u)},className:"w-full bg-primary text-white py-3 font-bold shadow-lg rounded-xl hover:opacity-90 transition-all duration-300 mt-4",children:"Agregar al carrito"})]})}),s.jsx("div",{className:"block lg:hidden flex-1 w-full ",children:s.jsxs("div",{className:"bg-[#F7F9FB] rounded-lg p-6",children:[s.jsx("h3",{className:"font-medium text-sm mb-4",children:"Especificaciones principales"}),s.jsx("ul",{className:`space-y-2  customtext-neutral-light mb-4 transition-all duration-300 ${c?"max-h-full":"max-h-24 overflow-hidden"}`,style:{listStyleType:"disc"},children:e==null?void 0:e.specifications.map((a,l)=>a.type==="principal"&&s.jsxs("li",{className:"flex gap-2",children:[s.jsx(k,{className:"customtext-primary"}),a.description]},l))}),s.jsxs("button",{className:"customtext-primary text-sm font-semibold hover:underline flex items-center gap-1 transition-all duration-300",onClick:()=>y(!c),children:[c?"Ver menos":"Ver más especificaciones",c?s.jsx(F,{className:"w-4 h-4"}):s.jsx(g,{className:"w-4 h-4"})]})]})}),s.jsxs("div",{className:"block lg:hidden mt-8 ",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(C,{className:"w-6 h-6 customtext-primary"}),s.jsx("h2",{className:"text-base font-semibold",children:"Completa tu compra con estos productos"})]}),s.jsx("div",{className:" flex gap-4",children:s.jsx("div",{className:"w-2/3 flex gap-2",children:r.map((a,l)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:`/storage/images/item/${a.image}`,className:" rounded-lg aspect-square w-24 h-24 object-cover bg-[#F7F9FB]",onError:t=>t.target.src="/api/cover/thumbnail/null"}),l<r.length-1&&s.jsx("span",{className:"text-2xl font-bold",children:s.jsx(S,{})})]},l))})}),r.map((a,l)=>s.jsxs("div",{className:"flex mt-4 gap-4 p-4 border rounded-lg items-center",children:[s.jsx(E,{className:"w-5 h-5 customtext-primary"}),s.jsxs("div",{className:"flex-1 font-semibold",children:[s.jsx("span",{className:"text-[10px] customtext-neutral-dark block",children:a.brand.name}),s.jsx("p",{className:"text-sm customtext-neutral-light font-medium",children:a.name})]}),s.jsxs("p",{className:"font-bold customtext-neutral-dark",children:["S/"," ",parseFloat(a.final_price).toFixed(2)]})]},l)),s.jsxs("div",{className:" w-full flex flex-col justify-start items-start bg-gray-50 p-4 rounded-lg mt-4",children:[s.jsx("span",{className:"text-xs font-semibold customtext-neutral-light",children:"Total"}),s.jsxs("p",{className:"font-bold mb-2 customtext-neutral-dark",children:["S/ ",v.toFixed(2)]}),s.jsx("button",{onClick:()=>w(),className:"bg-primary text-xs font-semibold text-white w-max py-3 px-6 rounded-xl hover:opacity-90 transition-all duration-300 hover:shadow-md",children:"Agregar al carrito"})]})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsxs("div",{className:"flex gap-6 items-center justify-center py-4 customtext-neutral-dark",children:[s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"bg-[#F7F9FB] py-4 px-5 rounded-full w-max h-max",children:s.jsx(H,{className:"w-6 h-6 mx-auto mb-1 customtext-primary"})}),s.jsx("p",{className:"font-semibold text-sm",children:"Despacho"}),s.jsx("p",{className:"font-semibold text-sm",children:"a domicilio"})]}),s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("div",{className:"bg-[#F7F9FB] py-4 px-5 rounded-full w-max h-max",children:s.jsx(L,{className:"w-6 h-6 mx-auto mb-1 customtext-primary"})}),s.jsx("p",{className:"font-semibold text-sm",children:"Retira"}),s.jsx("p",{className:"font-semibold text-sm",children:"en tienda"})]})]})}),s.jsxs("div",{className:"mt-8 bg-[#F7F9FB] rounded-lg p-6 space-y-4 customtext-neutral-dark",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Q,{className:"w-5 h-5 customtext-primary"}),s.jsx("span",{className:"text-sm font-semibold",children:"¿Necesitas ayuda? Llámanos al 012037074"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm ",children:[s.jsx(K,{className:"w-5 h-5 customtext-primary"}),s.jsx("span",{className:"text-sm font-semibold",children:"Soporte técnico"})]})]})]}),s.jsxs("div",{className:"hidden md:block",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"customtext-neutral-light text-sm",children:["Marca:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:e==null?void 0:e.brand.name})]}),s.jsx("h1",{className:"customtext-neutral-dark text-[40px] font-bold mt-2",children:e==null?void 0:e.name})]}),s.jsxs("div",{className:"flex customtext-neutral-light items-center gap-8 text-sm mb-6",children:[s.jsxs("span",{className:"customtext-neutral-light text-sm",children:["SKU:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:e==null?void 0:e.sku})]}),s.jsxs("span",{className:"ustomtext-neutral-light text-sm",children:["Disponibilidad:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:(e==null?void 0:e.stock)>0?"En stock":"Agotado"})]})]}),s.jsxs("div",{className:"flex gap-8 border-b-2 pb-8",children:[s.jsx("div",{className:"flex-1 w-6/12 ",children:s.jsxs("div",{className:"bg-[#F7F9FB] rounded-lg p-6",children:[s.jsx("h3",{className:"font-medium text-sm mb-4",children:"Especificaciones principales"}),s.jsx("ul",{className:`space-y-2  customtext-neutral-light mb-4 transition-all duration-300 ${c?"max-h-full":"max-h-24 overflow-hidden"}`,style:{listStyleType:"disc"},children:e==null?void 0:e.specifications.map((a,l)=>a.type==="principal"&&s.jsxs("li",{className:"flex gap-2",children:[s.jsx(k,{className:"customtext-primary"}),a.description]},l))}),s.jsxs("button",{className:"customtext-primary text-sm font-semibold hover:underline flex items-center gap-1 transition-all duration-300",onClick:()=>y(!c),children:[c?"Ver menos":"Ver más especificaciones",c?s.jsx(F,{className:"w-4 h-4"}):s.jsx(g,{className:"w-4 h-4"})]})]})}),s.jsxs("div",{className:" w-6/12 ",children:[s.jsxs("p",{className:"text-sm customtext-neutral-light mb-1",children:["Precio:"," ",s.jsxs("span",{className:"line-through",children:["S/ ",e==null?void 0:e.price]})]}),s.jsxs("div",{className:"flex items-center gap-4 relative ",children:[s.jsxs("span",{className:"text-[40px] font-bold ",children:["S/ ",e==null?void 0:e.final_price]}),s.jsxs("span",{className:" absolute -top-8 right-0 bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl",children:["-",Number(e==null?void 0:e.discount_percent).toFixed(1),"%"]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"flex items-center gap-4 mb-2",children:s.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm",children:[s.jsx("span",{className:"",children:"Cantidad"}),s.jsx("div",{className:"relative flex items-center border rounded-md px-2 py-1",children:s.jsx("input",{type:"number",value:m,onChange:N,min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})}),s.jsx("span",{className:"",children:"Máximo 10 unidades."})]})})}),s.jsx("button",{onClick:()=>{b(e),h(!u)},className:"w-full bg-primary text-white py-3 font-bold shadow-lg rounded-xl hover:opacity-90 transition-all duration-300 mt-4",children:"Agregar al carrito"})]})]}),r&&r.length>0&&s.jsxs("div",{className:"mt-8 ",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(C,{className:"w-6 h-6 customtext-primary"}),s.jsx("h2",{className:"text-base font-semibold",children:"Completa tu compra con estos productos"})]}),s.jsxs("div",{className:" flex gap-4",children:[s.jsx("div",{className:"w-2/3 flex gap-2",children:r.map((a,l)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:`/storage/images/item/${a.image}`,className:" rounded-lg aspect-square w-24 h-24 object-cover bg-[#F7F9FB]",onError:t=>t.target.src="/api/cover/thumbnail/null"}),l<r.length-1&&s.jsx("span",{className:"text-2xl font-bold",children:s.jsx(S,{})})]},l))}),s.jsxs("div",{className:" w-1/3 flex flex-col justify-between items-end bg-gray-50 p-4 rounded-lg mt-4",children:[s.jsx("span",{className:"text-xs font-semibold customtext-neutral-light",children:"Total"}),s.jsxs("p",{className:"font-bold mb-2 customtext-neutral-dark",children:["S/ ",v.toFixed(2)]}),s.jsx("button",{onClick:()=>w(),className:"bg-primary text-xs font-semibold text-white w-full py-3 rounded-xl hover:opacity-90 transition-all duration-300 hover:shadow-md",children:"Agregar al carrito"})]})]}),r.map((a,l)=>s.jsxs("div",{className:"flex mt-4 gap-4 p-4 border rounded-lg items-center",children:[s.jsx(E,{className:"w-5 h-5 customtext-primary"}),s.jsxs("div",{className:"flex-1 font-semibold",children:[s.jsx("span",{className:"text-[10px] customtext-neutral-dark block",children:a.brand.name}),s.jsx("p",{className:"text-sm customtext-neutral-light font-medium",children:a.name})]}),s.jsxs("p",{className:"font-bold customtext-neutral-dark",children:["S/"," ",parseFloat(a.final_price).toFixed(2)]})]},l))]})]})]})}),s.jsxs("div",{className:" grid gap-20 md:grid-cols-2 bg-white rounded-xl p-8 mt-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-4",children:"Especificaciones"}),s.jsx("div",{className:"space-y-1",children:e==null?void 0:e.specifications.map((a,l)=>a.type==="general"&&s.jsxs("div",{className:`grid grid-cols-2 gap-4 p-4 ${l%2===0?"bg-[#F7F9FB]":"bg-white"}`,children:[s.jsx("div",{className:"customtext-neutral-light",children:a.title}),s.jsx("div",{className:"customtext-neutral-dark",children:a.description})]},l))})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-4",children:"Información adicional"}),s.jsxs("div",{className:`space-y-2 ${j?"":"max-h-[400px] overflow-hidden"}`,children:[s.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),s.jsx("div",{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:e==null?void 0:e.description}}),s.jsx("div",{className:"pl-10",children:s.jsx("ul",{className:"list-disc pl-5 space-y-2",children:e==null?void 0:e.features.map((a,l)=>s.jsx("li",{className:"customtext-neutral-dark",children:a.feature},l))})})]}),s.jsxs("botton",{variant:"ghost",className:"border-2 border-primary  w-max px-5 py-3  my-8  rounded-xl flex items-center gap-2 customtext-primary font-semibold cursor-pointer",onClick:()=>$(!j),children:["Ver más",s.jsx(g,{className:`transform transition-transform ${j?"rotate-180":""}`})]})]})]})]}),s.jsx(U,{data:{title:"Productos relacionados"},items:A,cart:d,setCart:x}),s.jsx(O,{cart:d,setCart:x,modalOpen:u,setModalOpen:h})]})}export{ws as default};
