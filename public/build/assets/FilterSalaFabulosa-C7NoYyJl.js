import{j as e}from"./AboutHeader-COUW3Uy_.js";import{r as i}from"./index-CqkZ-sT_.js";import"./ProductCard-DppMoL6U.js";import{I as O}from"./ItemsRest-pOcl9MCH.js";import"./HeaderSearch-BHrRgLch.js";import{L as V}from"./Loading-CS0Y7TJ8.js";import{N as Z}from"./NoResult-CKKmsI7-.js";import{S as z}from"./SelectForm-B3_ZzKEz.js";import{P as D}from"./ProductCardSimple-CJ8iI5W0.js";import{C as h}from"./chevron-down-CxOx8ByU.js";import{S as g}from"./search-DhoFIDMi.js";import{C as b,a as y}from"./chevron-right-B4p_OAUH.js";import"./main-MmatxeHN.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";import"./ModalImportItem-DkUpH6sg.js";import"./index-BdiKzPHY.js";import"./index-VLFqsz8m.js";import"./index-D7Vukm9p.js";import"./CartItemRow-DWjf7t3V.js";import"./tippy-react.esm-HYwDmlWP.js";import"./Number2Currency-e57Tgsuk.js";import"./check-CvqheCNB.js";import"./createLucideIcon-D0vxYqnu.js";const U=new O,fe=({items:v,data:q,filteredData:w,cart:N,setCart:C})=>{const{categories:u,brands:_,priceRanges:S}=w,[c,P]=i.useState({marca:!0,precio:!0,categoria:!0,colores:!1}),[n,o]=i.useState({category_id:[],brand_id:[],subcategory_id:[],price:null,name:null,sort_by:"created_at",order:"desc"}),[d,k]=i.useState([]),[L,x]=i.useState(!1),[G,R]=i.useState({currentPage:1,totalPages:1}),$=a=>{const r=[];if(a.category_id.length>0){const s=a.category_id.map(t=>["category_id","=",t]);r.push(["or",...s])}if(a.subcategory_id.length>0){const s=a.subcategory_id.map(t=>["subcategory_id","=",t]);r.push(["and",...s])}if(a.brand_id.length>0){const s=a.brand_id.map(t=>["brand_id","=",t]);r.push(["or",...s])}return a.price&&r.push(["and",[["final_price",">=",a.price.min],"and",["final_price","<=",a.price.max]]]),a.name&&r.push(["name","contains",a.name]),r},F=async(a=1)=>{x(!0);try{const s={filter:$(n),sort:n.sort,take:20},t=await U.paginate(s);k(t.data),R({currentPage:t.currentPage,totalPages:t.lastPage})}catch(r){console.error("Error fetching products:",r)}finally{x(!1)}};i.useEffect(()=>{F()},[n]),i.useEffect(()=>{const a=new URLSearchParams(window.location.search),r=a.get("category");if(r){const t=u.find(l=>l.slug===r);t&&o(l=>({...l,category_id:[t.id]}))}const s=a.get("search");s&&o(t=>({...t,name:s}))},[v]);const m=(a,r)=>{o(s=>{if(a==="price")return{...s,price:s.price&&s.price.min===r.min&&s.price.max===r.max?null:r};const t=Array.isArray(s[a])?s[a]:[],l=t.includes(r)?t.filter(K=>K!==r):[...t,r];return{...s,[a]:l}})},p=a=>{P(r=>({...r,[a]:!r[a]}))},M=[{value:"created_at:desc",label:"Más reciente"},{value:"created_at:asc",label:"Mas antiguo"},{value:"final_price:asc",label:"Precio: Menor a Mayor"},{value:"final_price:desc",label:"Precio: Mayor a Menor"},{value:"name:asc",label:"Nombre: A-Z"},{value:"name:desc",label:"Nombre: Z-A"}],[f,A]=i.useState(""),[j,B]=i.useState(""),E=u.filter(a=>a.name.toLowerCase().includes(f.toLowerCase())),I=_.filter(a=>a.name.toLowerCase().includes(j.toLowerCase()));return e.jsx("section",{className:"py-12  font-font-general customtext-primary",children:e.jsx("div",{className:"mx-auto px-primary",children:e.jsxs("div",{className:"relative flex gap-4",children:[e.jsxs("div",{className:"w-1/5 bg-white p-4 rounded-lg h-max",children:[e.jsx("p",{className:"customtext-primary text-2xl font-bold pb-4 mb-4 border-b",children:"Combina como desees tu sala"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>p("marca"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Marca"}),e.jsx(h,{className:`h-5 w-5 transform transition-transform ${c.marca?"":"-rotate-180"}`})]}),c.marca&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:j,onChange:a=>B(a.target.value)})]}),e.jsx("div",{className:"space-y-3",children:I.map(a=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>m("brand_id",a.id)}),e.jsx("span",{children:a.name})]},a.id))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>p("categoria"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Categoría"}),e.jsx(h,{className:`h-5 w-5 transform transition-transform ${c.categoria?"":"-rotate-180"}`})]}),c.categoria&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:f,onChange:a=>A(a.target.value)})]}),E.map(a=>{var s,t;const r=(s=n.category_id)==null?void 0:s.includes(a.id);return e.jsx("div",{className:`group py-2 rounded-md ${r?"bg-secondary":"bg-transparent"}`,children:e.jsxs("label",{className:"flex items-center space-x-3 ",children:[e.jsx("input",{type:"checkbox",className:"h-4 hidden w-4 rounded border-gray-300",onChange:()=>m("category_id",a.id),checked:(t=n.category_id)==null?void 0:t.includes(a.id)}),e.jsx("img",{src:`/storage/images/category/${a.image}`,alt:a.name,className:"w-8 h-8 rounded-full object-cover",loading:"lazy"}),e.jsx("span",{children:a.name})]})},a.id)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>p("precio"),className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:"Precio"}),e.jsx(h,{className:`h-5 w-5 transform transition-transform ${c.precio?"":"-rotate-180"}`})]}),c.precio&&e.jsx("div",{className:"space-y-3",children:S.map(a=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",name:"precio",className:"h-4 w-4 rounded border-gray-300",onChange:()=>m("price",a),checked:n.price&&n.price.min===a.min&&n.price.max===a.max}),e.jsx("span",{children:`S/ ${a.min} - S/ ${a.max}`})]},`${a.min}-${a.max}`))})]})]}),e.jsxs("div",{className:"w-4/5 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 w-full",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("label",{className:"font-semibold text-sm w-[150px]",children:"Ordenar por"}),e.jsx(z,{options:M,placeholder:"Recomendados",onChange:a=>{const[r,s]=a.split(":"),t=[{selector:r,desc:s==="desc"}];o(l=>({...l,sort:t}))},labelKey:"label",valueKey:"value",className:"border-primary rounded-full customtext-primary"})]}),e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("nav",{class:"flex items-center gap-x-2 min-w-max",children:[e.jsx("a",{class:" p-4 inline-flex items-center  ",href:"javascript:;",children:e.jsx(b,{})}),e.jsx("a",{class:"w-10 h-10  bg-transparent p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;","aria-current":"page",children:"1"}),e.jsx("a",{class:"w-10 h-10 bg-primary text-white p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;",children:"2"}),e.jsx("a",{class:"w-10 h-10 bg-transparent  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;",children:"3"}),e.jsx("a",{class:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;",children:"..."}),e.jsx("a",{class:"w-10 h-10 bg-transparent  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;",children:"5"}),e.jsx("a",{class:" p-4 inline-flex items-center ",href:"javascript:;",children:e.jsx(y,{})})]})})]}),L?e.jsx(V,{}):e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(d)&&d.length>0?d.map(a=>e.jsx(D,{product:a,widthClass:"lg:w-1/3",cart:N,setCart:C},a.id)):e.jsx(Z,{})}),e.jsxs("div",{className:"flex justify-between items-center mb-4 w-full mt-8",children:[e.jsx("div",{className:"customtext-primary font-semibold",children:e.jsxs("nav",{class:"flex items-center gap-x-2 min-w-max",children:[e.jsx("a",{class:" p-4 inline-flex items-center  ",href:"javascript:;",children:e.jsx(b,{})}),e.jsx("a",{class:"w-10 h-10  bg-transparent p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;","aria-current":"page",children:"1"}),e.jsx("a",{class:"w-10 h-10 bg-primary text-white p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;",children:"2"}),e.jsx("a",{class:"w-10 h-10 bg-transparent  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;",children:"3"}),e.jsx("a",{class:"w-10 h-10 bg-transparent p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;",children:"..."}),e.jsx("a",{class:"w-10 h-10 bg-transparent  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary",href:"javascript:;",children:"5"}),e.jsx("a",{class:" p-4 inline-flex items-center ",href:"javascript:;",children:e.jsx(y,{})})]})}),e.jsx("div",{children:e.jsx("p",{className:"font-semibold",children:"1 - 48 de 255 Resultados"})})]})]})]})})})};export{fe as default};
