import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as i}from"./index-BH53Isel.js";import{C as p,N as b}from"./Number2Currency-DqtNgFrj.js";import{B as $,a as B,D as K}from"./DeliveryPricesRest-n5FkKXRt.js";import{T as A}from"./trash-2-DK1wnsDn.js";import{M as z}from"./minus-jyhodMPN.js";import{P as D}from"./plus-Bot15Khs.js";import{u as I,S as R}from"./SelectForm-m9ZsfpcY.js";import{m as f}from"./main-BvVILmTO.js";import{I as C}from"./InputForm-BF3tk65A.js";import{G as _}from"./Global-CQLDm_nT.js";import"./index-yBjzXJbu.js";import"./createLucideIcon-Cy5Ya80P.js";import"./chevron-down-DS-mdh9v.js";import"./search-TwiiKGP5.js";import"./check-DQ7QoS0v.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";const L=({setCart:m,...n})=>{const h=()=>{m(N=>N.filter(d=>d.id!==n.id))},r=()=>{m(N=>N.map(d=>d.id===n.id?{...d,quantity:(d.quantity||1)+1}:d))},t=()=>{m(N=>N.map(d=>{if(d.id===n.id){const g=(d.quantity||1)-1;return g<=0?(h(n.id),null):{...d,quantity:g}}return d}).filter(Boolean))};return console.log(n),e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hidden md:table-row border-b bg-gray-50 font-font-general",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"w-16 h-16 object-cover rounded mr-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:n.name}),e.jsxs("div",{className:"text-[12px] 2xl:text-sm customtext-neutral-dark space-y-1 mt-1",children:[e.jsx("p",{children:"Color: varios"}),e.jsx("button",{onClick:h,className:" text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(A,{size:18})})]})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Decrease quantity",children:e.jsx(z,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:n.quantity||1})}),e.jsx("button",{type:"button",onClick:r,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Increase quantity",children:e.jsx(D,{size:16})})]})})}),e.jsxs("td",{className:"px-4 py-4 text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[p(),Number(n.price).toFixed(2)]}),e.jsxs("div",{className:"font-bold",children:[p(),Number(n.final_price).toFixed(2)]})]}),e.jsxs("td",{className:"px-4 py-4 text-right font-bold",children:[p(),Number(n.final_price*n.quantity).toFixed(2)]})]},n.id),e.jsx("div",{className:"md:hidden bg-gray-50  rounded-lg shadow p-4 mb-4 w-full font-font-general",children:e.jsxs("div",{className:"flex items-start gap-4 relative",children:[e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1 leading-tight customtext-neutral-dark",children:n.name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Color: varios"}),e.jsxs("div",{className:"mt-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm w-24",children:[e.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100",children:e.jsx(z,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:n.quantity||1})}),e.jsx("button",{onClick:r,className:"p-2 text-gray-600 hover:bg-gray-100",children:e.jsx(D,{size:16})})]}),e.jsxs("div",{className:"text-right mt-2",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[p(),Number(n.price).toFixed(2)]}),e.jsxs("div",{className:"font-bold",children:[p(),Number(n.final_price).toFixed(2)]}),e.jsxs("div",{className:"text-sm font-bold mt-1",children:["Subtotal: ",p(),Number(n.final_price*n.quantity).toFixed(2)]})]})]})]}),e.jsx("button",{onClick:h,className:"absolute -top-2 -right-2 text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(A,{size:18})})]})})]})};function W({cart:m,setCart:n,onContinue:h,subTotal:r,envio:t,igv:N,totalFinal:d}){return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-y-8 md:gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 flex flex-row w-full",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto rounded-lg w-full",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"!font-font-general",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Producto"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Cantidad"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Precio"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Subtotal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map((g,y)=>e.jsx(L,{...g,setCart:n},y))})]})}),e.jsx("div",{className:"md:hidden space-y-4 w-full",children:m.map((g,y)=>e.jsx(L,{...g,setCart:n},y))})]}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6 customtext-neutral-dark",children:"Resumen de compra"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(r)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(N)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(t)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[p(),b(d)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx($,{className:"rounded-2xl xl:rounded-3xl",onClick:h,children:"  Continuar"}),e.jsx(B,{className:"rounded-2xl xl:rounded-3xl",href:"/",children:" Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas losÂ ",e.jsx("a",{className:"customtext-primary font-bold",children:"TÃ©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestraÂ ",e.jsx("a",{className:"customtext-primary font-bold",children:"PolÃ­tica de Privacidad"}),"."]})})]})]})]})}const X=m=>new Promise(async(n,h)=>{try{console.log("Datos para MercadoPago:",m);const{status:r,result:t}=await f.Fetch("./api/mercadopago/preference",{method:"POST",body:JSON.stringify(m)});if(!r||!t.preference_id){f.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(t==null?void 0:t.message)||"Error al crear la preferencia de pago",type:"danger"}),h((t==null?void 0:t.message)||"Error al crear la preferencia de pago");return}console.log("âœ… Preferencia creada:",t);const N=new window.MercadoPago(t.public_key,{locale:"es-PE"});setTimeout(()=>{window.location.href=t.redirect_url},500),n(t)}catch(r){console.error("Error en processMercadoPagoPayment:",r),f.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message||"Error en la integraciÃ³n con MercadoPago",type:"danger"}),h(r.message||"Error en la integraciÃ³n con MercadoPago")}});function Y({cart:m,setSale:n,setCode:h,setDelivery:r,setCart:t,onContinue:N,noContinue:d,subTotal:g,igv:y,totalFinal:k,user:a,setEnvio:S,envio:P}){const[s,j]=i.useState({name:(a==null?void 0:a.name)||"",lastname:(a==null?void 0:a.lastname)||"",email:(a==null?void 0:a.email)||"",department:(a==null?void 0:a.department)||"",province:(a==null?void 0:a.province)||"",district:(a==null?void 0:a.district)||"",address:(a==null?void 0:a.address)||"",number:(a==null?void 0:a.number)||"",comment:(a==null?void 0:a.comment)||"",reference:(a==null?void 0:a.reference)||"",shippingOption:"delivery",invoiceType:(a==null?void 0:a.invoiceType)||"boleta",documentType:(a==null?void 0:a.documentType)||"dni",document:(a==null?void 0:a.document)||"",businessName:(a==null?void 0:a.businessName)||""}),c=o=>{const{name:l,value:T}=o.target;j(w=>({...w,[l]:T})),l==="invoiceType"&&j(w=>({...w,documentType:T==="factura"?"ruc":"dni",document:"",businessName:T==="factura"?w.businessName:""}))},[x,v]=i.useState(""),[u,F]=i.useState(""),[E,q]=i.useState(""),[G,V]=i.useState([]),[U,J]=i.useState([]),[Q,M]=i.useState([]),[se,ae]=i.useState(0);i.useEffect(()=>{const o=[...new Set(I.map(l=>l.departamento))];V(o)},[]),i.useEffect(()=>{if(x){const o=[...new Set(I.filter(l=>l.departamento===x).map(l=>l.provincia))];J(o),F(""),q(""),M([]),j(l=>({...l,department:x,province:"",district:""}))}},[x]),i.useEffect(()=>{if(u){const o=I.filter(l=>l.departamento===x&&l.provincia===u).map(l=>l.distrito);M(o),q(""),j(l=>({...l,province:u,district:""}))}},[u]),i.useEffect(()=>{E&&(j(l=>({...l,district:E})),(async()=>{try{const l=await K.getShippingCost({department:x,district:E});S(l.data.price),b(l.data.price)>0?O("express"):O("free")}catch(l){console.error("Error fetching shipping cost:",l),alert("No se pudo obtener el costo de envÃ­o.")}})())},[E]);const H=async o=>{if(o.preventDefault(),!a){f.Notify.add({icon:"/assets/img/icon.svg",title:"Iniciar SesiÃ³n",body:"Se requiere que incie sesiÃ³n para realizar la compra",type:"danger"});return}if(!s.document){f.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Formulario",body:`El campo ${s.documentType==="dni"?"DNI":"RUC"} es obligatorio`,type:"danger"});return}if(s.invoiceType==="factura"&&!s.businessName){f.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Formulario",body:"El campo RazÃ³n Social es obligatorio para factura",type:"danger"});return}if(!s.department||!s.province||!s.district||!s.name||!s.lastname||!s.email||!s.address||!s.reference){f.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Formulario",body:"Completar los datos de envÃ­o",type:"danger"});return}if(!window.MercadoPago){console.error("âŒ MercadoPago aÃºn no se ha cargado.");return}try{const l={user_id:(a==null?void 0:a.id)||"",name:(s==null?void 0:s.name)||"",lastname:(s==null?void 0:s.lastname)||"",fullname:`${s==null?void 0:s.name} ${s==null?void 0:s.lastname}`,email:(s==null?void 0:s.email)||"",phone:"",country:"PerÃº",department:x||"",province:u||"",district:E||"",ubigeo:null,address:(s==null?void 0:s.address)||"",number:(s==null?void 0:s.number)||"",comment:(s==null?void 0:s.comment)||"",reference:(s==null?void 0:s.reference)||"",amount:k||0,delivery:P,cart:m,invoiceType:s.invoiceType||"",documentType:s.documentType||"",document:s.document||"",businessName:s.businessName||""},w=await X(l);w.status?(n(w.sale),r(w.delivery),h(w.code)):f.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:"El pago ha sido rechazado",type:"danger"})}catch(l){console.log(l),f.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:"No se llegÃ³ a procesar el pago",type:"danger"})}},[te,O]=i.useState("free");return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-y-8 lg:gap-8 ",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-6 bg-[#f9f9f9] p-6 rounded-2xl font-font-general",onSubmit:o=>o.preventDefault(),children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 ",children:[e.jsx(C,{type:"text",label:"Nombres",name:"name",value:s.name,onChange:c,placeholder:"Nombres"}),e.jsx(C,{label:"Apellidos",type:"text",name:"lastname",value:s.lastname,onChange:c,placeholder:"Apellidos"})]}),e.jsx(C,{label:"Correo electrÃ³nico",type:"email",name:"email",value:s.email,onChange:c,placeholder:"Ej. hola@gmail.com"}),e.jsx(R,{label:"Departamento",options:G,placeholder:"Selecciona un Departamento",onChange:o=>{v(o),j(l=>({...l,department:x}))}}),e.jsx(R,{disabled:!x,label:"Provincia",options:U,placeholder:"Selecciona una Provincia",onChange:o=>{F(o),j(l=>({...l,province:u}))}}),e.jsx(R,{disabled:!u,label:"Distrito",options:Q,placeholder:"Selecciona un Distrito",onChange:o=>{q(o),j(l=>({...l,district:E}))}}),e.jsx(C,{label:"Avenida / Calle / JirÃ³n",type:"text",name:"address",value:s.address,onChange:c,placeholder:"Ingresa el nombre de la calle"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsx(C,{label:"NÃºmero",type:"text",name:"number",value:s.number,onChange:c,placeholder:"Ingresa el nÃºmero de la calle"}),e.jsx(C,{label:"Dpto./ Interior/ Piso/ Lote/ Bloque (opcional)",type:"text",name:"comment",value:s.comment,onChange:c,placeholder:"Ej. Casa 3, Dpto 101"})]}),e.jsx(C,{label:"Referencia",type:"text",name:"reference",value:s.reference,onChange:c,placeholder:"Ejem. Altura de la avenida..."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark",children:"Tipo de comprobante"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"boleta",checked:s.invoiceType==="boleta",onChange:c}),e.jsx("span",{className:"ml-2",children:"Boleta"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"factura",checked:s.invoiceType==="factura",onChange:c}),e.jsx("span",{className:"ml-2",children:"Factura"})]})]})]}),e.jsx(C,{label:s.documentType==="dni"?"DNI":"RUC",type:"text",name:"document",value:s.document,onChange:c,placeholder:`Ingrese su ${s.documentType==="dni"?"DNI":"RUC"}`,maxLength:s.documentType==="dni"?"8":"11"}),s.invoiceType==="factura"&&e.jsx(C,{label:"RazÃ³n Social",type:"text",name:"businessName",value:s.businessName,onChange:c,placeholder:"Ingrese la razÃ³n social"})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6 customtext-neutral-dark",children:"Resumen de compra"}),e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:m.map((o,l)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white p-0 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${o.image}`,alt:o.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold customtext-neutral-dark text-base 2xl:text-lg mb-2",children:o.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Color:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:o.color})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad:"," ",e.jsxs("span",{className:"customtext-neutral-dark",children:[o.quantity," "]})]})]})]})},o.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(g)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(y)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(P)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[p(),b(k)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsxs($,{className:"payment-button",onClick:H,children:[" ","Continuar"]}),e.jsx("div",{id:"mercadopago-button-container"}),e.jsxs(B,{onClick:d,children:[" ","Cancelar"]})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los",e.jsx("a",{className:"customtext-primary font-bold",children:"TÃ©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra",e.jsx("a",{className:"customtext-primary font-bold",children:"PolÃ­tica de Privacidad"}),"."]})})]})]})]})}const Z=({code:m})=>new Promise(async(n,h)=>{try{console.log("Codigo de venta:",m);const{status:r,result:t}=await f.Fetch("./api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:m})});if(!r||!t.order){f.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(t==null?void 0:t.message)||"Error no se pudo cargar la orden",type:"danger"}),h((t==null?void 0:t.message)||"Error no se pudo cargar la orde");return}n(t)}catch(r){console.error("Error en processMercadoPagoPayment:",r),f.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message||"Error en la integraciÃ³n con MercadoPago",type:"danger"}),h(r.message||"Error en la integraciÃ³n con MercadoPago")}});function ee({setCart:m,cart:n,code:h,delivery:r}){var j;const[t,N]=i.useState(null),[d,g]=i.useState(!0),[y,k]=i.useState(null);if(i.useEffect(()=>{h&&((async()=>{try{const x=await Z({code:h});N(x.order)}catch(x){k(x.message)}finally{g(!1)}})(),f.Local.delete(`${_.APP_CORRELATIVE}_cart`),f.Local.set(`${_.APP_CORRELATIVE}_cart`,[]))},[h]),d)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center",children:e.jsx("p",{children:"Cargando detalles de la orden..."})})});if(y)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center text-red-500",children:e.jsxs("p",{children:["Error al cargar la orden: ",y]})})});if(!t)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center",children:e.jsx("p",{children:"No se encontraron datos de la orden"})})});const S=((((j=t==null?void 0:t.items)==null?void 0:j.reduce((c,x)=>{const v=x.price||0,u=x.quantity||0;return c+v*u},0))||0)/1.18).toFixed(2),P=(S*.18).toFixed(2),s=parseFloat(S)+parseFloat(P)+parseFloat(t.delivery);return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-base xl:text-xl customtext-neutral-light",children:"Gracias por tu compra ðŸŽ‰"}),e.jsx("p",{className:"customtext-neutral-dark text-2xl xl:text-5xl font-semibold",children:"Tu orden ha sido recibida"}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:" customtext-neutral-light",children:"CÃ³digo de pedido"}),e.jsxs("div",{className:"customtext-neutral-dark text-lg font-semibold",children:["#",t.code]})]}),e.jsxs("div",{className:"space-y-4 max-w-lg bg-[#F7F9FB] mx-auto p-8 rounded-xl",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:t.items.map((c,x)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl w-max",children:e.jsx("img",{src:c.image?`/storage/images/item/${c.image}`:"/assets/img/noimage/no_img.jpg",alt:c.name,className:"w-20 h-20 object-cover rounded",onError:v=>v.target.src="/assets/img/noimage/no_img.jpg"})}),e.jsxs("div",{className:"text-start",children:[e.jsx("h3",{className:"font-medium text-lg",children:c.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Color: ",e.jsx("span",{className:"customtext-neutral-dark",children:c.color})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsx("span",{className:"customtext-neutral-dark",children:parseInt(c.quantity)})," - Precio: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[" ",p(),b(c.price)]})]})]})]})},x))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(S)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(P)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:[p(),b(t.delivery)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[p(),b(s)]})]})})]}),e.jsx("div",{className:"pt-3",children:e.jsx($,{href:"/catalogo",children:"  Seguir Comprando"})})]})]})})})}function Ne({cart:m,setCart:n,user:h}){const[r,t]=i.useState(1),d=(m.reduce((v,u)=>{const F=u.final_price;return v+F*u.quantity},0)/1.18).toFixed(2),g=(d*.18).toFixed(2),[y,k]=i.useState(0),a=parseFloat(d)+parseFloat(g)+parseFloat(y),[S,P]=i.useState([]),[s,j]=i.useState([]),[c,x]=i.useState([]);return i.useEffect(()=>{const u=new URLSearchParams(window.location.search).get("code");u&&(j(u),t(3))},[window.location.search]),i.useEffect(()=>{s&&f.Local.delete(`${_.APP_CORRELATIVE}_cart`)},[s]),i.useEffect(()=>{(()=>{const u=document.createElement("script");u.src="https://sdk.mercadopago.com/js/v2",u.async=!0,document.body.appendChild(u)})()},[]),e.jsxs("div",{className:"min-h-screen bg-white py-6 px-primary",children:[e.jsxs("div",{className:"bg-white  py-8 sm:p-8 rounded-xl",children:[e.jsxs("div",{className:`mb-4 xl:mb-8 grid lg:grid-cols-5 !font-font-general ${r===3?"mx-auto max-w-3xl":""} `,children:[e.jsxs("div",{className:`flex items-center justify-between  mx-1 gap-2 lg:mx-5 ${r===3?"lg:col-span-5":"lg:col-span-3"}  text-center`,children:[e.jsx("div",{className:`text-sm sm:text-base 2xl:text-lg tracking-tight ${r===1?"customtext-primary font-semibold":"customtext-neutral-dark"}`,children:"Carrito de compra"}),e.jsx("div",{className:`text-sm sm:text-base 2xl:text-lg tracking-tight ${r===2?"customtext-primary font-semibold":"customtext-neutral-dark"}`,children:"Detalles de envÃ­o"}),e.jsx("div",{className:`text-sm sm:text-base 2xl:text-lg tracking-tight ${r===3?"customtext-primary font-semibold":"customtext-neutral-dark"}`,children:"Orden confirmada"})]}),e.jsx("div",{className:`mt-4 h-1 max-w-3xl bg-gray-200 ${r===3?"lg:col-span-5":"lg:col-span-3"} `,children:e.jsx("div",{className:"h-1 bg-primary transition-all duration-500",style:{width:`${(r-1)/2*100}%`}})})]}),r===1&&e.jsx(W,{cart:m,setCart:n,onContinue:()=>t(2),subTotal:d,envio:y,igv:g,totalFinal:a}),r===2&&e.jsx(Y,{setCode:j,setDelivery:x,cart:m,setSale:P,setCart:n,onContinue:()=>t(3),noContinue:()=>t(1),subTotal:d,envio:y,setEnvio:k,igv:g,totalFinal:a,user:h}),r===3&&e.jsx(ee,{code:s,setCart:n,delivery:c,cart:S,subTotal:d,envio:y,igv:g,totalFinal:a})]}),e.jsx("section",{className:"px-[5%] xl:px-[8%] bg-white py-12 xl:py-16 font-paragraph",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start items-center bg-gradient-to-br from-[#FFFFFF] to-[#91502D1A] w-full rounded-3xl relative",children:[e.jsxs("div",{className:"flex flex-col gap-5 py-8 px-5 lg:pl-16 xl:pl-20  justify-start items-start w-full 2xl:w-3/5 max-w-xl 2xl:max-w-5xl text-white text-left",children:[e.jsx("h1",{className:"customtext-primary text-opacity-20 font-bold text-3xl md:text-4xl xl:text-5xl",children:"Â¡Tu compra merece un envÃ­o GRATIS!"}),e.jsxs("p",{className:"customtext-primary  font-normal text-base xl:text-lg 2xl:text-xl",children:["LlÃ©vate tus regalos favoritos y obtÃ©n envÃ­o gratis en compras mayores a ",p(),"100."]}),e.jsx("div",{className:"flex flex-col",children:e.jsx("a",{className:"w-auto bg-primary px-6 py-3 2xl:py-4 2xl:px-8 rounded-3xl text-white font-font-general leading-none text-base 2xl:text-xl",children:"Seguir comprando"})})]}),e.jsx("div",{className:"xl:absolute right-0 bottom-0 flex flex-col ml-5 w-full items-end  md:w-6/12 2xl:w-2/5 mt-0 md:-mb-14 ",children:e.jsx("img",{src:"/assets/img/backgrounds/resources/image-cart.png",onError:v=>v.target.src="/assets/img/noimage/no_img.jpg",className:"object-contain min-h-[300px] max-h-[500px] md:object-contain  xl:max-h-[400px]  md:max-h-none w-full object-bottom"})})]})})]})}export{Ne as default};
