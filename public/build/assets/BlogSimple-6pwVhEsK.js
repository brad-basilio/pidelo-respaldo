import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as c}from"./index-BH53Isel.js";import{P as $}from"./PostsRest-DXUjEmlX.js";import{C as F}from"./chevron-down-DS-mdh9v.js";import{S}from"./search-TwiiKGP5.js";import{C as E}from"./check-DQ7QoS0v.js";import{G as L}from"./Global-CklCDfn9.js";import{L as A}from"./Loading-B-FwDSWi.js";import{N as _}from"./NoResult-C9qZVva5.js";import"./index-yBjzXJbu.js";import"./ModalImportItem-CAaM7sud.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./createLucideIcon-Cy5Ya80P.js";function N({data:s,flex:r=!1,post:l,featured:m=!1}){return e.jsx("article",{className:`group relative ${m?"h-full":""}`,children:e.jsxs("a",{href:`/post/${l==null?void 0:l.slug}`,className:`block ${r&&"flex gap-4 "}`,children:[e.jsx("div",{className:`relative aspect-video overflow-hidden rounded-lg ${r&&"aspect-square  w-1/2"} `,children:e.jsx("img",{src:`/storage/images/post/${l==null?void 0:l.image}`,alt:l==null?void 0:l.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105 h-full w-full"})}),e.jsxs("div",{className:`mt-4 space-y-1 ${r&&"w-1/2 mt-0 gap-2"}`,children:[e.jsx("span",{className:"customtext-neutral-dark opacity-90 font-semibold text-base 2xl:text-lg",children:l==null?void 0:l.category.name}),e.jsx("h3",{className:"text-xl 2xl:text-2xl font-semibold customtext-neutral-dark group-hover:customtext-primary leading-tight",children:l==null?void 0:l.name}),e.jsx("p",{className:"line-clamp-3 customtext-neutral-dark opacity-85 text-base 2xl:text-xl leading-tight",children:l==null?void 0:l.summary}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("time",{children:l==null?void 0:l.post_date}),(s==null?void 0:s["bool:show_seen"])&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-circle-medium"}),e.jsx("span",{children:"Leído hace 5 minutos"})]})]})]})]})})}const P=({options:s=[],placeholder:r="Select an option",onChange:l,valueKey:m,labelKey:d,label:u,labelClass:i,className:g,disabled:f=!1})=>{const[x,h]=c.useState(!1),[o,w]=c.useState(null),[y,k]=c.useState(""),j=c.useRef(null),p=s.length>0&&typeof s[0]=="object",t=p?m||Object.keys(s[0])[0]:null,n=p?d||Object.keys(s[0])[1]:null,v=s.map(a=>p?{value:a[t],label:a[n]}:{value:a,label:a}).filter(a=>a.label.toLowerCase().includes(y.toLowerCase()));c.useEffect(()=>{const a=O=>{j.current&&!j.current.contains(O.target)&&h(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const C=a=>{w(a),l(a.value),h(!1)};return e.jsxs("div",{className:"relative w-full",ref:j,children:[u&&e.jsx("label",{className:`block text-sm mb-1 customtext-neutral-dark ${i}`,children:u}),e.jsxs("button",{className:`w-full relative text-start  px-4 py-3 border customtext-neutral-dark   rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300 ${g}`,onClick:()=>h(!x),"aria-haspopup":"listbox","aria-expanded":x,disabled:f,children:[e.jsx("span",{className:"block truncate",children:o?o.label:r}),e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center py-3 pr-2 pointer-events-none",children:e.jsx(F,{className:`w-5 h-5 customtext-neutral-dark transition-transform duration-200 ${x?"rotate-180":""}`})})]}),x&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg max-h-60 overflow-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search options...",value:y,onChange:a=>k(a.target.value)})]})}),e.jsx("ul",{className:"py-1",role:"listbox",children:v.map(a=>e.jsxs("li",{className:`px-4 py-2 cursor-pointer flex items-center justify-between 
                                    ${o&&o.value===a.value?"bg-blue-500 text-white":"hover:bg-gray-100"}`,onClick:()=>C(a),role:"option","aria-selected":o&&o.value===a.value,children:[e.jsx("span",{className:"block truncate",children:a.label}),o&&o.value===a.value&&e.jsx(E,{className:"w-5 h-5"})]},a.value))})]})]})},B=new $;function R({data:s,posts:r,setPosts:l,headerPosts:m,filteredData:d,loading:u,setLoading:i,isFilter:g,setIsFilter:f}){const{categories:x}=d,[h,o]=c.useState({category_id:"",post_date:"",name:""}),[w,y]=c.useState(!0),k=t=>{const n=[];return t.category_id&&n.push(["category_id","=",t.category_id]),t.post_date&&(console.log("Fecha seleccionada:",t.post_date),n.push(["post_date","=",t.post_date])),t.name&&(console.log("Nombre seleccionado:",t.name),n.push(["name","contains",t.name])),n},j=async()=>{i(!0);try{const t=k(h),n=h.category_id||h.post_date||h.name,b={with:"category",filter:t};console.log(b);const v=await B.paginate(b);console.log(v),l(v.data),f(!!n)}catch(t){console.error("Error fetching posts:",t)}finally{i(!1)}};c.useEffect(()=>{w?y(!1):j()},[h]);const p=(t,n)=>{o(b=>({...b,[t]:n}))};return c.useEffect(()=>{console.log("BlogHeader - posts actualizados:",r)},[r]),e.jsx("main",{className:"bg-white !font-font-general",children:e.jsxs("section",{className:`px-primary ${g?"pt-8":"py-8"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"customtext-primary font-title text-3xl md:text-5xl 2xl:text-6xl font-bold tracking-tight whitespace-break-spaces",children:s!=null&&s.title?s==null?void 0:s.title:e.jsxs(e.Fragment,{children:["Descubre lo mejor:",e.jsx("br",{}),"Publicaciones sobre el mundo de ",L.APP_NAME]})}),(s==null?void 0:s.description)&&e.jsx("p",{className:"customtext-neutral-dark opacity-80 text-base 2xl:text-xl",children:"Nuestros juguetes están diseñados para inspirar, educar y divertir, desarrollando habilidades esenciales desde temprana edad."})]}),e.jsxs("div",{className:"mt-8 flex flex-col md:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative md:w-6/12 flex items-center",children:[e.jsx("input",{type:"search",placeholder:"Buscar publicación",className:"w-full px-4 relative py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:t=>p("name",t.target.value)}),e.jsx("div",{className:"absolute right-3 p-2 rounded-xl bg-primary",children:e.jsx(S,{className:" h-5 w-5 text-white"})})]}),e.jsxs("div",{className:"flex w-full gap-2 md:gap-4 md:w-5/12",children:[e.jsx("div",{className:"w-1/2 md:w-full",children:e.jsx(P,{options:x,placeholder:"Todas las categorías",onChange:t=>{o(n=>({...n,category_id:t}))},labelKey:"name",valueKey:"id"})}),e.jsx("input",{type:"date",className:"w-1/2 md:w-full px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:t=>{p("post_date",t.target.value)}})]})]}),!g&&e.jsxs("div",{className:"mt-12 flex gap-8 bg-accent p-[2.5%] rounded-2xl",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(N,{data:s,featured:!0,post:m[0]})}),e.jsx("div",{className:"hidden md:flex space-y-4  flex-col w-1/2",children:m.slice(1,3).map(t=>e.jsx(N,{data:s,flex:!0,post:t},t.id))})]})]})})}function z({data:s,posts:r,postsLatest:l,loading:m,isFilter:d}){return e.jsx("section",{className:`font-font-general ${d?"pb-16":"pt-8 pb-16"}`,children:e.jsx("div",{className:"px-[5%]  mx-auto",children:d?e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-8 mt-8",children:m?e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(A,{})}):Array.isArray(r)&&r.length>0?r.map((u,i)=>e.jsx(N,{data:s,post:u},i)):e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(_,{})})}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 font-title customtext-primary",children:s!=null&&s.second_title?s==null?void 0:s.second_title:"Últimas publicaciones"}),(s==null?void 0:s.second_description)&&e.jsx("p",{className:"text-gray-600 mb-8",children:"Nam tempor diam quis urna maximus, ac laoreet arcu convallis. Aenean dignissim nec sem quis consequat."}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-8",children:Array.isArray(l)&&l.length>0?l.map((u,i)=>e.jsx(N,{data:s,post:u},i)):e.jsx("div",{className:"col-span-3 my-8",children:e.jsx(_,{})})})]})})})}const Y=({data:s,headerPosts:r,filteredData:l,postsLatest:m})=>{const[d,u]=c.useState([]),[i,g]=c.useState(!1),[f,x]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(R,{data:s,headerPosts:r,loading:i,setLoading:g,posts:d,setPosts:u,filteredData:l,isFilter:f,setIsFilter:x}),e.jsx(z,{data:s,postsLatest:m,posts:d,loading:i,setLoading:g,isFilter:f,setIsFilter:x})]})};export{Y as default};
