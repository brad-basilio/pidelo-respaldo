var p=Object.defineProperty;var d=(n,t,s)=>t in n?p(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var i=(n,t,s)=>d(n,typeof t!="symbol"?t+"":t,s);import"./AboutHeader-COUW3Uy_.js";import"./index-CqkZ-sT_.js";import{m as r}from"./main-CkMzf7wF.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";let c=new AbortController;class m{constructor(){i(this,"path",null);i(this,"hasFiles",!1);i(this,"paginate",async t=>{c.abort("Nothing"),c=new AbortController;const s=c.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(t),signal:s})).json()});i(this,"save",async(t,s=()=>{})=>{try{let e=!1,o={};if(this.hasFiles){const a=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))},body:t});e=a.ok,o=JSON.parseable(await a.text())}else{const a=await r.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(t)});e=a.status,o=a.result}if(!e)throw new Error((o==null?void 0:o.message)||"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:o.message,type:"success"}),s==null||s(),o}catch(e){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),null}});i(this,"status",async({id:t,status:s})=>{try{const{status:e,result:o}=await r.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:t,status:s})});if(!e)throw new Error((o==null?void 0:o.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:o.message,type:"success"}),!0}catch(e){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),!1}});i(this,"boolean",async({id:t,field:s,value:e})=>{try{const{status:o,result:a}=await r.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:t,field:s,value:e})});if(!o)throw new Error((a==null?void 0:a.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:a.message,type:"success"}),!0}catch(o){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:o.message,type:"danger"}),!1}});i(this,"delete",async t=>{try{const{status:s,result:e}=await r.Fetch(`/api/${this.path}/${t}`,{method:"DELETE"});if(!s)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:e.message,type:"success"}),!0}catch(s){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),!1}});i(this,"get",async(t={},s=[])=>{try{let e=`/api/${this.path}`;if(typeof t=="string"||typeof t=="number")e+=`/${t}`;else if(typeof t=="object"&&Object.keys(t).length>0){const a=new URLSearchParams(t).toString();e+=`?${a}`}if(s.length>0){const a=s.join(",");e+=`${e.includes("?")?"&":"?"}with=${a}`}const o=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))}});if(!o.ok)throw new Error(`Error ${o.status}: ${o.statusText}`);return await o.json()}catch(e){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),null}})}}export{m as B};
