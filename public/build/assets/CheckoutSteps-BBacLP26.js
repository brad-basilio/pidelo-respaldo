import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BH53Isel.js";import{N as y}from"./Number2Currency-e57Tgsuk.js";import{B as H,a as xe,D as he}from"./DeliveryPricesRest-n5FkKXRt.js";import{M as ge}from"./minus-jyhodMPN.js";import{P as fe}from"./plus-Bot15Khs.js";import{T as ve}from"./trash-2-DK1wnsDn.js";import{m as S}from"./main-BvVILmTO.js";import{I as T}from"./InputForm-BF3tk65A.js";import{l as se}from"./CheckoutSteps-DfQUmsqy.js";import{a as je,b as q,h as ye,c as V,d as be,u as Ne,S as we,_ as Se}from"./Select-aab027f3.esm-kGkkFbxE.js";import"./index-rimy3MAc.js";import"./index-yBjzXJbu.js";import"./createLucideIcon-Cy5Ya80P.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-fNjTmf9T.js";const Ce=({setCart:t,...a})=>{const n=()=>{t(i=>i.filter(r=>r.id!==a.id))},u=()=>{t(i=>i.map(r=>r.id===a.id?{...r,quantity:(r.quantity||1)+1}:r))},c=()=>{t(i=>i.map(r=>{if(r.id===a.id){const m=(r.quantity||1)-1;return m<=0?(n(a.id),null):{...r,quantity:m}}return r}).filter(Boolean))};return console.log(a),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${a.image}`,alt:a.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:a.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:a.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[a.stock>=a.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:a.sku})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"w-36 text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(a.price*a.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg mt-2",children:["S/ ",Number(a.final_price*a.quantity).toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:c,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(ge,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:a.quantity||1})}),e.jsx("button",{type:"button",onClick:u,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(fe,{size:16})})]}),e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(ve,{size:18})})]})]})})]})},a.id)};function ke({cart:t,setCart:a,onContinue:n,subTotal:u,envio:c,igv:i,totalFinal:r}){return console.log(t),e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"space-y-6",children:t.map((m,p)=>e.jsx(Ce,{...m,setCart:a},p))})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen de compra"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",y(u)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",y(i)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",y(c)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",y(r)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(H,{onClick:n,children:"  Continuar"}),e.jsx(xe,{href:"/",children:" Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los ",e.jsx("a",{className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra ",e.jsx("a",{className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]})}function Oe(){let t="";for(let a=0;a<12;a++){const n=Math.floor(Math.random()*10);t+=n}return t}const qe=t=>new Promise((a,n)=>{try{console.log(t);const u=Oe(t.email);console.log(u),window.Culqi.publicKey="pk_test_f4d42a7b5073e8df",window.Culqi.settings({title:"Sala Fabulosa",email:t.email,currency:"PEN",amount:t.amount*100,order:`${u}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:"/assets/resources/logo.png",bannerColor:"#311609",buttonBackground:"#311609"}}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){n("No se obtuvo un token de Culqi");return}const c=window.Culqi.token.id;console.log("✅ Token generado:",c),t={...t,token:c,orderNumber:u},console.log("_request actualizado",t);const{status:i,result:r}=await S.Fetch("./api/pago",{method:"POST",body:JSON.stringify(t)});i||console.log((r==null?void 0:r.message)||"Error en el pago"),window.Culqi.close(),S.Notify.add({icon:"/assets/img/icon.svg",title:"Pago Exitoso",body:"El pago se procesó correctamente.",type:"success"}),a(r)}catch(c){S.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:c.message,type:"danger"}),n(c.message||"Error en el pago")}},document.addEventListener("culqi.error",function(c){var i,r;S.Notify.add({icon:"/assets/img/icon.svg",title:"Error en Culqi",body:((i=c.detail)==null?void 0:i.message)||"Error desconocido",type:"danger"}),n(((r=c.detail)==null?void 0:r.message)||"Error desconocido")})}catch(u){S.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:u.message,type:"danger"}),n("Error en la integración con Culqi")}}),Ee=({title:t,description:a,selected:n,onSelect:u,disabled:c})=>e.jsxs("div",{className:`flex w-full items-center gap-3 p-4 border rounded-xl cursor-pointer transition-all duration-300 customtext-neutral-dark 
                }`,onClick:u,children:[e.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center ${n?"border-primary":""}`,children:n&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light",children:[e.jsx("h4",{className:"text-sm ",children:t}),e.jsx("p",{className:"text-xs",children:a})]})]}),Fe=()=>{const[t,a]=o.useState([]),[n,u]=o.useState(!1),c=o.useCallback(se.debounce(async i=>{if(!(i.length<3)){u(!0);try{const p=(await(await fetch(`/api/ubigeo/search?q=${encodeURIComponent(i)}`)).json()).map(x=>({value:x.reniec,label:`${x.distrito}, ${x.provincia}, ${x.departamento}`,inei:x.inei,data:x}));a(p)}catch(r){console.error("Error searching ubigeo:",r)}u(!1)}},300),[]);return{ubigeoOptions:t,loadingUbigeo:n,searchUbigeo:c}};var Pe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function _e(t){var a=t.defaultOptions,n=a===void 0?!1:a,u=t.cacheOptions,c=u===void 0?!1:u,i=t.loadOptions;t.options;var r=t.isLoading,m=r===void 0?!1:r,p=t.onInputChange,x=t.filterOption,h=x===void 0?null:x,E=je(t,Pe),k=E.inputValue,O=o.useRef(void 0),g=o.useRef(!1),N=o.useState(Array.isArray(n)?n:void 0),_=q(N,2),$=_[0],C=_[1],b=o.useState(typeof k<"u"?k:""),w=q(b,2),F=w[0],A=w[1],J=o.useState(n===!0),B=q(J,2),z=B[0],P=B[1],R=o.useState(void 0),D=q(R,2),s=D[0],d=D[1],l=o.useState([]),f=q(l,2),v=f[0],G=f[1],te=o.useState(!1),Q=q(te,2),ae=Q[0],U=Q[1],ne=o.useState({}),Y=q(ne,2),L=Y[0],X=Y[1],re=o.useState(void 0),Z=q(re,2),ie=Z[0],oe=Z[1],le=o.useState(void 0),ee=q(le,2),ce=ee[0],de=ee[1];c!==ce&&(X({}),de(c)),n!==ie&&(C(Array.isArray(n)?n:void 0),oe(n)),o.useEffect(function(){return g.current=!0,function(){g.current=!1}},[]);var K=o.useCallback(function(M,I){if(!i)return I();var j=i(M,I);j&&typeof j.then=="function"&&j.then(I,function(){return I()})},[i]);o.useEffect(function(){n===!0&&K(F,function(M){g.current&&(C(M||[]),P(!!O.current))})},[]);var ue=o.useCallback(function(M,I){var j=ye(M,I,p);if(!j){O.current=void 0,A(""),d(""),G([]),P(!1),U(!1);return}if(c&&L[j])A(j),d(j),G(L[j]),P(!1),U(!1);else{var pe=O.current={};A(j),P(!0),U(!s),K(j,function(W){g&&pe===O.current&&(O.current=void 0,P(!1),d(j),G(W||[]),U(!1),X(W?V(V({},L),{},be({},j,W)):L))})}},[c,K,s,L,p]),me=ae?[]:F&&s?v:$||[];return V(V({},E),{},{options:me,isLoading:z||m,onInputChange:ue,filterOption:h})}var $e=o.forwardRef(function(t,a){var n=_e(t),u=Ne(n);return o.createElement(we,Se({ref:a},u))}),Ie=$e;function Te({cart:t,setSale:a,setCode:n,setDelivery:u,setCart:c,onContinue:i,noContinue:r,subTotal:m,igv:p,totalFinal:x,user:h,setEnvio:E,envio:k,ubigeos:O=[]}){var R,D;const[g,N]=o.useState({name:(h==null?void 0:h.name)||"",lastname:(h==null?void 0:h.lastname)||"",email:(h==null?void 0:h.email)||"",department:"",province:"",district:"",address:"",number:"",comment:"",reference:"",ubigeo:null}),[_,$]=o.useState(!1),[C,b]=o.useState([]),[w,F]=o.useState(null),[A,J]=o.useState(null);console.log(O);const B=async s=>{if(!s)return;console.log("selected",s);const{data:d}=s;N(l=>({...l,department:d.departamento,province:d.provincia,district:d.distrito,ubigeo:d.reniec})),$(!0);try{const l=await he.getShippingCost({ubigeo:d.inei}),f=[];l.data.is_free?(f.push({type:"free",price:0,description:l.data.standard.description,deliveryType:l.data.standard.type,characteristics:l.data.standard.characteristics}),l.data.express.price>0&&f.push({type:"express",price:l.data.express.price,description:l.data.express.description,deliveryType:l.data.express.type,characteristics:l.data.express.characteristics})):l.data.agency.price>0?f.push({type:"agency",price:l.data.agency.price,description:l.data.agency.description,deliveryType:l.data.agency.type,characteristics:l.data.agency.characteristics}):f.push({type:"standard",price:l.data.standard.price,description:l.data.standard.description,deliveryType:l.data.standard.type,characteristics:l.data.standard.characteristics}),b(f),F(f[0].type),E(f[0].price)}catch{S.Notify.add({icon:"/assets/img/icon.svg",title:"Sin cobertura",body:"No realizamos envíos a esta ubicación",type:"danger"}),b([]),F(null),E(0)}$(!1)},z=async s=>{if(s.preventDefault(),!h){S.Notify.add({icon:"/assets/img/icon.svg",title:"Acceso requerido",body:"Debe iniciar sesión para continuar",type:"danger"});return}if(["name","lastname","email","ubigeo","address","reference"].filter(f=>!g[f]).length>0){S.Notify.add({icon:"/assets/img/icon.svg",title:"Campos incompletos",body:"Complete todos los campos obligatorios",type:"danger"});return}if(!w){S.Notify.add({icon:"/assets/img/icon.svg",title:"Seleccione envío",body:"Debe elegir un método de envío",type:"danger"});return}try{const f={user_id:h.id,...g,fullname:`${g.name} ${g.lastname}`,country:"Perú",amount:x,delivery:k,cart:t},v=await qe(f);v.data.status?(a(v.data.sale),u(v.data.delivery),n(v.data.code),c([]),i()):S.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el pago",body:v.data.message||"Pago rechazado",type:"danger"})}catch{S.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:"Ocurrió un error al procesar el pedido",type:"danger"})}};Fe();const P=o.useCallback(se.debounce((s,d)=>{if(s.length<3){d([]);return}console.log("inputValue",s),fetch(`/api/ubigeo/search?q=${encodeURIComponent(s)}`).then(l=>{if(!l.ok)throw new Error("Error en la respuesta");return l.json()}).then(l=>{const f=l.map(v=>({value:v.reniec,label:`${v.distrito}, ${v.provincia}, ${v.departamento}`,data:{inei:v.inei,reniec:v.reniec,departamento:v.departamento,provincia:v.provincia,distrito:v.distrito}}));d(f)}).catch(l=>{console.error("Error:",l),d([])})},300),[]);return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-6",onSubmit:s=>s.preventDefault(),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(T,{label:"Nombres",value:g.name,onChange:s=>N(d=>({...d,name:s.target.value})),required:!0}),e.jsx(T,{label:"Apellidos",value:g.lastname,onChange:s=>N(d=>({...d,lastname:s.target.value})),required:!0})]}),e.jsx(T,{label:"Correo electrónico",type:"email",value:g.email,onChange:s=>N(d=>({...d,email:s.target.value})),required:!0}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm 2xl:text-base mb-1 customtext-neutral-dark ",children:"Ubicación de entrega"}),e.jsx(Ie,{cacheOptions:!0,defaultOptions:!0,loadOptions:P,onChange:B,placeholder:"Buscar distrito, provincia o departamento...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:s})=>s.length<3?"Buscar distrito, provincia o departamento...":"No se encontraron resultados",isLoading:_,styles:{control:s=>({...s,border:"1px solid transparent",boxShadow:"none",minHeight:"44px","&:hover":{borderColor:"transparent"}}),menu:s=>({...s,zIndex:9999,marginTop:"4px",borderRadius:"8px",boxShadow:"none"}),option:s=>({...s,color:"inherit","&:hover":{color:"white"},backgroundColor:"inherit","&:hover":{backgroundColor:"#f4f4f5"}})},formatOptionLabel:({data:s})=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.distrito}),e.jsxs("div",{className:"text-gray-500",children:[s.provincia,", ",s.departamento]})]}),className:"w-full px-4 py-1.5 border focus:bg-primary focus:text-white border-gray-300 rounded-xl  transition-all duration-300",menuPortalTarget:document.body,menuPosition:"fixed"})]}),e.jsx(T,{label:"Dirección",value:g.address,onChange:s=>N(d=>({...d,address:s.target.value})),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(T,{label:"Número",value:g.number,onChange:s=>N(d=>({...d,number:s.target.value}))}),e.jsx(T,{label:"Referencia",value:g.reference,onChange:s=>N(d=>({...d,reference:s.target.value})),required:!0})]}),C.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Método de envío"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:C.map(s=>e.jsx(Ee,{title:s.type==="free"?"Envío Gratis":s.type==="express"?"Envío Express":s.type==="agency"?"Envío en Agencia":"Envío Estándar",price:s.price,description:s.description,selected:w===s.type,onSelect:()=>{F(s.type),E(s.price)}},s.type))}),console.log(C.find(s=>s.type===w)),w&&C.length>0&&e.jsx("div",{className:"space-y-4 mt-4",children:(D=(R=C.find(s=>s.type===w))==null?void 0:R.characteristics)==null?void 0:D.map((s,d)=>e.jsxs("div",{className:"flex items-start gap-4 bg-[#F7F9FB] p-4 rounded-xl",children:[e.jsx("div",{className:"w-5 flex-shrink-0",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-info customtext-primary",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 16v-4"}),e.jsx("path",{d:"M12 8h.01"})]})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:s})})]},`char-${d}`))})]})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen"}),e.jsx("div",{className:"space-y-4 border-b-2 pb-6",children:t.map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad: ",s.quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["S/ ",y(s.price)]})]})]},s.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["S/ ",y(m)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",y(p)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Envío:"}),e.jsxs("span",{children:["S/ ",y(k)]})]}),e.jsx("div",{className:"pt-4 border-t-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",y(x)]})]})}),e.jsx(H,{onClick:z,className:"w-full mt-6",children:"Pagar con Culqi"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-4 text-center",children:["Al completar tu compra aceptas nuestros"," ",e.jsx("a",{href:"/terminos",className:"text-blue-600 hover:underline",children:"Términos y Condiciones"})]})]})]})]})}function De({cart:t,code:a,delivery:n}){const c=(t.reduce((m,p)=>{const x=p.final_price;return m+x*p.quantity},0)/1.18).toFixed(2),i=(c*.18).toFixed(2),r=parseFloat(c)+parseFloat(i)+parseFloat(n);return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-[20px] customtext-neutral-light",children:"Gracias por tu compra 🎉"}),e.jsx("p",{className:"customtext-neutral-dark text-5xl font-semibold",children:"Tu orden ha sido recibida"}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:" customtext-neutral-light",children:"Código de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-lg font-semibold",children:`#${a}`})]}),e.jsxs("div",{className:"space-y-4 max-w-lg bg-[#F7F9FB] mx-auto p-8 rounded-xl",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:t.map((m,p)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex   gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-xl w-max",children:e.jsx("img",{src:`/storage/images/item/${m.image}`,alt:m.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:" text-start",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:m.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:m.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[m.quantity," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:m.sku})]})]})]})},p))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",y(c)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",y(i)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",y(n)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",y(r)]})]})})]}),e.jsx("div",{className:"pt-3",children:e.jsx(H,{href:"/catalogo",children:"  Seguir Comprando"})})]})]})})})}function es({cart:t,setCart:a,user:n,ubigeos:u=[],items:c}){const[i,r]=o.useState(1),p=(t.reduce((b,w)=>{const F=w.final_price;return b+F*w.quantity},0)/1.18).toFixed(2),x=(p*.18).toFixed(2),[h,E]=o.useState(0),k=parseFloat(p)+parseFloat(x)+parseFloat(h),[O,g]=o.useState([]),[N,_]=o.useState([]),[$,C]=o.useState([]);return o.useEffect(()=>{const b=document.createElement("script");return b.src="https://checkout.culqi.com/js/v4",b.async=!0,b.onload=()=>{console.log("✅ Culqi cargado correctamente."),window.culqi=function(){window.Culqi.token?console.log("✅ Token recibido:",window.Culqi.token.id):window.Culqi.order?console.log("✅ Orden recibida:",window.Culqi.order):console.error("❌ Error en Culqi:",window.Culqi.error)}},document.body.appendChild(b),()=>{document.body.removeChild(b)}},[]),e.jsx("div",{className:"min-h-screen bg-[#F7F9FB] py-12 px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white   p-8 rounded-xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[e.jsx("div",{className:`text-sm ${i===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"1. Carrito de compra"}),e.jsx("div",{className:`text-sm ${i===2?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"2. Detalles de envío"}),e.jsx("div",{className:`text-sm ${i===3?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"3. Orden confirmada"})]}),e.jsx("div",{className:"mt-4 h-1 max-w-3xl mx-auto bg-gray-200",children:e.jsx("div",{className:"h-1 bg-primary transition-all duration-500",style:{width:`${(i-1)/2*100}%`}})})]}),i===1&&e.jsx(ke,{cart:t,setCart:a,onContinue:()=>r(2),subTotal:p,envio:h,igv:x,totalFinal:k}),i===2&&e.jsx(Te,{items:c,setCode:_,setDelivery:C,cart:t,setSale:g,setCart:a,onContinue:()=>r(3),noContinue:()=>r(1),subTotal:p,envio:h,setEnvio:E,igv:x,totalFinal:k,user:n,ubigeos:u}),i===3&&e.jsx(De,{code:N,delivery:$,cart:O,subTotal:p,envio:h,igv:x,totalFinal:k})]})})}export{es as default};
