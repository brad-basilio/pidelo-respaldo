import{j as e}from"./AboutHeader-COUW3Uy_.js";import{r as n}from"./index-CqkZ-sT_.js";import{P as w}from"./PostsRest-BcNFA_fY.js";import{S as _}from"./search-DhoFIDMi.js";import"./BasicEditing-CqE15M_Q.js";import"./main-CkMzf7wF.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";import"./createLucideIcon-D0vxYqnu.js";function h({flex:l=!1,post:s,featured:c=!1}){return e.jsx("article",{className:`group relative ${c?"h-full":""}`,children:e.jsxs("a",{href:"#",className:`block ${l&&"flex gap-4 "}`,children:[e.jsx("div",{className:`relative aspect-video overflow-hidden rounded-lg ${l&&"aspect-square  w-1/2"} `,children:e.jsx("img",{src:`/api/posts/media/${s==null?void 0:s.image}`,alt:s==null?void 0:s.name,fill:!0,className:`object-cover transition-transform duration-300 group-hover:scale-105 ${l&&"h-full w-full"} `})}),e.jsxs("div",{className:`mt-4 space-y-2 ${l&&"w-1/2 mt-0 gap-6"}`,children:[e.jsx("span",{className:"customtext-primary font-medium",children:s==null?void 0:s.category.name}),e.jsx("h3",{className:"text-xl font-semibold group-hover:customtext-primary",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-gray-600 line-clamp-3",children:s==null?void 0:s.summary}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("time",{children:s==null?void 0:s.post_date}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Leído hace 5 minutos"})]})]})]})})}const S=new w;function B({posts:l,setPosts:s,headerPosts:c,filteredData:o,loading:d,setLoading:i,isFilter:m,setIsFilter:x}){const{categories:u}=o,[t,p]=n.useState({category_id:"",post_date:"",name:""}),[y,N]=n.useState(!0),v=a=>{const r=[];return a.category_id&&r.push(["category_id","=",a.category_id]),a.post_date&&(console.log("Fecha seleccionada:",a.post_date),r.push(["post_date","=",a.post_date])),a.name&&(console.log("Nombre seleccionado:",a.name),r.push(["name","contains",a.name])),r},b=async()=>{i(!0);try{const a=v(t),r=t.category_id||t.post_date||t.name,g={with:"category",filter:a};console.log(g);const j=await S.paginate(g);console.log(j),s(j.data),x(!!r)}catch(a){console.error("Error fetching posts:",a)}finally{i(!1)}};n.useEffect(()=>{y?N(!1):b()},[t]);const f=(a,r)=>{p(g=>({...g,[a]:r}))};return n.useEffect(()=>{console.log("BlogHeader - posts actualizados:",l)},[l]),e.jsx("main",{className:"bg-white",children:e.jsxs("section",{className:`px-primary mx-auto ${m?"pt-8":"py-8"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("span",{className:"text-sky-500 font-medium",children:"Blog"}),e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight",children:["Descubre lo mejor:",e.jsx("br",{}),"Publicaciones sobre el mundo digital"]}),e.jsx("p",{className:"text-gray-600 max-w-2xl",children:"Nuestros juguetes están diseñados para inspirar, educar y divertir, desarrollando habilidades esenciales desde temprana edad."})]}),e.jsxs("div",{className:"mt-8 flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"search",placeholder:"Buscar publicación",className:"w-full pl-4 pr-10 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",onChange:a=>f("name",a.target.value)}),e.jsx(_,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{onChange:a=>{p(r=>({...r,category_id:a.target.value}))},className:"border p-2 rounded w-full mb-4",children:[e.jsx("option",{value:"",children:"Todas las categorías"}),u.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx("input",{type:"date",className:"border p-2 rounded w-full mb-4",onChange:a=>{f("post_date",a.target.value)}})]})]}),!m&&e.jsxs("div",{className:"mt-12 flex gap-8",children:[e.jsx("div",{className:"w-1/2",children:e.jsx(h,{featured:!0,post:c[0]})}),e.jsx("div",{className:"space-y-4 flex flex-col w-1/2",children:c.slice(1,3).map(a=>e.jsx(h,{flex:!0,post:a},a.id))})]})]})})}function $({posts:l,postsLatest:s,loading:c,isFilter:o}){return console.log("isFilter:",o),console.log("posts:",l),n.useEffect(()=>{console.log("BlogList - posts cambiaron:",l)},[l]),e.jsx("section",{className:` ${o?"pb-16":"py-16"}`,children:e.jsx("div",{className:"px-primary mx-auto",children:o?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:c?e.jsx("p",{children:"Cargando..."}):Array.isArray(l)&&l.length>0?l.map((d,i)=>e.jsx(h,{post:d},i)):e.jsx("p",{children:"No hay Posts que coincidan con los filtros seleccionados."})}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Últimas publicaciones"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Nam tempor diam quis urna maximus, ac laoreet arcu convallis. Aenean dignissim nec sem quis consequat."}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:Array.isArray(s)&&s.length>0?s.map((d,i)=>e.jsx(h,{post:d},i)):e.jsx("p",{children:"No hay publicaciones recientes."})})]})})})}const R=({data:l,headerPosts:s,filteredData:c,postsLatest:o})=>{const[d,i]=n.useState([]),[m,x]=n.useState(!1),[u,t]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(B,{data:l,headerPosts:s,loading:m,setLoading:x,posts:d,setPosts:i,filteredData:c,isFilter:u,setIsFilter:t}),e.jsx($,{data:l,postsLatest:o,posts:d,loading:m,setLoading:x,isFilter:u,setIsFilter:t})]})};export{R as default};
