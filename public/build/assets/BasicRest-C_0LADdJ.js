var c=Object.defineProperty;var d=(i,s,o)=>s in i?c(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o;var n=(i,s,o)=>d(i,typeof s!="symbol"?s+"":s,o);import{m as r}from"./main-BvVILmTO.js";class g{constructor(){n(this,"path",null);n(this,"hasFiles",!1);n(this,"controller",null);n(this,"simpleGet",async(s,o)=>{try{const{status:t,result:e}=await r.Fetch(s,o);if(!t)throw new Error((e==null?void 0:e.message)||"Ocurrio un error inesperado");return e.data??!0}catch(t){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),null}});n(this,"paginate",async s=>{this.controller.abort("Nothing"),this.controller=new AbortController;const o=this.controller.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(s),signal:o})).json()});n(this,"save",async(s,o=()=>{})=>{try{let t=!1,e={};if(this.hasFiles){const a=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))},body:s});t=a.ok,e=JSON.parseable(await a.text())}else{const a=await r.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(s)});t=a.status,e=a.result}if(!t)throw new Error((e==null?void 0:e.message)||"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:e.message,type:"success"}),o==null||o(),(e==null?void 0:e.data)??!0}catch(t){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),null}});n(this,"status",async({id:s,status:o})=>{try{const{status:t,result:e}=await r.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:s,status:o})});if(!t)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:e.message,type:"success"}),!0}catch(t){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),!1}});n(this,"boolean",async({id:s,field:o,value:t})=>{try{const{status:e,result:a}=await r.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:s,field:o,value:t})});if(!e)throw new Error((a==null?void 0:a.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:a.message,type:"success"}),!0}catch(e){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),!1}});n(this,"delete",async s=>{try{const{status:o,result:t}=await r.Fetch(`/api/${this.path}/${s}`,{method:"DELETE"});if(!o)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(o){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:o.message,type:"danger"}),!1}});n(this,"get",async(s={},o=[])=>{try{let t=`/api/${this.path}`;if(typeof s=="string"||typeof s=="number")t+=`/${s}`;else if(typeof s=="object"&&Object.keys(s).length>0){const a=new URLSearchParams(s).toString();t+=`?${a}`}if(o.length>0){const a=o.join(",");t+=`${t.includes("?")?"&":"?"}with=${a}`}const e=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))}});if(!e.ok)throw new Error(`Error ${e.status}: ${e.statusText}`);return await e.json()}catch(t){return r.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:t.message,type:"danger"}),null}});this.controller=new AbortController}}export{g as B};
