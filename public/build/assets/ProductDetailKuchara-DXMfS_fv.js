import{j as a}from"./AboutSimple-Cf8x2fCZ.js";import{S as v}from"./ProductCard-erObE6pO.js";import{h as u}from"./html2string-CfCixsO3.js";import{H as m}from"./HtmlContent-FTivcJrM.js";import{N as i}from"./Number2Currency-e57Tgsuk.js";import{r as o}from"./index-BH53Isel.js";import{S as w,a as p}from"./BlogCarousel-DpjB9swg.js";import"./index-yBjzXJbu.js";const I=({item:s,cart:g,setCart:h})=>{var x;const[l,d]=o.useState(s==null?void 0:s.image),j=o.useRef(),[t,n]=o.useState(1),f=()=>{const r=structuredClone(g),e=r.findIndex(c=>c.id==s.id);e==-1?r.push({...s,quantity:Number(t||1)}):r[e].quantity++,h(r),v.fire({title:"Producto agregado",text:`Se agregó ${s.name} al carrito`,icon:"success",timer:1500})},N=()=>{n(r=>r+1)},b=()=>{n(r=>r>1?r-1:1)},y=r=>{const e=Number.parseInt(r.target.value);!isNaN(e)&&e>0&&n(e)};return a.jsxs("section",{className:"w-full px-[5%] py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden",children:a.jsx("img",{src:`/storage/images/item/${l}`,alt:s==null?void 0:s.name,className:"w-full h-full object-cover object-center","data-aos":"fade-up","data-aos-offset":"150",onError:r=>r.target.src="/api/cover/thumbnail/null"})}),a.jsxs(w,{slidesPerView:"auto",spaceBetween:12,className:"w-full",children:[a.jsx(p,{className:"!w-[80px]",children:a.jsx("button",{onClick:()=>d(s==null?void 0:s.image),className:`w-[80px] h-[80px] rounded-lg overflow-hidden border-2 ${l===(s==null?void 0:s.image)?"border-green-600":"border-gray-200"}`,children:a.jsx("img",{src:`/storage/images/item/${s==null?void 0:s.image}`,alt:s==null?void 0:s.name,className:"w-full h-full object-cover object-center",onError:r=>r.target.src="/api/cover/thumbnail/null"})})}),(x=s==null?void 0:s.gallery)==null?void 0:x.map((r,e)=>a.jsx(p,{className:"!w-[80px]",children:a.jsx("button",{onClick:()=>d(r),className:`w-[80px] h-[80px] rounded-lg overflow-hidden border-2 ${l===r?"border-green-600":"border-gray-200"}`,children:a.jsx("img",{src:`/storage/images/item/${r}`,alt:`imagen-${e}`,className:"w-full h-full object-cover object-center",onError:c=>c.target.src="/api/cover/thumbnail/null"})})},e))]})]}),a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[a.jsxs("span",{children:["SKU: ",(s==null?void 0:s.sku)||"N/A"]}),a.jsxs("span",{className:"text-green-600 font-medium",children:["Disponibilidad: ",(s==null?void 0:s.stock)>0?"En stock":"Agotado"]})]}),a.jsx("h1",{className:"font-bold font-title text-3xl text-green-700 leading-none my-4",children:(s==null?void 0:s.name)||"Sin nombre"}),a.jsxs("div",{className:"flex items-baseline gap-3 mt-2",children:[(s==null?void 0:s.discount)&&a.jsxs("span",{className:"text-gray-500 line-through text-lg",children:["S/ ",i(s.price)]}),a.jsxs("span",{className:"font-bold text-3xl",children:["S/ ",i(s==null?void 0:s.final_price)]}),(s==null?void 0:s.discount)&&a.jsxs("span",{className:"bg-red-500 text-white text-sm px-2 py-1 rounded-md",children:["-",Math.round((s.price-s.final_price)/s.price*100),"%"]})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("h3",{className:"font-medium text-lg mb-2",children:"Descripción:"}),a.jsx("p",{className:"text-gray-700",children:(s==null?void 0:s.summary)||u(s==null?void 0:s.description).trim()||"Sin descripción"})]}),((s==null?void 0:s.category)||(s==null?void 0:s.subcategory)||(s==null?void 0:s.brand))&&a.jsxs("div",{className:"mt-2",children:[a.jsx("h3",{className:"font-medium text-lg mb-2",children:"Contenido:"}),a.jsxs("ul",{className:"list-disc pl-5 text-gray-700 space-y-1",children:[(s==null?void 0:s.category)&&a.jsx("li",{children:a.jsx("span",{className:"font-medium",children:s.category.name})}),(s==null?void 0:s.subcategory)&&a.jsx("li",{children:a.jsx("span",{className:"font-medium",children:s.subcategory.name})}),(s==null?void 0:s.brand)&&a.jsx("li",{children:a.jsx("span",{className:"font-medium",children:s.brand.name})})]})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{htmlFor:"quantity",className:"font-medium",children:"Cantidad"}),a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex border border-gray-300 rounded-md",children:[a.jsx("button",{type:"button",onClick:b,className:"px-3 py-2 border-r border-gray-300",children:a.jsx("i",{className:"mdi mdi-minus",size:16})}),a.jsx("input",{id:"quantity",ref:j,type:"number",className:"w-16 text-center focus:outline-none",value:t,onChange:y,min:"1"}),a.jsx("button",{type:"button",onClick:N,className:"px-3 py-2 border-l border-gray-300",children:a.jsx("i",{className:"mdi mdi-plus",size:16})})]}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Máximo 10 unidades."})]})]})}),a.jsx("div",{className:"mt-4 flex flex-col gap-3",children:a.jsxs("button",{onClick:f,className:"w-full py-3 bg-green-700 hover:bg-green-800 text-white rounded-md flex items-center justify-center gap-2 transition-colors",children:[a.jsx("i",{className:"mdi mdi-cart-plus",size:20}),a.jsx("span",{children:"Agregar a mi carrito"})]})})]})]}),u(s==null?void 0:s.description).trim()&&a.jsxs("div",{className:"mt-12 border-t pt-8",children:[a.jsx("h2",{className:"font-bold text-2xl text-green-700 mb-4",children:"Descripción completa"}),a.jsx("div",{className:"text-gray-700 prose ql-editor",children:a.jsx(m,{html:s==null?void 0:s.description})})]})]})};export{I as default};
