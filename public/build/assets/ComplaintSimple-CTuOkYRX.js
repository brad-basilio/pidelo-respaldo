import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{R as H}from"./recaptcha-wrapper-hwZdxtK2.js";import{r as t}from"./index-BH53Isel.js";import{I as r}from"./InputForm-BF3tk65A.js";import{u as b}from"./ubigeo-Q-ocg024.js";import{S as m}from"./SelectForm-C1waivhy.js";import{m as v}from"./main-BvVILmTO.js";import{R as L}from"./index-Bv81MoWS.js";import{H as W}from"./HtmlContent-FTivcJrM.js";import{X as U}from"./x-DBMwyD6F.js";import"./index-yBjzXJbu.js";import"./index-duZ_MKqr.js";import"./index-Chjiymov.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./chevron-down-DS-mdh9v.js";import"./createLucideIcon-Cy5Ya80P.js";import"./search-TwiiKGP5.js";import"./check-DQ7QoS0v.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-fNjTmf9T.js";function de({generals:S}){const j=t.useRef(null),[f,D]=t.useState(""),[s,i]=t.useState({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),l=o=>{const{name:a,value:d,type:c,checked:u}=o.target;i({...s,[a]:c==="checkbox"?u:d})},E=o=>{o.preventDefault();const a=j.current.getValue();if(!a){D("Por favor, verifica el reCAPTCHA.");return}const d={...s,recaptcha_token:a};fetch("/api/complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(c=>c.json()).then(c=>{console.log(c),c.type==="success"?v.Notify.add({type:"success",icon:"/assets/img/icon.svg",title:"Solitud enviada con éxito",body:c.message}):v.Notify.add({type:"danger",icon:"/assets/img/icon.svg",title:"Envio Fallido",body:c.message})}).catch(c=>v.Notify.add({type:"danger",icon:"/assets/img/icon.svg",title:"Error",body:c}))},[n,k]=t.useState(""),[p,g]=t.useState(""),[h,x]=t.useState(""),[w,R]=t.useState([]),[P,F]=t.useState([]),[A,N]=t.useState([]);t.useEffect(()=>{const o=[...new Set(b.map(a=>a.departamento))];R(o)},[]),t.useEffect(()=>{if(n){const o=[...new Set(b.filter(a=>a.departamento===n).map(a=>a.provincia))];F(o),g(""),x(""),N([]),i(a=>({...a,departamento:n,provincia:"",distrito:""}))}},[n]),t.useEffect(()=>{if(p){const o=b.filter(a=>a.departamento===n&&a.provincia===p).map(a=>a.distrito);N(o),x(""),i(a=>({...a,provincia:p,distrito:""}))}},[p]),t.useEffect(()=>{h&&i(o=>({...o,distrito:h}))},[h]);const I=[{value:"ruc",label:"RUC"},{value:"dni",label:"DNI"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],M=[{value:"producto",label:"Producto"},{value:"servicio",label:"Servicio"}],q=[{value:"reclamo",label:"Reclamo"},{value:"queja",label:"Queja"}],[O,y]=t.useState(!1),C={terms_conditions:"Términos y condiciones"},T=o=>y(o),_=()=>y(null);return e.jsxs("div",{className:" w-full px-primary mx-auto pt-8 pb-16 font-font-general",children:[e.jsxs("div",{className:"max-w-7xl mx-auto  bg-white shadow-lg rounded-2xl customtext-neutral-dark p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-10 text-center uppercase",children:"Libro de Reclamaciones"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del Consumidor"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Nombres",name:"nombre",value:s.nombre,onChange:l,placeholder:"Nombres"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(m,{label:"Tipo de documento",options:I,placeholder:"Selecciona  documento",onChange:o=>{i(a=>({...a,tipo_documento:o}))}})}),e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Número de identidad",name:"numero_identidad",value:s.numero_identidad,onChange:l,placeholder:"Número de identidad"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Número de celular",name:"celular",value:s.celular,onChange:l,placeholder:"Número de celular"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:" Correo Electrónico",name:"correo_electronico",value:s.correo_electronico,onChange:l,placeholder:" Correo Electrónico"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(m,{label:"Departamento",options:w,placeholder:"Selecciona un Departamento",onChange:o=>{k(o),i(a=>({...a,departmento:o}))}}),e.jsx(m,{disabled:!n,label:"Provincia",options:P,placeholder:"Selecciona una Provincia",onChange:o=>{g(o),i(a=>({...a,provincia:o}))}}),e.jsx(m,{disabled:!p,label:"Distrito",options:A,placeholder:"Selecciona un Distrito",onChange:o=>{x(o),i(a=>({...a,distrito:o}))}})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Dirección",name:"direccion",value:s.direccion,onChange:l,placeholder:" Dirección"})})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del bien contratado"}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"relative mt-1",children:e.jsx(m,{label:" ¿Fue un producto o Servicio?",options:M,placeholder:"Selecciona...",onChange:o=>{i(a=>({...a,tipo_producto:o}))}})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"number",label:" Monto reclamado",name:"monto_reclamado",value:s.monto_reclamado,onChange:l,placeholder:"Monto reclamado"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:" Descripción de producto",name:"descripcion_producto",value:s.descripcion_producto,onChange:l,placeholder:"Nombre de producto y/o servicios, código(opcional)"})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Detalle del reclamo del pedido del consumidor"}),e.jsx("div",{className:"mb-4",children:e.jsx(m,{label:"¿Es un reclamo o queja?",options:q,placeholder:"Selecciona...",onChange:o=>{i(a=>({...a,tipo_reclamo:o}))}})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"date",label:"  Fecha de ocurrencia",name:"fecha_ocurrencia",value:s.fecha_ocurrencia,onChange:l,placeholder:"dd/mm/aaaa"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Número de Pedido",name:"numero_pedido",value:s.numero_pedido,onChange:l,placeholder:"Número de pedido: #95825548"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",children:"Detalle de reclamo o queja"}),e.jsx("textarea",{name:"detalle_reclamo",placeholder:"Detalle de reclamo",className:"w-full min-h-32  px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:s.detalle_reclamo,onChange:l})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"terminos",name:"acepta_terminos",className:"mt-1 mr-2",checked:s.acepta_terminos,onChange:l}),e.jsxs("label",{htmlFor:"terminos",className:"text-sm",children:["Estoy de acuerdo con los"," ",e.jsx("a",{onClick:()=>T(0),className:"customtext-primary underline",children:"términos y condiciones"})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx(H,{ref:j,sitekey:"6LfAcfcqAAAAACc7tfKbaBFc1X5I9V4fewWoVf-9"}),f&&e.jsx("p",{className:"text-red-500 mt-2",children:f})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"bg-primary text-white px-6 py-3 font-medium rounded-lg",children:"Enviar a libro de reclamaciones"})})]})]}),Object.keys(C).map((o,a)=>{var u;const d=C[o],c=((u=S.find(V=>V.correlative==o))==null?void 0:u.description)??"";return e.jsxs(L,{isOpen:O===a,onRequestClose:_,contentLabel:d,className:"absolute left-1/2 -translate-x-1/2 bg-white p-6 rounded-xl shadow-lg w-[95%] max-w-4xl my-8",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[e.jsx("button",{onClick:_,className:"float-right text-red-500 hover:text-red-700 transition-all duration-300 ",children:e.jsx(U,{width:"2rem",strokeWidth:"4px"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:d}),e.jsx(W,{className:"prose",html:c})]},a)})]})}export{de as default};
