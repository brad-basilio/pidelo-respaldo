import{j as e}from"./AboutHeader-ClKiNAEV.js";import{r as c}from"./index-DFv2mRv-.js";import{N as u}from"./Number2Currency-e57Tgsuk.js";import{M as K,T as U,B as M,a as O,O as A,I as z,D as H,p as Q}from"./OptionCard-DqYg_yPD.js";import{P as W}from"./plus-DqVREqgL.js";import{u as E,S as I}from"./SelectForm-yR0PH5BO.js";import{I as b}from"./InputForm-D93kGC-S.js";import{m as F}from"./main-rZoj-gSW.js";import"./createLucideIcon-CC2OGGjd.js";import"./chevron-down-Bgb5hLdB.js";import"./search-BlyVC63b.js";import"./check-sPmXvS3y.js";import"./___vite-browser-external_commonjs-proxy-BQdpDcDf.js";const X=({setCart:o,...n})=>{const h=()=>{o(x=>x.filter(i=>i.id!==n.id))},d=()=>{o(x=>x.map(i=>i.id===n.id?{...i,quantity:(i.quantity||1)+1}:i))},m=()=>{o(x=>x.map(i=>{if(i.id===n.id){const r=(i.quantity||1)-1;return r<=0?(h(n.id),null):{...i,quantity:r}}return i}).filter(Boolean))};return console.log(n),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:n.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:n.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[n.stock>=n.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:n.sku})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"w-36 text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(n.price*n.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg mt-2",children:["S/ ",Number(n.final_price*n.quantity).toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:m,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(K,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:n.quantity||1})}),e.jsx("button",{type:"button",onClick:d,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(W,{size:16})})]}),e.jsx("button",{onClick:h,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(U,{size:18})})]})]})})]})},n.id)};function Y({cart:o,setCart:n,onContinue:h,subTotal:d,envio:m,igv:x,totalFinal:i}){return console.log(o),e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"space-y-6",children:o.map((r,p)=>e.jsx(X,{...r,setCart:n},p))})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen de compra"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(d)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(x)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(m)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",u(i)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(M,{onClick:h,children:"  Continuar"}),e.jsx(O,{href:"/",children:" Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los ",e.jsx("a",{className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra ",e.jsx("a",{className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]})}function Z({cart:o,setSale:n,setCode:h,setDelivery:d,setCart:m,onContinue:x,noContinue:i,subTotal:r,igv:p,totalFinal:y,user:a,setEnvio:q,envio:w}){const[s,N]=c.useState({name:(a==null?void 0:a.name)||"",lastname:(a==null?void 0:a.lastname)||"",email:(a==null?void 0:a.email)||"",department:(a==null?void 0:a.department)||"",province:(a==null?void 0:a.province)||"",district:(a==null?void 0:a.district)||"",address:(a==null?void 0:a.address)||"",number:(a==null?void 0:a.number)||"",comment:(a==null?void 0:a.comment)||"",reference:(a==null?void 0:a.reference)||"",shippingOption:"delivery"}),f=l=>{const{name:t,value:$}=l.target;N(C=>({...C,[t]:$}))},[j,v]=c.useState(""),[g,k]=c.useState(""),[S,P]=c.useState(""),[R,L]=c.useState([]),[V,G]=c.useState([]),[_,B]=c.useState([]),[se,ae]=c.useState(0);c.useEffect(()=>{const l=[...new Set(E.map(t=>t.departamento))];L(l)},[]),c.useEffect(()=>{if(j){const l=[...new Set(E.filter(t=>t.departamento===j).map(t=>t.provincia))];G(l),k(""),P(""),B([]),N(t=>({...t,department:j,province:"",district:""}))}},[j]),c.useEffect(()=>{if(g){const l=E.filter(t=>t.departamento===j&&t.provincia===g).map(t=>t.distrito);B(l),P(""),N(t=>({...t,province:g,district:""}))}},[g]),c.useEffect(()=>{S&&(N(t=>({...t,district:S})),(async()=>{try{const t=await H.getShippingCost({department:j,district:S});q(t.data.price),u(t.data.price)>0?D("express"):D("free")}catch(t){console.error("Error fetching shipping cost:",t),alert("No se pudo obtener el costo de envío.")}})())},[S]);const J=async l=>{if(l.preventDefault(),!a){F.Notify.add({icon:"/assets/img/icon.svg",title:"Iniciar Sesión",body:"Se requiere que incie sesión para realizar la compra",type:"danger"});return}if(!s.department||!s.province||!s.district||!s.name||!s.lastname||!s.email||!s.address||!s.reference){F.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Formulario",body:"Completar los datos de envío",type:"danger"});return}if(!window.Culqi){console.error("❌ Culqi aún no se ha cargado.");return}try{const t={user_id:(a==null?void 0:a.id)||"",name:(s==null?void 0:s.name)||"",lastname:(s==null?void 0:s.lastname)||"",fullname:`${s==null?void 0:s.name} ${s==null?void 0:s.lastname}`,email:(s==null?void 0:s.email)||"",phone:"",country:"Perú",department:j||"",province:g||"",district:S||"",ubigeo:null,address:(s==null?void 0:s.address)||"",number:(s==null?void 0:s.number)||"",comment:(s==null?void 0:s.comment)||"",reference:(s==null?void 0:s.reference)||"",amount:y||0,delivery:w,cart:o},C=await Q(t);C.status?(n(C.sale),d(C.delivery),h(C.code),m([]),x()):F.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:"El pago ha sido rechazado",type:"danger"})}catch(t){console.log(t),F.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:"No se llegó a procesar el pago",type:"danger"})}},[T,D]=c.useState("free");return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("form",{className:"space-y-6",onSubmit:l=>l.preventDefault(),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{type:"text",label:"Nombres",name:"name",value:s.name,onChange:f,placeholder:"Nombres"}),e.jsx(b,{label:"Apellidos",type:"text",name:"lastname",value:s.lastname,onChange:f,placeholder:"Apellidos"})]}),e.jsx(b,{label:"Correo electrónico",type:"email",name:"email",value:s.email,onChange:f,placeholder:"Ej. hola@gmail.com"}),e.jsx(I,{label:"Departamento",options:R,placeholder:"Selecciona un Departamento",onChange:l=>{v(l),N(t=>({...t,department:j}))}}),e.jsx(I,{disabled:!j,label:"Provincia",options:V,placeholder:"Selecciona una Provincia",onChange:l=>{k(l),N(t=>({...t,province:g}))}}),e.jsx(I,{disabled:!g,label:"Distrito",options:_,placeholder:"Selecciona un Distrito",onChange:l=>{P(l),N(t=>({...t,district:S}))}}),e.jsx(b,{label:"Avenida / Calle / Jirón",type:"text",name:"address",value:s.address,onChange:f,placeholder:"Ingresa el nombre de la calle"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"Número",type:"text",name:"number",value:s.number,onChange:f,placeholder:"Ingresa el número de la calle"}),e.jsx(b,{label:"Dpto./ Interior/ Piso/ Lote/ Bloque (opcional)",type:"text",name:"comment",value:s.comment,onChange:f,placeholder:"Ej. Casa 3, Dpto 101"})]}),e.jsx(b,{label:"Referencia",type:"text",name:"reference",value:s.reference,onChange:f,placeholder:"Ejem. Altura de la avenida..."})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx(A,{title:"Envío gratis",description:"Entrega entre 3 a 10 días hábiles",selected:T==="free"}),e.jsx(A,{title:"Delivery",description:"Delivery 24 horas",selected:T==="express"})]}),e.jsxs("div",{className:"flex gap-4 mt-6 bg-[#F7F9FB] p-3 rounded-xl",children:[e.jsx("div",{className:"w-5",children:e.jsx(z,{className:"customtext-primary",width:"20px"})}),e.jsxs("div",{className:"text-xs font-medium customtext-neutral-dark flex flex-col gap-2",children:[e.jsx("p",{children:"Solo Lima Metropolitana: Dentro de las 24 horas después de efectuado el pago, solo algunos distritos de Lima Metropolitana."}),e.jsxs("p",{children:[" ","Distritos No incluidos: Santa María del Mar, Pucusana, San Bartolo, Punta Hermosa, Lurín, Pachacamac, Chorrillos, Villa el Salvador, Villa María del Triunfo, San Juan de Miraflores, Cieneguilla, Ate, Chosica, Huaycan, San Juan de Lurigancho (hasta el Metro), Ancón, Santa Rosa, Carabayllo, Puente Piedra."]}),e.jsxs("p",{children:[" ","Same Day: Solo para compras efectuadas hasta las 1pm del día."]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-4 bg-[#F7F9FB] p-3 rounded-xl",children:[e.jsx("div",{className:"w-5",children:e.jsx(z,{className:"customtext-primary",width:"20px"})}),e.jsx("div",{className:"text-xs font-medium customtext-neutral-dark flex flex-col gap-2",children:e.jsx("p",{children:"Lima: 3 a 4 dias hábiles | Provincia: de 4 a 10 dias hábiles"})})]})]}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen de compra"}),e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:o.map((l,t)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${l.image}`,alt:l.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:l.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:l.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad:"," ",e.jsxs("span",{className:"customtext-neutral-dark",children:[l.quantity," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:l.sku})]})]})]})},l.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(r)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(p)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(w)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",u(y)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsxs(M,{onClick:J,children:[" ","Continuar"]}),e.jsxs(O,{onClick:i,children:[" ","Cancelar"]})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los",e.jsx("a",{className:"customtext-primary font-bold",children:"Términos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra",e.jsx("a",{className:"customtext-primary font-bold",children:"Política de Privacidad"}),"."]})})]})]})]})}function ee({cart:o,code:n,delivery:h}){const m=(o.reduce((r,p)=>{const y=p.final_price;return r+y*p.quantity},0)/1.18).toFixed(2),x=(m*.18).toFixed(2),i=parseFloat(m)+parseFloat(x)+parseFloat(h);return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-[20px] customtext-neutral-light",children:"Gracias por tu compra 🎉"}),e.jsx("p",{className:"customtext-neutral-dark text-5xl font-semibold",children:"Tu orden ha sido recibida"}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:" customtext-neutral-light",children:"Código de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-lg font-semibold",children:`#${n}`})]}),e.jsxs("div",{className:"space-y-4 max-w-lg bg-[#F7F9FB] mx-auto p-8 rounded-xl",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:o.map((r,p)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex   gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-xl w-max",children:e.jsx("img",{src:`/storage/images/item/${r.image}`,alt:r.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:" text-start",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:r.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:r.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[r.quantity," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:r.sku})]})]})]})},p))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(m)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(x)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Envío"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",u(h)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",u(i)]})]})})]}),e.jsx("div",{className:"pt-3",children:e.jsx(M,{href:"/catalogo",children:"  Seguir Comprando"})})]})]})})})}function je({cart:o,setCart:n,user:h}){const[d,m]=c.useState(1),i=(o.reduce((v,g)=>{const k=g.final_price;return v+k*g.quantity},0)/1.18).toFixed(2),r=(i*.18).toFixed(2),[p,y]=c.useState(0),a=parseFloat(i)+parseFloat(r)+parseFloat(p),[q,w]=c.useState([]),[s,N]=c.useState([]),[f,j]=c.useState([]);return c.useEffect(()=>{const v=document.createElement("script");return v.src="https://checkout.culqi.com/js/v4",v.async=!0,v.onload=()=>{console.log("✅ Culqi cargado correctamente."),window.culqi=function(){window.Culqi.token?console.log("✅ Token recibido:",window.Culqi.token.id):window.Culqi.order?console.log("✅ Orden recibida:",window.Culqi.order):console.error("❌ Error en Culqi:",window.Culqi.error)}},document.body.appendChild(v),()=>{document.body.removeChild(v)}},[]),e.jsx("div",{className:"min-h-screen bg-[#F7F9FB] py-12 px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white   p-8 rounded-xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[e.jsx("div",{className:`text-sm ${d===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"1. Carrito de compra"}),e.jsx("div",{className:`text-sm ${d===2?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"2. Detalles de envío"}),e.jsx("div",{className:`text-sm ${d===3?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:"3. Orden confirmada"})]}),e.jsx("div",{className:"mt-4 h-1 max-w-3xl mx-auto bg-gray-200",children:e.jsx("div",{className:"h-1 bg-primary transition-all duration-500",style:{width:`${(d-1)/2*100}%`}})})]}),d===1&&e.jsx(Y,{cart:o,setCart:n,onContinue:()=>m(2),subTotal:i,envio:p,igv:r,totalFinal:a}),d===2&&e.jsx(Z,{setCode:N,setDelivery:j,cart:o,setSale:w,setCart:n,onContinue:()=>m(3),noContinue:()=>m(1),subTotal:i,envio:p,setEnvio:y,igv:r,totalFinal:a,user:h}),d===3&&e.jsx(ee,{code:s,delivery:f,cart:q,subTotal:i,envio:p,igv:r,totalFinal:a})]})})}export{je as default};
