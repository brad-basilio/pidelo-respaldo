var $=Object.defineProperty;var U=(m,r,s)=>r in m?$(m,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):m[r]=s;var E=(m,r,s)=>U(m,typeof r!="symbol"?r+"":r,s);import{j as e}from"./AboutHeader-COUW3Uy_.js";import{r as l}from"./index-CqkZ-sT_.js";import"./ProductCard-DppMoL6U.js";import{m as b}from"./main-CkMzf7wF.js";import"./BasicEditing-CqE15M_Q.js";import{N as z}from"./NoResult-CKKmsI7-.js";import{P as D}from"./ProductCardScraping-BBd3y3Bg.js";import{C as _}from"./chevron-down-CxOx8ByU.js";import{S as G}from"./search-DhoFIDMi.js";import{C as Q,a as W}from"./chevron-right-B4p_OAUH.js";import{F as X}from"./filter-CawzT8aa.js";import"./___vite-browser-external_commonjs-proxy-DA7w84js.js";import"./index.esm-uxJmvPV6.js";import"./createLucideIcon-D0vxYqnu.js";class M{}E(M,"getProducts",async r=>{console.log(r);try{const{query:s,proveedor:c,filters:x,page:h,limit:f=12}=r;if(c==="shopsimon"){const{status:j,result:d}=await b.Fetch("./api/scrap-shopsimon",{method:"POST",body:JSON.stringify({query:s,proveedor:c,page:h,limit:f})});return j?(b.Notify.add({icon:"/assets/img/icon.svg",title:"Operación correcta",body:"Se obtuvieron los productos correctamente"}),{data:d.data||[],hasMore:d.data.length===f}):(console.log((d==null?void 0:d.message)||"Error al obtener datos"),{data:[],hasMore:!1})}const{status:n,result:u}=await b.Fetch("./api/scrap",{method:"POST",body:JSON.stringify({query:s,proveedor:c,filters:x,page:h,limit:f})});return n?(b.Notify.add({icon:"/assets/img/icon.svg",title:"Operación correcta",body:"Se obtuvieron los productos correctamente"}),{data:u.data||[],filters:u.filters||[],hasMore:u.data.length===f}):(console.log((u==null?void 0:u.message)||"Error al obtener datos"),{data:[],hasMore:!1})}catch(s){return b.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),{data:[],filters:[],hasMore:!1}}}),E(M,"getPaginatedProducts",async r=>{try{const{query:s,proveedor:c,page:x,limit:h=10}=r,{status:f,result:n}=await b.Fetch("./api/scrap",{method:"POST",body:JSON.stringify({query:s,proveedor:c,page:x,limit:h})});return f?{data:n.data||[],hasMore:n.data.length===h}:(console.log((n==null?void 0:n.message)||"Error al obtener más datos"),{data:[],hasMore:!1})}catch(s){return b.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),{data:[],hasMore:!1}}});const Y=({title:m,options:r,onFilterChange:s})=>{const[c,x]=l.useState(!1),[h,f]=l.useState(""),[n,u]=l.useState(!1),j=()=>x(!c),d=r.filter((o,y,F)=>y===F.findIndex(w=>w.label===o.label)).filter(o=>o.label.toLowerCase().includes(h.toLowerCase())),C=n?d:d.slice(0,5);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:j,className:"flex items-center justify-between w-full mb-4",children:[e.jsx("span",{className:"font-medium",children:m}),e.jsx(_,{className:`h-5 w-5 transform transition-transform ${c?"":"-rotate-180"}`})]}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar",className:"w-full px-4 pl-10 py-3 border customtext-neutral-dark border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0 transition-all duration-300",value:h,onChange:o=>f(o.target.value)})]}),e.jsxs("div",{className:"space-y-3",children:[C.map((o,y)=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>s(o.label)}),e.jsx("span",{children:o.label})]},y)),d.length>5&&e.jsx("button",{onClick:()=>u(!n),className:"text-blue-500 hover:underline",children:n?"Ver menos":"Ver más"})]})]})]})},K=()=>e.jsx("div",{className:"group font-font-general animate-pulse w-full transition-transform duration-300 hover:scale-105  sm:w-1/3 flex-shrink-0 font-font-general customtext-primary cursor-pointer",children:e.jsx("div",{className:" px-4",children:e.jsx("div",{className:"bg-white rounded-3xl",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center  bg-secondary",children:e.jsx("svg",{class:"w-10 h-10 text-gray-200 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:e.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),xe=({items:m,data:r,filteredData:s,cart:c,setCart:x})=>{const{categories:h,brands:f,priceRanges:n}=s,[u,j]=l.useState({}),[d,C]=l.useState({}),[o,y]=l.useState([]),[F,w]=l.useState(!1),[ee,T]=l.useState({currentPage:1,totalPages:1}),k=async(t,i,g=1)=>{if(!t){alert("Por favor, ingresa un término de búsqueda");return}w(!0);try{const a=await M.getProducts({query:t,proveedor:i,filters:u,page:g});y(g===1?a.data:v=>[...v,...a.data]),T({currentPage:a.currentPage,totalPages:a.lastPage}),console.log(a.filters),C(a.filters),console.log(a.data)}catch(a){console.error("Error:",a),alert("Hubo un error al realizar la búsqueda. Por favor, intenta nuevamente.")}finally{w(!1)}},[N,V]=l.useState(""),[P,I]=l.useState("nike");l.useEffect(()=>{const t=new URLSearchParams(window.location.search),i=t.get("category");if(i){const g=h.find(a=>a.slug===i);g&&j(a=>({...a,category_id:[g.id]}))}V(t.get("search")),I(t.get("provider")),N&&k(N,P)},[m]);const[p,S]=l.useState(1),O=12,L=p*O,R=L-O,q=Array.isArray(o)?o.slice(R,L):[],A=Math.ceil(o.length/O),B=t=>S(t),H=(t,i)=>{j(g=>{const a=g[t]||[];let v;return a.includes(i)?v=a.filter(Z=>Z!==i):v=[...a,i],{...g,[t]:v}})},J=()=>{k(N,P)};return e.jsx("section",{className:"py-12 bg-[#F7F9FB] font-font-general",children:e.jsxs("div",{className:"mx-auto px-primary",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 pb-4 border-b-2",children:[e.jsx("h2",{className:"text-4xl font-bold w-6/12",children:"Todos los productos"}),e.jsx("div",{className:"flex items-center gap-4 w-5/12",children:e.jsx("div",{className:"flex justify-end items-center mb-4 w-full",children:e.jsx("div",{className:"customtext-neutral-dark font-semibold",children:e.jsxs("nav",{class:"flex items-center gap-x-2 min-w-max",children:[e.jsx("button",{class:" p-4 inline-flex items-center",onClick:()=>{S(p-1)},disabled:p===1,children:e.jsx(Q,{})}),e.jsx("ul",{className:"list-none flex gap-2",children:[...Array(A).keys()].map(t=>e.jsx("li",{className:`page-item ${p===t+1?"active":""}`,children:e.jsx("button",{onClick:()=>B(t+1),class:`w-10 h-10  p-2 inline-flex items-center justify-center rounded-full transition-all duration-300  hover:text-white hover:bg-primary ${p===t+1?"bg-primary text-white":" bg-transparent"}`,"aria-current":"page",children:t+1})},t+1))}),e.jsx("button",{class:" p-4 inline-flex items-center ",onClick:()=>{const t=p+1;t<=A?S(t):(S(t),k(N,P,t)),console.log("Página solicitada:",t)},disabled:p===A&&P==="invictastores",children:e.jsx(W,{})})]})})})})]}),e.jsxs("div",{className:"relative flex gap-4",children:[e.jsxs("div",{className:"w-3/12 bg-white p-4 rounded-lg h-max",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),e.jsx(X,{className:"h-5 w-5"})]}),Object.entries(d).map(([t,i])=>e.jsx(Y,{title:t.charAt(0).toUpperCase()+t.slice(1),options:i,onFilterChange:g=>H(t,g)},t)),e.jsx("button",{onClick:()=>J(),className:"w-full bg-primary text-white py-3 rounded-xl hover:brightness-90 transition-colors text-sm font-bold",children:"Aplicar Filtro"})]}),e.jsx("div",{className:"w-9/12",children:F?e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(t=>e.jsx(K,{},t))}):e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:Array.isArray(o)&&o.length>0?q.map((t,i)=>e.jsx(D,{product:t,widthClass:"lg:w-1/3",cart:c,setCart:x},i)):e.jsx(z,{})})})]})]})})};export{xe as default};
